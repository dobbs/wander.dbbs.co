{
  "version": 3,
  "names": [
    "UrlAdapter",
    "bind",
    "embed",
    "emit",
    "parse",
    "text",
    "arguments",
    "length",
    "undefined",
    "args",
    "err",
    "i",
    "len",
    "line",
    "ref",
    "result",
    "url",
    "split",
    "match",
    "player",
    "options",
    "key",
    "error",
    "console",
    "log",
    "concat",
    "href",
    "caption",
    "_ref",
    "toUpperCase",
    "wiki",
    "resolveLinks",
    "$item",
    "item",
    "append",
    "on",
    "textEditor",
    "window",
    "URL",
    "module",
    "require",
    "plugins",
    "video",
    "exports"
  ],
  "sources": [
    "video.coffee"
  ],
  "sourcesContent": [
    "###\n * Federated Wiki : Video Plugin\n *\n * Licensed under the MIT license.\n * https://github.com/fedwiki/wiki-plugin-video/blob/master/LICENSE.txt\n###\n\nparse = (text='') ->\n  result = {}\n  for line in text.split /\\r\\n?|\\n/\n    if args = line.match /^\\s*([A-Z0-9]{3,})\\s+([\\w\\.\\-\\/+0-9]+)\\s*$/\n      result.player = args[1]\n      result.options = ''\n      result.key = args[2]\n    else if args = line.match /^\\s*([A-Z0-9]{3,})\\s+([A-Z\\,]+)\\s+([\\w\\.\\-\\/+0-9]+)\\s*$/\n      result.player = args[1]\n      result.options = args[2]\n      result.key = args[3]\n    else if args = line.match /^\\s*(HTML5)\\s+([A-Za-z0-9]+)\\s+(.+)\\s*$/\n      try url = new UrlAdapter(args[3])\n      catch err then console.log \"failed to parse URL: #{err}\"\n      result.player = args[1]\n      result.options = args[2]\n      result.key = url.href\n    else\n      result.caption ||= ' '\n      result.caption += line + ' '\n  result\n\nembed = ({player, options, key}) ->\n  switch player\n    when 'YOUTUBE'\n      if options.toUpperCase() is \"PLAYLIST\"\n        \"\"\"\n          <iframe\n            width=\"420\" height=\"236\"\n            src=\"https://www.youtube-nocookie.com/embed/videoseries?list=#{key}\"\n            frameborder=\"0\"\n            allowfullscreen>\n          </iframe>\n        \"\"\"\n      else\n        \"\"\"\n          <iframe\n            width=\"420\" height=\"236\"\n            src=\"https://www.youtube-nocookie.com/embed/#{key}?rel=0\"\n            frameborder=\"0\"\n            allowfullscreen>\n          </iframe>\n        \"\"\"\n    when 'VIMEO'\n      \"\"\"\n        <iframe\n          src=\"https://player.vimeo.com/video/#{key}?title=0&amp;byline=0&amp;portrait=0\"\n          width=\"420\" height=\"236\"\n          frameborder=\"0\"\n          allowfullscreen>\n        </iframe>\n      \"\"\"\n    when 'ARCHIVE'\n      \"\"\"\n        <iframe\n          src=\"https://archive.org/embed/#{key}\"\n          width=\"420\" height=\"315\"\n          frameborder=\"0\" webkitallowfullscreen=\"true\" mozallowfullscreen=\"true\"\n          allowfullscreen>\n        </iframe>\n      \"\"\"\n    when 'TED'\n      \"\"\"\n        <iframe\n          src=\"https://embed-ssl.ted.com/talks/#{key}.html\"\n          width=\"420\" height=\"300\"\n          frameborder=\"0\" scrolling=\"no\" webkitAllowFullScreen mozallowfullscreen\n          allowFullScreen>\n        </iframe>\n      \"\"\"\n    when 'HTML5'\n      \"\"\"\n        <video controls width=\"100%\">\n          <source src=\"#{key}\"\n                  type=\"video/#{options}\">\n        </video>\n      \"\"\"\n    # CHANNEL9 and TEDX sources are not longer available, so provide some guidance.\n    when 'TEDX'\n      \"\"\"\n        <i>TEDx talks are now available in the TEDx YouTube channel. See #{wiki.resolveLinks('[[Updating TEDx items]]')} for help.</i><br>\n      \"\"\"\n    when 'CHANNEL9'\n      \"\"\"\n        <i>The Channel 9 site closed, see #{wiki.resolveLinks('[[Updating CHANNEL9 items]]')} for help.</i><br>\n      \"\"\"\n    else\n     \"(unknown player)\"\n\nemit = ($item, item) ->\n  result = parse item.text\n  $item.append \"\"\"\n    #{embed result}\n    <br>\n    <i>#{wiki.resolveLinks(result.caption || \"(no caption)\")}</i>\n  \"\"\"\n\nbind = ($item, item) ->\n  $item.on 'dblclick', () -> wiki.textEditor $item, item\n\nif window?\n  UrlAdapter = URL\nif module?\n  UrlAdapter = require('url').URL\nwindow.plugins.video = {emit, bind, UrlAdapter} if window?\nmodule.exports = {parse, embed, UrlAdapter} if module?\n"
  ],
  "mappings": "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"
}