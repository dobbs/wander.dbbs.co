{
  "version": 3,
  "mappings": "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",
  "names": [
    "hsltorgb",
    "h",
    "s",
    "l",
    "m2",
    "m1",
    "hue",
    "num",
    "window",
    "plugins",
    "favicon",
    "create",
    "$",
    "append",
    "attr",
    "hide",
    "canvas",
    "document",
    "getElementById",
    "ctx",
    "getContext",
    "light",
    "Math",
    "random",
    "dark",
    "angle",
    "sin",
    "cos",
    "scale",
    "abs",
    "colprep",
    "col",
    "p",
    "floor",
    "x",
    "y",
    "fillStyle",
    "fillRect",
    "fav",
    "toDataURL",
    "post",
    "image",
    "data",
    "console",
    "log"
  ],
  "sourceRoot": "",
  "sources": [
    "favicon.coffee"
  ],
  "sourcesContent": [
    "###\n * Federated Wiki : Favicon Plugin\n *\n * Licensed under the MIT license.\n * https://github.com/fedwiki/wiki-plugin-favicon/blob/master/LICENSE.txt\n###\n\n# ** favicon.coffee **\n# This is a brute force port of Ward's favicon.rb,\n# and could do with some refactoring by someone\n# who knows the canvas api, but it would be better\n# to move favicon generation to the client side.  This\n# could serve as a basis for that with enough refactoring.\n\n# Utility functions\nhsltorgb = (h, s, l) ->\n  h = (h % 360) / 360\n  m2 = l * (s + 1)\n  m1 = ((l * 2) - m2)\n  hue = (num) ->\n    if num < 0\n      num += 1\n    else if num > 1\n      num -= 1\n    if (num * 6) < 1\n      m1 + (m2 - m1) * num * 6\n    else if (num * 2) < 1\n      m2\n    else if (num * 3) < 2\n      m1 + (m2 - m1) * (2/3 - num) * 6\n    else\n      m1\n  [(hue(h+1/3)*255), (hue(h) * 255), (hue(h - 1/3) * 255)]\n\n\n\nwindow.plugins.favicon =\n  create: ->\n    $('body').append(\n      $('<canvas />').attr('width', 32).attr('height', 32).attr('id', 'favmaker').attr('display', 'none').hide()\n    )\n    canvas = document.getElementById('favmaker')\n    ctx = canvas.getContext('2d')\n    light = hsltorgb(Math.random() * 360, .78, .50)\n    dark = hsltorgb(Math.random() * 360, .78, .25)\n    angle = 2 * (Math.random() - 0.5)\n    sin = Math.sin angle\n    cos = Math.cos angle\n    scale = (Math.abs(sin) + Math.abs(cos))\n    colprep = (col, p) ->\n      Math.floor(light[col]*p + dark[col]*(1-p))%255\n    for x in [0..31]\n      for y in [0..31]\n        p = if sin >= 0 then sin * x + cos * y else -sin * (31 - x) + cos * y\n        p = p / 31 / scale\n        ctx.fillStyle = \"rgba(#{colprep(0, p)}, #{colprep(1, p)}, #{colprep(2, p)}, 1)\"\n        ctx.fillRect(x, y, 1, 1)\n    fav = canvas.toDataURL()\n    $('#favicon').attr('href', fav)\n    $('.favicon').attr('src', fav)\n    $.post('/favicon.png', {image: fav}, (data) ->\n      console.log data\n    )\n"
  ]
}