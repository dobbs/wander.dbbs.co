{
  "version": 3,
  "names": [
    "bind",
    "code",
    "compile",
    "emit",
    "emitrow",
    "find",
    "format",
    "generate",
    "parse",
    "performMethod",
    "performTitle",
    "prefetch",
    "recalculate",
    "text",
    "j",
    "len",
    "line",
    "program",
    "ref",
    "words",
    "split",
    "length",
    "match",
    "slice",
    "join",
    "watch",
    "slide",
    "error",
    "message",
    "page",
    "item",
    "k",
    "len1",
    "link",
    "links",
    "parsing",
    "titles",
    "story",
    "type",
    "push",
    "title",
    "substr",
    "rows",
    "concat",
    "context",
    "label",
    "funct",
    "vars",
    "ops",
    "args",
    "loc",
    "results",
    "console",
    "log",
    "done",
    "_$",
    "fetch",
    "$",
    "getJSON",
    "wiki",
    "asSlug",
    "when",
    "apply",
    "_toConsumableArray",
    "then",
    "xhr",
    "xhrs",
    "Array",
    "_len",
    "_key",
    "arguments",
    "$item",
    "parents",
    "data",
    "_$2",
    "i",
    "ref1",
    "_len2",
    "_key2",
    "items",
    "state",
    "methods",
    "plugin",
    "eval",
    "shift",
    "input",
    "output",
    "_",
    "extend",
    "value",
    "row",
    "toFixed",
    "getPlugin",
    "t",
    "errors",
    "candidates",
    "elem",
    "nominal",
    "sign",
    "slider",
    "index",
    "hasClass",
    "get",
    "radarData",
    "append",
    "addClass",
    "animate",
    "Math",
    "abs",
    "max",
    "event",
    "ui",
    "trigger",
    "on",
    "textEditor",
    "formula",
    "dialog",
    "window",
    "plugins",
    "reduce",
    "module",
    "exports"
  ],
  "sources": [
    "reduce.coffee"
  ],
  "sourcesContent": [
    "###\n * Federated Wiki : Reduce Plugin\n *\n * Licensed under the MIT license.\n * https://github.com/fedwiki/wiki-plugin-reduce/blob/master/LICENSE.txt\n###\n\n# interpret item's markup\n\nparse = (text) ->\n  program = {}\n  for line in text.split /\\n/\n    words = line.match /\\S+/g\n    if words is null or words.length < 1\n      # ignore it\n    else if words[0] is 'FOLD'\n      program.find = words[1..].join ' '\n    else if words[0] is 'WATCH'\n      program.watch = words[1..].join ' '\n    else if words[0] is 'SLIDE'\n      program.slide = words[1..].join ' '\n    else\n      program.error = {line, message: \"can't make sense of line\"}\n  program\n\nfind = (program, page) ->\n  titles = []\n  if program.find\n    for item in page.story\n      if item.type is 'pagefold'\n        parsing = item.text is program.find\n      else if parsing and item.type is 'paragraph'\n        if links = item.text.match /\\[\\[.*?\\]\\]/g\n          for link in links\n            titles.push {title: link.substr(2, link.length-4)}\n  titles\n\nformat = (program, titles) ->\n  rows = []\n  rows.push \"\"\"<tr><td><p class=\"error\">#{program.error.line} <span title=\"#{program.error.message}\">*\"\"\" if program.error\n  rows.push \"\"\"<tr><td>#{title.title}<td style=\"text-align:right;\">50\"\"\" for title in titles\n  rows.join \"\\n\"\n\n# translate to functional form (excel)\n\nemitrow = (context, label, funct) ->\n  context.vars[label] = context.ops.length if label\n  context.ops.push \"#{label or ''}\\t#{funct or ''}\"\n\ngenerate = (context, text) ->\n  loc = context.ops.length+1\n  for line in text.split /\\n/\n    console.log line, context\n    if args = line.match /^([0-9.eE-]+) +([\\w \\/%(){},&-]+)$/\n      emitrow context, args[2], args[1]\n    else if args = line.match /^([A-Z]+) +([\\w \\/%(){},&-]+)$/\n      emitrow context, args[2], \"=#{args[1]}(B#{loc}:B#{context.ops.length})\"\n      loc = context.ops.length\n    else if args = line.match /^([A-Z]+)$/\n      emitrow context, null, \"=#{args[1]}(B#{loc}:B#{context.ops.length})\"\n      loc = context.ops.length\n    else if args = line.match /^([0-9\\.eE-]+)$/\n      emitrow context, null, args[1]\n    else if args = line.match /^ *([\\w \\/%(){},&-]+)$/\n      emitrow context, args[1], \"=B#{context.vars[args[1]]+1}\"\n    else\n      emitrow context, \"can't parse '#{line}'\"\n\ncompile = (program, titles, done) ->\n  fetch = ($.getJSON \"/#{wiki.asSlug title.title}.json\" for title in titles)\n  $.when(fetch...).then (xhrs...) ->\n    context = {ops:[], vars:{}}\n    if program.slide\n      emitrow context, program.slide, 50\n    for xhr in xhrs\n      emitrow context\n      emitrow context, xhr[0].title\n      for item in xhr[0].story\n        switch item.type\n          when 'method' then generate context, item.text\n    console.log context\n    done context.ops.join(\"\\n\")\n\ncode = ($item, item, done) ->\n  program = parse item.text\n  page = $item.parents('.page').data('data')\n  titles = find program, page\n  compile program, titles, done\n\nprefetch = (titles, done) ->\n  fetch = ($.getJSON \"/#{wiki.asSlug title.title}.json\" for title in titles)\n  $.when(fetch...).then (xhrs...) ->\n    for i in [0..titles.length-1]\n      title = titles[i]\n      xhr = xhrs[i]\n      title.items =[]\n      for item in xhr[0].story\n        switch item.type\n          when 'method' then title.items.push(item)\n    done titles\n\nperformMethod = (state, done) ->\n  if state.methods.length > 0\n    state.plugin.eval state, state.methods.shift(), state.input, (state, output) ->\n      state.output = output\n      _.extend state.input, output\n      performMethod state, done\n  else\n    return done state\n\nperformTitle = (state, done) ->\n  if state.titles.length > 0\n    state.methods = (item for item in state.titles[0].items)\n    performMethod state, (state) ->\n      value = state.input[state.program.watch or state.program.slide]\n      state.titles[0].row.find('td:last').text value.toFixed 2\n      state.titles.shift()\n      performTitle state, done\n  else\n    return done state\n\nrecalculate = (program, input, titles, done) ->\n  wiki.getPlugin 'method', (plugin) ->\n    state = {program, plugin, input, titles:(t for t in titles), errors:[]}\n    performTitle state, done\n\n# render in the wiki page\n\nemit = ($item, item) ->\n  program = parse item.text\n  page = $item.parents('.page').data('data')\n  titles = find program, page\n\n  input = {}\n  output = {}\n\n  candidates = $(\".item:lt(#{$('.item').index($item)})\")\n  for elem in candidates\n    elem = $(elem)\n    if elem.hasClass 'radar-source'\n      _.extend input, elem.get(0).radarData()\n    else if elem.hasClass 'data'\n      _.extend input, elem.data('item').data[0]\n\n  $item.append (slider = $ '<div class=slider />')\n  if program.slide\n    nominal = output[program.slide] = +input[program.slide] or 50\n    sign = if nominal < 0 then -1 else 1\n    $item.addClass 'radar-source'\n    $item.get(0).radarData = -> output\n    slider.slider\n      animate: 'fast'\n      value: Math.abs(nominal)\n      max: Math.abs(nominal)*2\n      slide: (event, ui) ->\n        input[program.slide] = output[program.slide] = value = ui.value * sign\n        $item.find('tr:first td:last').text value\n        recalculate program, input, titles, ->\n          $item.trigger 'thumb', ui.value * sign\n  $item.append \"\"\"\n    <table style=\"width:100%; background:#eee; padding:.8em; margin-bottom:5px;\">\n      <tr><td>#{program.slide}<td style=\"text-align:right;\">#{nominal}\n    </table>\"\"\"\n  for title in titles\n    title.row = row = $ \"\"\"<tr><td>#{title.title}<td style=\"text-align:right;\">\"\"\"\n    $item.find('table').append title.row\n  prefetch titles, (titles) ->\n    input[program.slide] = nominal\n    recalculate program, input, titles, ->\n      console.log 'emit/prefetch/recalculate complete'\n\nbind = ($item, item) ->\n  $item.find('table').on 'dblclick', () -> wiki.textEditor $item, item\n  $item.find('.slider').on 'dblclick', () ->\n    code $item, item, (formula) ->\n      wiki.dialog \"Slider Computation\", \"<pre>#{formula}</pre>\"\n\nwindow.plugins.reduce = {emit, bind} if window?\nmodule.exports = {parse} if module?\n"
  ],
  "mappings": "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"
}