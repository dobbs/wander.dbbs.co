{
  "version": 3,
  "names": [
    "bind",
    "context",
    "delete_file",
    "emit",
    "expand",
    "fetch_list",
    "get_file",
    "ignore",
    "post_upload",
    "text",
    "replace",
    "e",
    "preventDefault",
    "stopPropagation",
    "$item",
    "action",
    "i",
    "journal",
    "len",
    "ref",
    "remote",
    "sites",
    "location",
    "host",
    "parents",
    "data",
    "push",
    "slice",
    "reverse",
    "length",
    "site",
    "includes",
    "item",
    "form",
    "$progress",
    "tick",
    "find",
    "percentComplete",
    "lengthComputable",
    "loaded",
    "total",
    "parseInt",
    "concat",
    "width",
    "$",
    "ajax",
    "url",
    "type",
    "processData",
    "contentType",
    "success",
    "empty",
    "error",
    "console",
    "log",
    "statusText",
    "responseText",
    "xhr",
    "XMLHttpRequest",
    "upload",
    "addEventListener",
    "assets",
    "filename",
    "match",
    "split",
    "fetch",
    "then",
    "response",
    "blob",
    "file",
    "File",
    "FormData",
    "append",
    "name",
    "message",
    "$report",
    "assetsData",
    "assetsURL",
    "link",
    "render",
    "requestSite",
    "trouble",
    "wiki",
    "getDirectURL",
    "act",
    "href",
    "encodeURIComponent",
    "isOwner",
    "files",
    "code",
    "html",
    "results",
    "join",
    "on",
    "target",
    "parent",
    "attr",
    "getURL",
    "dataType",
    "uploader",
    "hasClass",
    "addClass",
    "get",
    "prepend",
    "flag",
    "$button",
    "$input",
    "textEditor",
    "click",
    "originalEvent",
    "dataTransfer",
    "window",
    "plugins",
    "module",
    "exports"
  ],
  "sources": [
    "assets.coffee"
  ],
  "sourcesContent": [
    "\nexpand = (text)->\n  text\n    .replace /&/g, '&amp;'\n    .replace /</g, '&lt;'\n    .replace />/g, '&gt;'\n\nignore = (e) ->\n  e.preventDefault()\n  e.stopPropagation()\n\ncontext = ($item) ->\n  sites = [location.host]\n  if remote = $item.parents('.page').data('site')\n    unless remote == location.host\n      sites.push remote\n  journal = $item.parents('.page').data('data').journal\n  for action in journal.slice(0).reverse()\n    if action.site? and not sites.includes(action.site)\n      sites.push action.site\n  sites\n\npost_upload = ($item, item, form) ->\n  $progress = $item.find '.progress-bar'\n\n  tick = (e) ->\n    return unless e.lengthComputable\n    percentComplete = e.loaded / e.total\n    percentComplete = parseInt(percentComplete * 100)\n    $progress.text \"#{percentComplete}%\"\n    $progress.width \"#{percentComplete}%\"\n\n  $.ajax\n    url: '/plugin/assets/upload'\n    type: 'POST'\n    data: form\n    processData: false\n    contentType: false\n    success: ->\n      $item.empty()\n      emit $item, item\n      bind $item, item\n    error: (e) ->\n      console.log 'error', e\n      $progress.text \"upload error: #{e.statusText} #{e.responseText||''}\"\n      $progress.width '100%'\n    xhr: ->\n      xhr = new XMLHttpRequest\n      xhr.upload.addEventListener 'progress', tick, false\n      xhr\n\nget_file = ($item, item, url, success) ->\n  assets = item.text.match(/([\\w\\/-]*)/)[1]\n  filename = url.split('/').reverse()[0]\n  fetch(url).then((response) ->\n    response.blob()\n  ).then((blob) ->\n    file = new File(\n      [blob],\n      filename,\n      { type: blob.type }\n    )\n\n    form = new FormData()\n    form.append 'assets', assets\n    form.append 'uploads[]', file, file.name\n    success form\n  ).catch((e) ->\n    $progress = $item.find '.progress-bar'\n    $progress.text \"Copy error: #{e.message}\"\n    $progress.width '100%'\n  )\n\n\ndelete_file = ($item, item, url) ->\n  file = url.split('/').reverse()[0]\n  assets = item.text\n  $.ajax\n    url: \"/plugin/assets/delete?file=#{file}&assets=#{assets}\"\n    type: 'POST'\n    success: () ->\n      $item.empty()\n      emit $item, item\n      bind $item, item\n    error: (e) ->\n      $progress = $item.find '.progress-bar'\n      $progress.text \"Delete error: #{e.statusText} #{e.responseText||''}\"\n      $progress.width '100%'\n\nfetch_list = ($item, item, $report, assets, remote, assetsData) ->\n  requestSite = if remote? then remote else null\n  assetsURL = wiki.site(requestSite).getDirectURL('assets')\n  if assetsURL is ''\n    $report.text \"site not currently reachable.\"\n    return\n\n  link = (file) ->\n    href = \"#{assetsURL}/#{if assets is '' then \"\" else assets + \"/\"}#{encodeURIComponent file}\"\n    # todo: no action if not logged on\n    act = unless isOwner\n      ''\n    else if remote != location.host\n      '<button class=\"copy\">⚑</button> '\n    else\n      '<button class=\"delete\">✕</button> '\n    \n    \"\"\"<span>#{act}<a href=\"#{href}\" target=_blank>#{expand file}</a></span>\"\"\"\n\n  render = (data) ->\n    assetsData[assets] ||= {}\n    if data.error\n      return $report.text \"no files\" if data.error.code == 'ENOENT'\n      return $report.text \"plugin reports: #{data.error.code}\"\n    files = data.files\n    assetsData[assets][assetsURL] = files\n\n    if files.length == 0\n      return $report.text \"no files\"\n    $report.html (link file for file in files).join \"<br>\"\n\n    $report.find('button.copy').on 'click', (e) ->\n      href = $(e.target).parent().find('a').attr('href')\n      get_file $item, item, href, (form) ->\n        post_upload $item, item, form\n\n    $report.find('button.delete').on 'click', (e) ->\n      href = $(e.target).parent().find('a').attr('href')\n      delete_file $item, item, href\n\n  trouble = (e) ->\n    $report.text \"plugin error: #{e.statusText} #{e.responseText||''}\"\n\n  $.ajax\n    url: wiki.site(requestSite).getURL('plugin/assets/list')\n    data: {assets}\n    dataType: 'json'\n    success: render\n    error: trouble\n\nemit = ($item, item) ->\n  uploader = ->\n    return '' if $item.parents('.page').hasClass 'remote'\n    \"\"\"\n      <div style=\"background-color:#ddd;\" class=\"progress-bar\" role=\"progressbar\"></div>\n      <center><button class=\"upload\">upload</button></center>\n      <input style=\"display: none;\" type=\"file\" name=\"uploads[]\" multiple=\"multiple\">\n    \"\"\"\n\n  $item.append \"\"\"\n    <div style=\"background-color:#eee;padding:15px; margin-block-start:1em; margin-block-end:1em;\">\n      <dl style=\"margin:0;color:gray\"></dl>\n      #{uploader()}\n    </div>\n  \"\"\"\n\n  assetsData = {}\n  $item.addClass 'assets-source'\n  $item.get(0).assetsData = -> assetsData\n\n  assets = item.text.match(/([\\w\\/-]*)/)[1]\n  for site in context $item\n    $report = $item.find('dl').prepend \"\"\"\n      <dt><img width=12 src=\"#{wiki.site(site).flag()}\"> #{site}</dt>\n      <dd style=\"margin:8px;\"></dd>\n    \"\"\"\n    fetch_list $item, item, $report.find('dd:first'), assets, site, assetsData\n\n\nbind = ($item, item) ->\n  assets = item.text.match(/([\\w\\/-]*)/)[1]\n\n  $item.on 'dblclick', () -> wiki.textEditor $item, item\n\n  # https://coligo.io/building-ajax-file-uploader-with-node/\n  $button = $item.find '.upload'\n  $input = $item.find 'input'\n\n  $button.on 'click', (e) ->\n    $input.click()\n\n  $input.on 'change', (e) ->\n    upload $(this).get(0).files\n\n  $item.on 'dragover', ignore\n  $item.on 'dragenter', ignore\n  $item.on 'drop', (e) ->\n    ignore e\n    upload e.originalEvent.dataTransfer?.files\n\n  upload = (files) ->\n    return unless files?.length\n    form = new FormData()\n    form.append 'assets', assets\n    for file in files\n      form.append 'uploads[]', file, file.name\n    post_upload $item,item,form\n\nwindow.plugins.assets = {emit, bind} if window?\nmodule.exports = {expand} if module?\n"
  ],
  "mappings": "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"
}