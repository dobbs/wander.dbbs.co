{
  "version": 3,
  "names": [
    "bind",
    "emit",
    "escape",
    "feature",
    "htmlDecode",
    "lineup",
    "marker",
    "page",
    "parse",
    "resolve",
    "useLineupMarkers",
    "usePageMarkers",
    "line",
    "replace",
    "text",
    "wiki",
    "resolveLinks",
    "escapedText",
    "doc",
    "DOMParser",
    "parseFromString",
    "documentElement",
    "textContent",
    "decimal",
    "deg",
    "m",
    "nautical",
    "num",
    "match",
    "exec",
    "lat",
    "lon",
    "label",
    "slice",
    "$item",
    "candidates",
    "div",
    "i",
    "len",
    "lineupMarkers",
    "who",
    "$",
    "concat",
    "index",
    "filter",
    "length",
    "markerData",
    "pageMarkers",
    "siblings",
    "item",
    "boundary",
    "captions",
    "hint",
    "hints",
    "markers",
    "overlays",
    "ref",
    "result",
    "tools",
    "weblink",
    "frozen",
    "split",
    "push",
    "test",
    "url",
    "bounds",
    "Array",
    "from",
    "Set",
    "map",
    "JSON",
    "stringify",
    "caption",
    "join",
    "Object",
    "keys",
    "type",
    "geometry",
    "coordinates",
    "properties",
    "showing",
    "_parse",
    "addClass",
    "get",
    "opened",
    "s",
    "leaflet",
    "_popup",
    "_isOpen",
    "markerGeo",
    "features",
    "appendTo",
    "getScript",
    "freezeControl",
    "mapDiv",
    "mapId",
    "o",
    "openWeblink",
    "p",
    "showMarkers",
    "tile",
    "tileCredits",
    "update",
    "Math",
    "floor",
    "random",
    "append",
    "L",
    "scrollWheelZoom",
    "pageHandler",
    "put",
    "parents",
    "id",
    "doPlugin",
    "empty",
    "locate",
    "control",
    "position",
    "flyTo",
    "drawCircle",
    "drawMarker",
    "addTo",
    "search",
    "geocoder",
    "Control",
    "defaultMarkGeocode",
    "on",
    "e",
    "geocode",
    "center",
    "lng",
    "title",
    "name",
    "LatLngBounds",
    "results",
    "pad",
    "flyToBounds",
    "zoom",
    "toFixed",
    "freeze",
    "extend",
    "options",
    "onAdd",
    "container",
    "newMarkerGroup",
    "newMarkers",
    "DomUtil",
    "create",
    "innerHTML",
    "onclick",
    "toFreeze",
    "shiftKey",
    "preventDefault",
    "stopPropagation",
    "addEventListener",
    "l",
    "tmpBoundary",
    "x",
    "has",
    "layerGroup",
    "forEach",
    "mark",
    "remove",
    "latlng",
    "latLng",
    "onRemove",
    "addControl",
    "DomEvent",
    "disableClickPropagation",
    "doubleClickZoom",
    "disable",
    "originalEvent",
    "tileLayer",
    "attribution",
    "imageOverlay",
    "opacity",
    "interactive",
    "link",
    "target",
    "window",
    "open",
    "j",
    "len1",
    "markerLabel",
    "mkr",
    "bindPopup",
    "openPopup",
    "fitBounds",
    "setView",
    "regionData",
    "region",
    "getBounds",
    "north",
    "getNorth",
    "south",
    "getSouth",
    "east",
    "getEast",
    "west",
    "getWest",
    "textEditor",
    "plugins",
    "module",
    "exports"
  ],
  "sources": [
    "map.coffee"
  ],
  "sourcesContent": [
    "###\n * Federated Wiki : Map Plugin\n *\n * Licensed under the MIT license.\n * https://github.com/fedwiki/wiki-plugin-map/blob/master/LICENSE.txt\n###\n\n# which markers types\nusePageMarkers = false\nuseLineupMarkers = false\n\nescape = (line) ->\n  line\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n\nresolve = (text) ->\n  if wiki?\n    wiki.resolveLinks(text, escape)\n  else\n    escape(text)\n      .replace(/\\[\\[.*?\\]\\]/g,'<internal>')\n      .replace(/\\[.*?\\]/g,'<external>')\n\nhtmlDecode = (escapedText) ->\n  doc = new DOMParser().parseFromString(escapedText, \"text/html\")\n  doc.documentElement.textContent\n\nmarker = (text) ->\n  deg = (m) ->\n    num = +m[0] + m[1]/60 + (m[2]||0)/60/60\n    if m[3].match /[SW]/i then -num else num\n  decimal = /^(-?\\d{1,3}\\.?\\d*)[, ] *(-?\\d{1,3}\\.?\\d*)\\s*(.*)$/\n  nautical = /^(\\d{1,3})°(\\d{1,2})'(\\d*\\.\\d*)?\"?([NS]) (\\d{1,3})°(\\d{1,2})'(\\d*\\.\\d*)?\"?([EW]) (.*)$/i\n  return {lat: +m[1], lon: +m[2], label: resolve(m[3])} if m = decimal.exec text\n  return {lat: deg(m[1..4]), lon: deg(m[5..8]), label: resolve(m[9])} if m = nautical.exec text\n  null\n\nlineup = ($item) ->\n  return [{lat: 51.5, lon: 0.0, label: 'North Greenwich'}] unless wiki?\n  lineupMarkers = []\n  candidates = $(\".item:lt(#{$('.item').index($item)})\")\n  if (who = candidates.filter \".marker-source\").length\n    lineupMarkers = lineupMarkers.concat div.markerData() for div in who\n  lineupMarkers\n  \npage = ($item) ->\n  return [{lat: 51.5, lon: 0.0, label: 'North Greenwich'}] unless wiki?\n  pageMarkers = []\n  candidates = $item.siblings()\n  if (who = candidates.filter \".marker-source\").length\n    pageMarkers = pageMarkers.concat div.markerData() for div in who\n  pageMarkers\n\nparse = (item, $item) ->\n  text = item.text\n  # parsing the plugin text in context of any frozen items\n  captions = []\n  markers = []\n  lineupMarkers = null\n  pageMarkers = null\n  overlays = null\n  boundary = null\n  weblink = null\n  tools = {}\n\n  usePageMarkers = false\n  useLineupMarkers = false\n\n  if item.frozen\n    markers = markers.concat item.frozen\n  for line in text.split /\\n/\n    if m = marker line\n      m.weblink = weblink if weblink?\n      markers.push m\n    else if m = /^BOUNDARY *(.*)?$/.exec line\n      hints = if hint = marker m[1] then [hint] else []\n      boundary = markers.concat [] unless boundary?\n      boundary = boundary.concat hints\n    else if /^LINEUP/.test line\n      tools['freeze'] = true\n      useLineupMarkers = true\n      if !item.frozen\n        lineupMarkers = lineup($item)\n        markers = markers.concat lineupMarkers\n    else if /^PAGE/.test line\n      tools['freeze'] = true\n      usePageMarkers = true\n      if !item.frozen\n        pageMarkers = page($item)\n        markers = markers.concat pageMarkers\n    else if m = /^WEBLINK *(.*)$/.exec line\n      weblink = m[1]\n    else if m = /^OVERLAY *(.+?) ([+-]?\\d+\\.\\d+), ?([+-]?\\d+\\.\\d+) ([+-]?\\d+\\.\\d+), ?([+-]?\\d+\\.\\d+)$/.exec line\n      overlays = (overlays||[]).concat {url:m[1], bounds:[[m[2],m[3]],[m[4],m[5]]]}\n    else if /^LOCATE/.test line\n      tools['locate'] = true\n    else if /^SEARCH/.test line\n      tools['search'] = true\n    else\n      captions.push resolve(line)\n\n  # remove any duplicate markers\n  markers = Array.from(new Set(markers.map(JSON.stringify))).map(JSON.parse)\n  lineupMarkers = Array.from(new Set(lineupMarkers.map(JSON.stringify))).map(JSON.parse) if lineupMarkers\n  pageMarkers = Array.from(new Set(pageMarkers.map(JSON.stringify))).map(JSON.parse) if pageMarkers\n\n  boundary = markers unless boundary?\n  result = {markers, caption: captions.join('<br>'), boundary}\n  result.lineupMarkers = lineupMarkers if lineupMarkers\n  result.pageMarkers = pageMarkers if pageMarkers\n  result.tools = tools if Object.keys(tools).length > 0\n  result.weblink = weblink if weblink?\n  result.overlays = overlays if overlays?\n  result\n\nfeature = (marker) ->\n  type: 'Feature'\n  geometry:\n    type: 'Point'\n    coordinates: [marker.lon, marker.lat]\n    properties:\n      label: marker.label\n\nemit = ($item, item) ->\n  {caption, markers, lineupMarkers, pageMarkers, boundary, weblink, overlays, tools} = parse item, $item\n\n  # announce our capability to produce markers in native and geojson format\n\n  $item.addClass 'marker-source'\n\n  showing = []\n  $item.get(0).markerData = ->\n    opened = showing.filter (s) -> s.leaflet._popup._isOpen\n    if opened.length\n      return opened.map (s) -> s.marker\n    else\n      return markers\n\n  $item.get(0).markerGeo = ->\n    type: 'FeatureCollection'\n    features: markers.map(feature)\n\n  if (!$(\"link[href='https://unpkg.com/leaflet@1.7.1/dist/leaflet.css']\").length)\n    $('<link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\">').appendTo(\"head\")\n  if (!$(\"link[href='/plugins/map/map.css']\").length)\n    $('<link rel=\"stylesheet\" href=\"/plugins/map/map.css\" type=\"text/css\">').appendTo(\"head\")\n\n  wiki.getScript \"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js\", ->\n\n    mapId = \"map-#{Math.floor(Math.random()*1000000)}\"\n\n    $item.append \"\"\"\n      <figure style=\"padding: 8px;\">\n        <div id=\"#{mapId}\" style='height: 300px;'></div>\n        <p class=\"caption\">#{caption}</p>\n      </figure>\n    \"\"\"\n\n    map = L.map(mapId, {\n      scrollWheelZoom: false\n      })\n\n    update = ->\n      wiki.pageHandler.put $item.parents('.page:first'),\n        type: 'edit',\n        id: item.id,\n        item: item\n      wiki.doPlugin $item.empty(), item\n\n    # add locate control\n    if tools?.locate\n      if (!$(\"link[href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css']\").length)\n        $('<link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\">').appendTo(\"head\")\n      if (!$(\"link[href='https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.72.0/dist/L.Control.Locate.min.css'\"))\n        $('<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.72.0/dist/L.Control.Locate.min.css\">').appendTo(\"head\")\n      wiki.getScript \"https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.72.0/dist/L.Control.Locate.min.js\", ->\n        L.control.locate({\n          position: 'topleft'\n          flyTo: true\n          drawCircle: true\n          drawMarker: false}).addTo(map)\n\n    # add search control\n    if tools?.search\n      if (!$(\"link[href='https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css']\").length)\n        $('<link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css\" />').appendTo(\"head\")  \n      wiki.getScript \"https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js\", ->\n        geocoder = L.Control.geocoder({\n          defaultMarkGeocode: false\n        }).on('markgeocode', (e) ->\n          new L.marker([e.geocode.center.lat,e.geocode.center.lng],{\n            title: e.geocode.name\n          }).addTo(map)\n          boundary.push {\n            lat: e.geocode.center.lat\n            lon: e.geocode.center.lng}\n          if boundary.length > 1\n            bounds = new L.LatLngBounds [ [p.lat, p.lon] for p in boundary ]\n            bounds = bounds.pad(0.3)\n            map.flyToBounds bounds\n          else if boundary.length == 1\n            p = boundary[0]\n            map.flyTo([p.lat, p.lon], item.zoom || 13)\n          item.text +=\"\\n#{e.geocode.center.lat.toFixed 7}, #{e.geocode.center.lng.toFixed 7} #{e.geocode.name}\"\n          update()\n          ).addTo(map)\n\n    #\n    if tools?.freeze\n      freezeControl = L.Control.extend({\n        options: {\n          position: 'topright'\n        }\n\n        onAdd: (map) ->\n          container = L.DomUtil.create('div', 'leaflet-bar leaflet-control')\n          container.innerHTML = \"\"\"\n          <a class=\"leaflet-bar-part leaflet-bar-part-single\" href=\"#\" style=\"outline: currentcolor none medium;\">\n            <span style=\"#{if item.frozen then 'color: #5792FF;' else 'color: blue;'}\">❄︎</span>\n          </a>\n          \"\"\"\n\n          newMarkers = []\n          newMarkerGroup = null\n          \n          container.onclick = (e) ->\n            if e.shiftKey\n              e.preventDefault()\n              e.stopPropagation()\n              if item.frozen\n                delete item.frozen\n                update()\n            else\n              if usePageMarkers\n                pageMarkers = page($item)\n              toFreeze = []\n              if item.frozen\n                toFreeze = Array.from(new Set(item.frozen.concat(lineupMarkers||pageMarkers).map(JSON.stringify))).map(JSON.parse)\n              else\n                toFreeze = lineupMarkers||pageMarkers\n              # only update if there realy is something new to freeze or it has changed...\n              if (item.frozen and (toFreeze.length != item.frozen.length)) or (!item.frozen and toFreeze.length > 0)\n              #(!item.frozen and toFreeze.length > 0) or toFreeze.length != item.frozen.length\n                item.frozen = toFreeze\n                update()\n          \n          # mouse over will show any extra markers that will be added on a re-freeze.\n          container.addEventListener 'mouseenter', (e) ->\n            if usePageMarkers\n              pageMarkers = page($item)\n            if useLineupMarkers\n              lineupMarkers = lineup($item)\n            m = new Set(markers.map(JSON.stringify))\n            l = new Set((lineupMarkers||pageMarkers).map(JSON.stringify))\n            newMarkers = Array.from(new Set(Array.from(l).filter((x) -> !m.has(x)))).map(JSON.parse)\n            if newMarkers.length > 0\n              newMarkerGroup = L.layerGroup().addTo(map)\n              newMarkers.forEach (mark) ->\n                L.marker([mark.lat, mark.lon]).addTo(newMarkerGroup)\n              tmpBoundary = boundary.concat newMarkers\n              bounds = new L.LatLngBounds [ [p.lat, p.lon] for p in tmpBoundary ]\n              bounds = bounds.pad(0.3)\n              map.flyToBounds bounds\n\n          container.addEventListener 'mouseleave', (e) ->\n            if newMarkers.length > 0\n              newMarkerGroup.remove()\n              if boundary.length > 1\n                bounds = new L.LatLngBounds [ [p.lat, p.lon] for p in boundary ]\n                bounds = bounds.pad(0.3)\n                map.flyToBounds bounds\n              else if boundary.length == 1\n                p = boundary[0]\n                map.flyTo([p.lat, p.lon], item.zoom || 13)\n              else\n                map.flyTo(item.latlng || item.latLng || [40.735383, -73.984655], item.zoom || 13)\n          \n          return container\n\n        onRemove: (map) ->\n          # Nothing to do here...\n\n      })\n      map.addControl(new freezeControl())\n\n\n    # stop dragging the map from propagating and dragging the page item.\n    mapDiv = L.DomUtil.get(\"#{mapId}\")\n    L.DomEvent.disableClickPropagation(mapDiv)\n\n    map.doubleClickZoom.disable()\n    map.on 'dblclick', (e) ->\n      if e.originalEvent.shiftKey\n        e.originalEvent.stopPropagation()\n        new L.marker(e.latlng).addTo(map)\n        item.text += \"\\n#{e.latlng.lat.toFixed 7}, #{e.latlng.lng.toFixed 7}\"\n        update()\n\n\n    # select tiles, default to OSM\n    tile = item.tile || \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    tileCredits  = item.tileCredits || '© <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n\n    L.tileLayer(tile, {\n      attribution: tileCredits\n      }).addTo(map)\n\n    # add specialized map overlays\n    for o in overlays||[]\n      L.imageOverlay(o.url, o.bounds, {opacity:0.6, interactive:true}).addTo(map)\n\n    openWeblink = (e) ->\n      return unless link = e.target.options.weblink\n      window.open (link\n        .replace(/\\{LAT}/, e.latlng.lat)\n        .replace(/\\{(LON|LNG)}/, e.latlng.lng))\n\n    showMarkers = (markers) ->\n      return unless markers\n      for p in markers\n        markerLabel  = htmlDecode(wiki.resolveLinks(p.label))\n        mkr = L.marker([p.lat, p.lon], {weblink: p.weblink || weblink})\n          .on( 'dblclick', openWeblink)\n          .bindPopup( markerLabel )\n          .openPopup()\n          .addTo(map);\n        showing.push {leaflet:mkr, marker:p}\n\n    # add markers on the map\n    showMarkers markers\n\n    # center map on markers or item properties\n    if boundary.length > 1\n      bounds = new L.LatLngBounds [ [p.lat, p.lon] for p in boundary ]\n      bounds = bounds.pad(0.3)\n      map.fitBounds bounds\n    else if boundary.length == 1\n      p = boundary[0]\n      map.setView([p.lat, p.lon], item.zoom || 13)\n    else\n      map.setView(item.latlng || item.latLng || [40.735383, -73.984655], item.zoom || 13)\n\n    # announce our capability to produce a region\n\n    $item.addClass 'region-source'\n\n    $item.get(0).regionData = ->\n      region = map.getBounds()\n      return {\n        north: region.getNorth()\n        south: region.getSouth()\n        east: region.getEast()\n        west: region.getWest()\n      }\n\n\nbind = ($item, item) ->\n  $item.on 'dblclick', () ->\n    wiki.textEditor $item, item\n\n\nwindow.plugins.map = {emit, bind} if window?\nmodule.exports = {marker, parse} if module?\n"
  ],
  "mappings": "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"
}