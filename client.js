/*! wiki-client - v0.24.1 - 2022-10-02
 * Copyright 2022 Ward Cunningham and other contributors;
 * Released under the MIT license */
!function r(o,i,a){function u(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return u(o[t][1][e]||e)},n,n.exports,r,o,i,a)}return i[t].exports}for(var s="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){"use strict";console.log("Window Name: "+window.name),window.name=window.location.host,window.wiki=e("./lib/wiki"),e("./lib/legacy"),e("./lib/bind"),e("./lib/plugins")},{"./lib/bind":5,"./lib/legacy":13,"./lib/plugins":23,"./lib/wiki":37}],2:[function(e,t,n){"use strict";var r={create:"☼",add:"+",edit:"✎",fork:"⚑",move:"↕",remove:"✕",copyIn:"⨭",copyOut:"⨵"};t.exports={symbols:r,fork:r.fork,add:r.add}},{}],3:[function(e,t,n){"use strict";var s,c,r;t.exports=s={},s.scrollContainer=void 0,c=function(){var e=$("body, html").filter(function(){return 0<$(this).scrollLeft()});return 0<e.length?e:$("body, html").scrollLeft(12).filter(function(){return 0<$(this).scrollLeft()}).scrollTop(0)},r=function(e){var t,n,r,o,i,a,u;if(null!=e.position())return null==s.scrollContainer&&(s.scrollContainer=c()),t=$("body").width(),r=(o=s.scrollContainer.scrollLeft())+t,a=e.position().left,u=e.outerWidth(!0),n=$(".page").outerWidth(!0)*$(".page").length,a<o?i=a:r<a+u?i=a-(t-u):r>$(".pages").outerWidth()&&(i=Math.min(a,n-t)),s.scrollContainer.animate({scrollLeft:i},function(){if(!$.contains(e[0],document.activeElement))return e.focus()})},s.set=function(e,t){if($(".incremental-search").remove(),e=$(e),$(".active").removeClass("active"),e.addClass("active"),!t)return r(e)}},{}],4:[function(e,t,n){"use strict";var i=e("./util"),a=e("./actionSymbols");t.exports=function(e,t){var n,r=e.parents(".page:first"),o="";if(null!=t.site&&(o+="".concat(t.site,"\n")),o+=t.type||"separator",null!=t.date&&(o+=" ".concat(i.formatElapsedTime(t.date))),null!=(null!=(n=t.attribution)?n.page:void 0)&&(o+="\nfrom ".concat(t.attribution.page)),null!=(null!=(n=t.removedTo)?n.page:void 0)&&(o+="\nto ".concat(t.removedTo.page)),n=$('<a href="#" /> ').addClass("action").addClass(t.type||"separator").text(t.symbol||a.symbols[t.type]).attr("title",o).attr("data-id",t.id||"0").data("action",t),"add"===t.type&&null!=t.attribution&&(n.text(a.symbols.copyIn),null!=t.attribution.site&&n.css("background-image","url(".concat(wiki.site(t.attribution.site).flag(),")"))),"remove"===t.type&&null!=t.removedTo&&n.text(a.symbols.copyOut),0<(o=e.children(".control-buttons")).length?n.insertBefore(o):n.appendTo(e),"fork"===t.type&&null!=t.site)return n.css("background-image","url(".concat(wiki.site(t.site).flag())).attr("href","".concat(wiki.site(t.site).getDirectURL(r.attr("id")),".html")).attr("target","".concat(t.site)).data("site",t.site).data("slug",r.attr("id"))}},{"./actionSymbols":2,"./util":36}],5:[function(e,t,n){"use strict";var r=e("./neighborhood"),o=e("./neighbors"),i=e("./searchbox"),a=e("./state"),u=e("./link");$(function(){return i.inject(r),i.bind(),o.inject(r),o.bind(),window.seedNeighbors&&seedNeighbors.split(",").forEach(function(e){return r.registerNeighbor(e.trim())}),a.inject(u)})},{"./link":16,"./neighborhood":17,"./neighbors":18,"./searchbox":30,"./state":33}],6:[function(e,t,n){"use strict";var r=e("./resolve"),o=null;t.exports={emit:function(){return o=$("<div></div>").html("This dialog will show every time!").dialog({autoOpen:!1,title:"Basic Dialog",height:600,width:800})},open:function(e,t){return o.html(t),o.dialog("option","title",r.resolveLinks(e)),o.dialog("open")}}},{"./resolve":27}],7:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/slicedToArray")),o=[].indexOf,i=e("url"),a=function(e){return null!=(e=e.originalEvent.dataTransfer)&&0<=o.call(e.types,"Files")?e.files[0]:null},u=function(e){return null!=(e=e.originalEvent.dataTransfer)&&null!=e.types&&(0<=o.call(e.types,"text/uri-list")||0<=o.call(e.types,"text/x-moz-url"))&&null!=(e=e.getData("URL"))&&e.length?e:null},s=function(e){var t,n;return(e=e.match(/^https?:\/\/([a-zA-Z0-9:.-]+)(\/([a-zA-Z0-9:.-]+)\/([a-z0-9-]+(_rev\d+)?))+$/))?(t={},(e=(0,r.default)(e,6))[0],n=e[1],e[2],t.site=e[3],t.slug=e[4],e[5],"view"!==(e=t.site)&&"local"!==e&&"origin"!==e||(t.site=n),t):null},c=function(e){return i.parse(e,!0,!0).pathname.match(/\.(jpg|jpeg|png)$/i)?e:null},l=function(e){return i.parse(e,!0,!0).pathname.match(/\.(svg)$/i)?e:null},f=function(e){var t=i.parse(e,!0,!0);try{"video"===t.query.source&&(t=i.parse(t.query.url,!0,!0))}catch(e){0}switch(t.hostname){case"www.youtube.com":return null!=t.query.list?{text:"YOUTUBE PLAYLIST ".concat(t.query.list)}:{text:"YOUTUBE ".concat(t.query.v)};case"youtu.be":return null!=t.query.list?{text:"YOUTUBE PLAYLIST ".concat(t.query.list)}:{text:"YOUTUBE ".concat(t.pathname.substr(1))};case"vimeo.com":return{text:"VIMEO ".concat(t.pathname.substr(1))};case"archive.org":return{text:"ARCHIVE ".concat(t.pathname.substr(t.pathname.lastIndexOf("/")+1))};case"tedxtalks.ted.com":return{text:"TEDX ".concat(t.pathname.substr(t.pathname.lastIndexOf("/")+1))};case"www.ted.com":return{text:"TED ".concat(t.pathname.substr(t.pathname.lastIndexOf("/")+1))};default:return null}};t.exports={dispatch:function(i){return function(t){var e,n,r,o=function(e){return t.preventDefault(),t.stopPropagation()};if(n=u(t)){if((r=s(n))&&null!=(e=i.page))return o(e(r));if((r=f(n))&&null!=(e=i.video))return o(e(r));if((r=c(n))&&null!=(e=i.image))return o(e(r));if((r=l(n))&&null!=(e=i.svg))return o(e(r));r={url:n}}if(n=a(t)){if(null!=(e=i.file))return o(e(n));r={file:n}}if(null!=(e=i.punt))return o(e(r=r||{dt:t.dataTransfer,types:null!=(n=t.dataTransfer)?n.types:void 0}))}}}},{"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/slicedToArray":43,url:60}],8:[function(e,t,n){"use strict";var o=e("./plugin"),f=e("./itemz"),i=e("./pageHandler"),d=e("./link"),a=e("./random"),p=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},h=function(a,u){var s,c,e,t,n,r,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(console.log("textEditor",u.id,l),"markdown"===u.type&&(c=0),$(".editEnable").is(":visible")&&(t=function(e){var t,n,r,o,i;return 27===e.which||(e.ctrlKey||e.metaKey)&&83===e.which?(e.preventDefault(),s.focusout(),!1):(e.ctrlKey||e.metaKey)&&73===e.which?(e.preventDefault(),e.shiftKey||(r=$(e.target).parents(".page")),d.doInternalLink("about ".concat(u.type," plugin"),r),!1):(e.ctrlKey||e.metaKey)&&77===e.which?(e.preventDefault(),a.removeClass(u.type).addClass(u.type="factory"),s.focusout(),!1):"paragraph"===u.type||"markdown"===u.type?(r=v(s),e.which===$.ui.keyCode.BACKSPACE&&0===r.start&&r.start===r.end?(t=a.prev(),(i=f.getItem(t)).type===u.type&&(n=i[l.field||"text"].length,o=s.val(),s.val(""),h(t,i,{caret:n,suffix:o})),!1):e.which===$.ui.keyCode.ENTER?!!r&&("markdown"===u.type&&c++,"paragraph"===u.type||"markdown"===u.type&&2===c?(t=a.parents(".page"),n=(i=s.val()).substring(0,r.start),o=i.substring(r.end),""===n?(s.val(o),s.focusout(),g(t,a.prev(),u.type,n)):(s.val(n),s.focusout(),g(t,a,u.type,o)),!1):void 0):"markdown"===u.type?c=0:void 0):void 0},e=function(){var e;if(a.removeClass("textEditing"),s.unbind(),e=a.parents(".page:first"),u[l.field||"text"]=s.val())if(a.removeClass("output-item"),a.removeClass(function(e,t){return(t.match(/\S+-source/)||[]).join(" ")}),o.do(a.empty(),u),l.after){if(""===u[l.field||"text"])return;i.put(e,{type:"add",id:u.id,item:u,after:l.after})}else{if(u[l.field||"text"]===n)return;i.put(e,{type:"edit",id:u.id,item:u})}else l.after||i.put(e,{type:"remove",id:u.id}),e=$(".item").index(a),a.remove(),o.renderFrom(e);return null},!a.hasClass("textEditing")))return a.addClass("textEditing"),a.unbind(),n=null!=(r=u[l.field||"text"])?r:"",s=$("<textarea>".concat(p(n)).concat(p(null!=(r=l.suffix)?r:""),"</textarea>")).focusout(e).bind("keydown",t),a.html(s),l.caret?m(s,l.caret):l.append?(m(s,s.val().length),s.scrollTop(s[0].scrollHeight-s.height())):s.focus()},g=function(e,t,n,r){n={type:n,id:a.itemId(),text:r},r=$('<div class="item '.concat(n.type,'" data-id=').concat(n.id,"></div>"));return r.data("item",n).data("pageElement",e),t.after(r),e=f.getItem(t),h(r,n,{after:null!=e?e.id:void 0})},v=function(e){var t,e=e.get(0);return document.selection?(e.focus(),(t=document.selection.createRange()).moveStart("character",-e.value.length),{start:t=t.text.length,end:t}):{start:e.selectionStart,end:e.selectionEnd}},m=function(e,t){var n,e=e.get(0);if(null!=e)return e.createTextRange?((n=e.createTextRange()).move("character",t),n.select()):e.setSelectionRange(t,t),e.focus()};t.exports={textEditor:h}},{"./itemz":12,"./link":16,"./pageHandler":20,"./plugin":22,"./random":24}],9:[function(e,t,n){"use strict";var c=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/slicedToArray")),l=e("./neighborhood"),f=e("./plugin"),r=e("./resolve"),d=e("./pageHandler"),p=e("./editor"),h=e("./synopsis"),g=e("./drop"),s=e("./active"),o=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>")},v=function(e,t){var n,r,o,i;for(t=t||",",o=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),n=[[]],r=null;r=o.exec(e);)(i=r[1]).length&&i!==t&&n.push([]),i=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],n[n.length-1].push(i);return n},m=function(e){for(var t,u=e.shift(),n=function(e){for(var t={},n=_.zip(u,e),r=0,o=n.length;r<o;r++){var i=(0,c.default)(n[r],2),a=i[0];null!=(i=i[1])&&i.match(/\S/)&&"NULL"!==i&&(t[a]=i)}return t},r=[],o=0,i=e.length;o<i;o++)t=e[o],r.push(n(t));return r};t.exports={emit:function(a,u){var n;return a.append("<p>Double-Click to Edit<br>Drop Text or Image to Insert</p>"),n=function(){for(var e,t,n=a.find("p").append('<br>Or Choose a Plugin\n<center>\n<table style="text-align:left;">\n<tr><td><ul id=format><td><ul id=data><td><ul id=other>'),r=window.catalog,o=0,i=r.length;o<i;o++)(t=r[o])&&t.category&&("format"!==(e=t.category)&&"data"!==e&&(e="other"),n.find("#"+e).append('<li><a class="menu" href="#" title="'.concat(t.title,'">').concat(t.name,"</a></li>")));return n.find("a.menu").click(function(t){var n=t.target.text,e=n.toLowerCase();if(a.removeClass("factory").addClass(u.type=e),a.unbind(),t.preventDefault(),s.set(a.parents(".page")),!window.catalog.find(function(e){return n===e.name}).editor)return p.textEditor(a,u);try{return window.plugins[e].editor(a,u)}catch(e){return t=e,console.log("".concat(n," Plugin editor failed: ").concat(t,". Falling back to textEditor")),p.textEditor(a,u)}})},u.prompt?function(){return a.append("<p>".concat(r.resolveLinks(u.prompt,o),"</b>"))}():null!=window.catalog?n():wiki.origin.get("system/factories.json",function(e,t){return console.log("factory",t),window.catalog=t,n()})},bind:function(o,i){var a=function(){var e;o.empty().unbind(),o.removeClass("factory").addClass(i.type),e=o.parents(".page:first");try{o.data("pageElement",e),o.data("item",i),f.getPlugin(i.type,function(e){return e.emit(o,i),e.bind(o,i)})}catch(e){o.append("<p class='error'>".concat(e,"</p>"))}return d.put(e,{type:"edit",id:i.id,item:i})},u=function(e){return i.prompt="Unexpected Item\nWe can't make sense of the drop.\nTry something else or see [[About Factory Plugin]].",e.userAgent=navigator.userAgent,i.punt=e,a()},e=function(n){return wiki.site(n.site).get("".concat(n.slug,".json"),function(e,t){if(!e&&(i.type="reference",i.site=n.site,i.slug=n.slug,i.title=t.title||n.slug,i.text=h(t),a(),null!=i.site))return l.registerNeighbor(i.site)})},t=function(e){return i.type="video",i.text="".concat(e.text,"\n(double-click to edit caption)\n"),a()},n=function(r){return document.documentElement.style.cursor="wait",fetch(r).then(function(e){if(e.ok)return e.blob();throw new Error("Unable to fetch image")}).then(function(e){var t=r.split("/").pop().split("#")[0].split("?")[0],n=new FileReader;return n.readAsDataURL(e),n.onload=function(e){e=e.target.result;return window.plugins.image.editor({imageDataURL:e,filename:t,imageSourceURL:r,imageCaption:"Remote image [".concat(r," source]"),$item:o,item:i})}})},r=function(t){return document.documentElement.style.cursor="wait",fetch(t).then(function(e){if(e.ok)return e;throw new Error("Unable to fetch svg")}).then(function(e){return e.text()}).then(function(e){return document.documentElement.style.cursor="default",i.type="html",i.source=t,i.text=e+"<p>[".concat(t," Source]</p>"),a()})},s=function(n){var e,r,t;if(null!=n)return t=n.type.split("/"),e=(t=(0,c.default)(t,2))[0],r=t[1],t=new FileReader,"image"===e?r.startsWith("svg")?(t.onload=function(e){e=e.target.result;return i.type="html",i.text=e,a()},t.readAsText(n)):(t.onload=function(e){return console.log("upload file",n),e=e.target.result,window.plugins.image.editor({imageDataURL:e,filename:n.name,imageCaption:"Uploaded image",$item:o,item:i})},t.readAsDataURL(n)):"text"===e?(t.onload=function(e){var t,e=e.target.result;return"csv"===r?(i.type="data",i.columns=(t=v(e))[0],i.data=m(t),i.text=n.fileName):(i.type="paragraph",i.text=e),a()},t.readAsText(n)):u({name:n.name,type:n.type,size:n.size,fileName:n.fileName,lastModified:n.lastModified})};return o.dblclick(function(e){if($(".editEnable").is(":visible"))return e.shiftKey?p.textEditor(o,i,{field:"prompt"}):(o.removeClass("factory").addClass(i.type="paragraph"),o.unbind(),p.textEditor(o,i))}),o.bind("dragenter",function(e){return e.preventDefault()}),o.bind("dragover",function(e){return e.preventDefault()}),o.bind("drop",g.dispatch({page:e,file:s,video:t,image:n,svg:r,punt:u}))}}},{"./active":3,"./drop":7,"./editor":8,"./neighborhood":17,"./pageHandler":20,"./plugin":22,"./resolve":27,"./synopsis":34,"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/slicedToArray":43}],10:[function(e,t,n){"use strict";var u=e("./resolve"),s=e("./neighborhood"),i=e("./lineup"),a=e("./refresh");t.exports={emit:function(e,t){var n,r,o,i,a;if(e.append("".concat(t.text,'<br><br><button class="create">create</button> new blank page')),(a=null!=(a=t.create)&&null!=(a=a.source)?a.transport:void 0)&&(e.append('<br><button class="transport" data-slug='.concat(t.slug,">create</button> transport from ").concat(a)),e.append("<p class=caption> unavailable</p>"),$.get("//localhost:4020",function(){return e.find(".caption").text("ready")})),null!=(a=s.sites[location.host])&&null!=a.sitemap){for(i=[],n=0,r=(o=a.sitemap).length;n<r;n++)(t=o[n]).slug.match(/-template$/)?i.push(e.append('<br><button class="create" data-slug='.concat(t.slug,">create</button> from ").concat(u.resolveLinks("[[".concat(t.title,"]]"))))):i.push(void 0);return i}},bind:function(o,n){return o.find("button.transport").click(function(e){var t;return o.find(".caption").text("waiting"),t={title:o.parents(".page").data("data").title,create:n.create},t={type:"POST",url:n.create.source.transport,dataType:"json",contentType:"application/json",data:JSON.stringify(t)},$.ajax(t).done(function(e){var t,n,r;return o.find(".caption").text("ready"),r=wiki.newPage(e),t=o.parents(".page"),(n=i.atKey(t.data("key"))).become(r,r),e=n.getRawPage(),a.rebuildPage(n,t.empty())})})}}},{"./lineup":15,"./neighborhood":17,"./refresh":26,"./resolve":27}],11:[function(e,t,n){"use strict";var a=e("./util"),o=e("./link"),i=e("./page").newPage,u=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};t.exports={emit:function(e,t){return e.append('<p style="background-color:#eee;padding:15px;">\n  '.concat(function(e){var t,n,r,o,i=[];for(o in e)r=e[o],n="<a href=".concat(o,">").concat(u(r.title)||o,"</a>"),r.journal&&((t=r.journal[r.journal.length-1].date)?n+=" &nbsp; from ".concat(a.formatElapsedTime(t)):n+=" &nbsp; from revision ".concat(r.journal.length-1)),i.push(n);return i.join("<br>")}(t.pages),"\n</p>"))},bind:function(e,r){return e.find("a").click(function(e){var t,n=$(e.target).attr("href");return e.shiftKey||(t=$(e.target).parents(".page")),e=i(r.pages[n]),o.showResult(e,{$page:t,rev:e.getRevision()}),!1})}}},{"./link":16,"./page":19,"./util":36}],12:[function(e,t,n){"use strict";var i=e("./pageHandler"),a=e("./plugin"),u=e("./random"),s=function(e,t){return setTimeout(t,e)},c=function(e){if(0<$(e).length)return $(e).data("item")||$(e).data("staticItem")};t.exports={createItem:function(e,t,n){var r,o;return null==e&&(e=t.parents(".page")),n.id=u.itemId(),(r=$('<div class="item '.concat(n.type,'" data-id=""</div>'))).data("item",n).data("pageElement",e),null!=t?t.after(r):e.find(".story").append(r),a.do(r,n),o=c(t),s(500,function(){return i.put(e,{item:n,id:n.id,type:"add",after:null!=o?o.id:void 0})}),r},removeItem:function(e,t){return i.put(e.parents(".page:first"),{type:"remove",id:t.id}),e.remove()},getItem:c,replaceItem:function(t,e,n){var r=$.extend({},n);t.empty().unbind(),t.removeClass(e).addClass(r.type),e=t.parents(".page:first");try{t.data("pageElement",e),t.data("item",r),a.getPlugin(n.type,function(e){return e.emit(t,r),e.bind(t,r)})}catch(e){t.append("<p class='error'>".concat(e,"</p>"))}return i.put(e,{type:"edit",id:r.id,item:r})}}},{"./pageHandler":20,"./plugin":22,"./random":24}],13:[function(e,t,n){"use strict";var f=e("./pageHandler"),d=e("./state"),s=e("./active"),p=e("./refresh"),h=e("./lineup"),r=e("./drop"),o=e("./dialog"),g=e("./link"),v=e("./target"),m=e("./license"),y=e("./plugin"),b=e("./page").asSlug,w=e("./page").newPage,i=function(e){return e.filter(function(e){return e.editor}).forEach(function(t){return console.log("".concat(t.name," Plugin declares an editor, so pre-loading the plugin")),wiki.getPlugin(t.name.toLowerCase(),function(e){if(!e.editor||"function"!=typeof e.editor)return console.log("".concat(t.name,' Plugin ERROR.\nCannot find `editor` function in plugin. Set `"editor": false` in factory.json or\nCorrect the plugin to include all three of `{emit, bind, editor}`'))})})};wiki.origin.get("system/factories.json",function(e,t){return window.catalog=t,i(t)}),$(function(){var i,c,a,l,e,u,t;return o.emit(),$(document).keydown(function(e){var t,n=function(){switch(e.which){case 37:return-1;case 39:return 1}}();if(n&&!$(e.target).is(":input")&&0<=(n=(t=$(".page")).index($(".active"))+n)&&n<t.length&&s.set(t.eq(n)),(e.ctrlKey||e.metaKey)&&83===e.which)return e.preventDefault(),$("input.search").focus()}),$(window).on("popstate",d.show),$(document).ajaxError(function(e,t,n){if(0!==t.status&&404!==t.status)return console.log("ajax error",e,t,n)}),i=function(e){return"".concat(e).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},t=function(o){var e;if("application/json"===(null!=o?o.type:void 0))return(e=new FileReader).onload=function(e){var t,n,e=e.target.result,e=JSON.parse(e),r=w();return r.setTitle("Import from ".concat(o.name)),null!=e.title&&null!=e.story&&null!=e.journal?(n=b(e.title),t=e,(e={})[n]=t,r.addParagraph("Import of one page\n(".concat(i(o.size)," bytes)\nfrom a page-json file dated ").concat(o.lastModifiedDate,"."))):r.addParagraph("Import of ".concat(Object.keys(e).length," pages\n(").concat(i(o.size)," bytes)\nfrom an export file dated ").concat(o.lastModifiedDate,".")),r.addItem({type:"importer",pages:e}),g.showResult(r)},e.readAsText(o)},c=function(t,n){return console.log("fork to delete"),f.delete(t,n,function(e){if(null==e)return console.log("server delete successful"),t.isRecycler()||(e=p.newFuturePage(t.getTitle(),t.getCreate()),t.become(e),n.attr("id",e.getSlug()),p.rebuildPage(t,n)),n.addClass("ghost")})},e=function(e,n){return e?(console.log("getTemplate",e),f.get({whenGotten:function(e,t){return n(e)},whenNotGotten:function(){return n(null)},pageInformation:{slug:e}})):n(null)},a=function(e,t){var n;return e.preventDefault(),e.shiftKey||(n=$(e.target).parents(".page")),g.doInternalLink(t,n,$(e.target).data("site")),!1},u=null,$(".main").sortable({handle:".page-handle",cursor:"grabbing"}).on("sortstart",function(e,t){if(t.item.hasClass("page"))return s.set(t.item,!0),u=$(".page").index(t.item[0])}).on("sort",function(e,t){if(t.item.hasClass("page"))return t=t.item,e.pageY<0&&2<$(".page").length?t.addClass("pending-remove"):t.removeClass("pending-remove")}).on("sortstop",function(e,t){var n,r,o;if(t.item.hasClass("page")){if(t=t.item,o=(n=$(".page")).index($(".active")),r=$(".item").index(t.find(".item")[0]),t.hasClass("pending-remove")){if(1===n.length)return;h.removeKey(t.data("key")),t.remove(),s.set($(".page")[o])}else h.changePageIndex(t.data("key"),o),s.set($(".active")),u<o&&(o=u,r=$(".item").index($($(".page")[o]).find(".item")[0]));return y.renderFrom(r),d.setUrl(),d.debugStates()}}).delegate(".show-page-license","click",function(e){var t;return e.preventDefault(),t=(e=$(this).parents(".page")).find("h1").text().trim(),o.open("License for ".concat(t),m.info(e))}).delegate(".show-page-source","click",function(e){return e.preventDefault(),e=$(this).parents(".page"),e=h.atKey(e.data("key")).getRawPage(),o.open("JSON for ".concat(e.title),$("<pre/>").text(JSON.stringify(e,null,2)))}).delegate(".page","click",function(e){if(!$(e.target).is("a"))return s.set(this)}).delegate(".internal","click",function(e){var t=$(e.target),t=t.text()||t.data("pageName");return t="".concat(t),f.context=$(e.target).attr("title").split(" => "),a(e,t)}).delegate("img.remote","click",function(e){var t;return $(e.target).attr("src").startsWith("data:image/png")?(e.preventDefault(),t=$(e.target).data("site"),wiki.site(t).refresh(function(){})):(t=$(e.target).data("slug"),f.context=[$(e.target).data("site")],a(e,t))}).delegate(".revision","dblclick",function(e){var t,n;return e.preventDefault(),e=$(this).parents(".page"),n=(e=h.atKey(e.data("key")).getRawPage()).journal.length-1,e=e.journal[n],t=JSON.stringify(e,null,2),o.open("Revision ".concat(n,", ").concat(e.type," action"),$("<pre/>").text(t))}).delegate(".action","click",function(e){var t,n,r,o;return e.preventDefault(),(r=$(e.target)).is(".fork")&&null!=(n=r.data("slug"))?(f.context=[r.data("site")],a(e,n.split("_")[0])):(t=(n=$(this).parents(".page")).data("key"),o=h.atKey(t).getSlug(),(r=$(this).parent().children().not(".separator").index(r))<0?void 0:(e.shiftKey||n.nextAll().remove(),e.shiftKey||h.removeAllAfterKey(t),g.createPage("".concat(o,"_rev").concat(r),n.data("site")).appendTo($(".main")).each(function(e,t){return p.cycle($(t))}),s.set($(".page").last())))}).delegate(".fork-page","click",function(e){var t,n,r,o,i,a,u,s=$(e.target).parents(".page");if(!s.find(".future").length){if(e=h.atKey(s.data("key")),s.attr("id").match(/_rev0$/))return c(e,s);if(t={type:"fork"},s.hasClass("local")){if(f.useLocalStorage())return;s.removeClass("local")}else e.isRecycler()?s.removeClass("recycler"):e.isRemote()&&(t.site=e.getRemoteSite());for(null!=s.data("rev")&&s.find(".revision").remove(),s.removeClass("ghost"),s.attr("id",s.attr("id").replace(/_rev\d+$/,"")),d.setUrl(),n=r=0,o=(a=$(".page")).length;r<o;n=++r)i=a[n],$(i).data("key")===s.data("key")||$(i).attr("id")!==s.attr("id")||null!=(u=$(i).data("site"))&&"view"!==u&&"origin"!==u&&"local"!==u&&"recycler"!==u&&u!==location.host||$(i).addClass("ghost");return f.put(s,t)}}).delegate("button.create","click",function(r){return e($(r.target).data("slug"),function(e){var t,n=$(r.target).parents(".page:first");return n.removeClass("ghost"),(t=h.atKey(n.data("key"))).become(e),e=t.getRawPage(),p.rebuildPage(t,n.empty()),f.put(n,{type:"create",id:e.id,item:{title:e.title,story:e.story}})})}).delegate(".score","mouseenter mouseleave",function(e){return console.log("in .score..."),$(".main").trigger("thumb",$(e.target).data("thumb"))}).delegate("a.search","click",function(e){var o,t=$(e.target).parents(".page"),n=t.data("key"),i=h.atKey(n),r=w();return r.setTitle("Search from '".concat(i.getTitle(),"'")),r.addParagraph("Search for pages related to '".concat(i.getTitle(),"'.\nEach search on this page will find pages related in a different way.\nChoose the search of interest. Be patient.")),r.addParagraph("Find pages with links to this title."),r.addItem({type:"search",text:"SEARCH LINKS ".concat(i.getSlug())}),r.addParagraph("Find pages with titles similar to this title."),r.addItem({type:"search",text:"SEARCH SLUGS ".concat(i.getSlug())}),r.addParagraph("Find pages neighboring  this site."),r.addItem({type:"search",text:"SEARCH SITES ".concat(i.getRemoteSite(location.host))}),r.addParagraph("Find pages sharing any of these items."),r.addItem({type:"search",text:"SEARCH ANY ITEMS ".concat(function(){for(var e=i.getRawPage().story,t=[],n=0,r=e.length;n<r;n++)o=e[n],t.push(o.id);return t}().join(" "))}),e.shiftKey||t.nextAll().remove(),e.shiftKey||h.removeAllAfterKey(n),g.showResult(r)}).bind("dragenter",function(e){return e.preventDefault()}).bind("dragover",function(e){return e.preventDefault()}).bind("drop",r.dispatch({page:function(e){return g.doInternalLink(e.slug,null,e.site)},file:t})),$(".provider input").click(function(){return $("footer input:first").val($(this).attr("data-provider")),$("footer form").submit()}),$("body").on("new-neighbor-done",function(e,t){return $(".page").each(function(e,t){return p.emitTwins($(t))})}),l=function(o){return new Promise(function(n,e){var r=b(o);return wiki.origin.get("".concat(r,".json"),function(e,t){return n({title:o,slug:r,type:"reference",text:(e?e.msg:null!=t?t.story[0].text:void 0)||""})})})},$("<span>&nbsp; ☰ </span>").css({cursor:"pointer"}).appendTo("footer").click(function(){var e,t,n,r,o,i,a,u,s,c=w();if(c.setTitle("Selected Plugin Pages"),c.addParagraph("Installed plugins offer these utility pages:"),window.catalog){for(s=[],t=0,r=(i=window.catalog).length;t<r;t++)if((e=i[t]).pages)for(n=0,o=(a=e.pages).length;n<o;n++)u=a[n],s.push(u);return Promise.all(s.map(l)).then(function(e){return e.forEach(function(e){return c.addItem(e)}),g.showResult(c)})}}),$("<span>&nbsp; wiki <span class=editEnable>✔︎</span> &nbsp; </span>").css({cursor:"pointer"}).appendTo("footer").click(function(){return $(".editEnable").toggle(),$(".page").each(function(){var e=$(this),t=h.atKey(e.data("key"));return p.rebuildPage(t,e.empty())})}),isAuthenticated||$(".editEnable").toggle(),v.bind(),$(function(){var e,n;return d.first(),e=$(".page").toArray(),(n=function(e){var t;if(0!==e.length)return t=$(e.shift()),p.cycle(t).then(function(){return n(e)});s.set($(".page").last())})(e)})})},{"./active":3,"./dialog":6,"./drop":7,"./license":14,"./lineup":15,"./link":16,"./page":19,"./pageHandler":20,"./plugin":22,"./refresh":26,"./state":33,"./target":35}],14:[function(e,t,n){"use strict";var r=e("./resolve"),o=e("./lineup"),i=function(){return'<p>\n  <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">\n  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>\n</p><p>\n  This work is licensed under a\n  <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">\n    Creative Commons Attribution-ShareAlike 4.0 International License\n  </a>.\n</p><p>\n  This license applies uniformly to all contributions\n  by all authors. Where authors quote other sources\n  they do so within the terms of fair use or other\n  compatiable terms.\n</p>'},a=function(e,t){var n,r,o,i,a,u,s;if(null==e.journal)return"";for(n={},i=[],o=(a=e.journal.slice(r=0).reverse()).length;r<o;r++)null!=(u=a[r]).site&&(t=u.site),null!=(null!=(s=u.attribution)?s.site:void 0)&&(t=u.attribution.site),"fork"!==u.type&&null==n[t]&&(s=wiki.site(t).getDirectURL(""),u=wiki.site(t).flag(),i.push('<a href="'.concat(s,'" target="_blank"><img class="remote" title="').concat(t,'" src="').concat(u,'"> ').concat(t,"</a>")),n[t]=!0);return 0<i.length?"<p>\n  Author's Sites:\n</p><p>\n  ".concat(i.join("<br>"),"\n</p>"):""},u=function(e){return null==(null!=e?e.provenance:void 0)?"":"<p>\n  Created From:\n</p><p>\n  ".concat(r.resolveLinks(e.provenance),"\n</p>")};t.exports={info:function(e){var e=o.atKey(e.data("key")),t=e.getRawPage(),e=e.getRemoteSite(location.hostname);return i()+a(t,e)+u(t.journal[0])}}},{"./lineup":15,"./resolve":27}],15:[function(e,t,n){"use strict";var r=[].indexOf,o=e("./random"),i={},a=[],u=function(e){return i[e]},s=function(e){return u(e).getTitle()},c=function(e){e=a.indexOf(e);return e<1?null:a[e-1]};t.exports={addPage:function(e){var t=o.randomBytes(4);return i[t]=e,a.push(t),t},changePageIndex:function(e,t){var n=a.indexOf(e);return a.splice(n,1),a.splice(t,0,e)},removeKey:function(t){return r.call(a,t)<0?null:(a=a.filter(function(e){return t!==e}),delete i[t],t)},removeAllAfterKey:function(e){var t,n=[];if(!(r.call(a,e)<0))for(;a[a.length-1]!==e;)t=a.pop(),n.unshift(t),delete i[t];return n},atKey:u,titleAtKey:s,bestTitle:function(){return a.length?s(a[a.length-1]):"Wiki"},debugKeys:function(){return a},debugReset:function(){return i={},a=[]},crumbs:function(e,t){var n=i[e],r=n.getRemoteSite(t),o=["view",n=n.getSlug()];return"welcome-visitors"!==n&&o.unshift("view","welcome-visitors"),r===t||null==(n=c(e))||(e=i[n]).isRemote()||o.push(t,e.getSlug()),o.unshift(r),o},debugSelfCheck:function(e){if("".concat(a)!=="".concat(e)&&(console.log("The lineup is out of sync with the dom."),console.log(".pages:",e),console.log("lineup:",a),"".concat(Object.keys(a).sort())==="".concat(Object.keys(e).sort())))return console.log("It looks like an ordering problem we can fix."),e}}},{"./random":24}],16:[function(e,t,n){"use strict";var o=e("./lineup"),i=e("./active"),r=e("./refresh"),e=e("./page"),a=e.asTitle,u=e.asSlug,e=e.pageEmitter,s=function(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return t&&"view"!==t&&(n=t),r=r||a(e),t=$('<div class="page" id="'.concat(e,'" tabindex="-1">\n  <div class="paper">\n    <div class="twins"> <p> </p> </div>\n    <div class="header">\n      <h1> <img class="favicon" src="').concat(wiki.site(n).flag(),'" height="32px"> ').concat(r," </h1>\n    </div>\n  </div>\n</div>")),n&&t.data("site",n),t},c=function(e,t){return s(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null).appendTo(".main").each(function(e,t){return r.cycle($(t))})},l=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=u(e);return null!=t&&$(t).nextAll().remove(),null!=t&&o.removeAllAfterKey($(t).data("key")),c(r,n,e),i.set($(".page").last())},f=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return null!=n.$page&&$(n.$page).nextAll().remove(),null!=n.$page&&o.removeAllAfterKey($(n.$page).data("key")),t=e.getSlug(),null!=n.rev&&(t+="_rev".concat(n.rev)),(n=s(t).addClass("ghost")).appendTo($(".main")),r.buildPage(e,n),i.set($(".page").last())};e.on("show",function(e){return console.log("pageEmitter handling",e),f(e)}),t.exports={createPage:s,doInternalLink:l,showPage:c,showResult:f}},{"./active":3,"./lineup":15,"./page":19,"./refresh":26}],17:[function(e,t,n){"use strict";var i,g,a,r,v={}.hasOwnProperty,o=e("underscore"),m=e("minisearch");t.exports=g={},g.sites={},a=0,r=function(n,r){var e,t,o;if(!r.sitemapRequestInflight)return r.sitemapRequestInflight=!0,o=function(e,t,n){return $('.neighbor[data-site="'.concat(e,'"]')).find("div").removeClass(t).addClass(n)},e=function(){return o(n,"wait","fetch"),wiki.site(n).get("system/sitemap.json",function(e,t){return r.sitemapRequestInflight=!1,e?(o(n,"fetch","fail"),wiki.site(n).refresh(function(){})):(r.sitemap=t,o(n,"fetch","done"),$("body").trigger("new-neighbor-done",n))}),wiki.site(n).getIndex("system/site-index.json",function(e,t){if(e)return console.log("error loading index",n,e);try{return r.siteIndex=m.loadJSON(t,{fields:["title","content"]}),console.log(n,"index loaded")}catch(e){return console.log("error loading index - not a valid index",n)}})},t=Date.now(),a<t?(a=t+500,setTimeout(e,100)):(setTimeout(e,a-t),a+=500)},g.retryNeighbor=function(e){var t;return console.log("retrying neighbor"),g.sites[e]=t={},r(e,t)},g.registerNeighbor=function(e){var t;if(null==g.sites[e])return g.sites[e]=t={},r(e,t),$("body").trigger("new-neighbor",e)},g.updateSitemap=function(e){var t,n,r,o,i,a=location.host;if((n=g.sites[a])&&!n.sitemapRequestInflight)return r=e.getSlug(),t=e.getDate(),i=e.getTitle(),o=e.getSynopsis(),e=e.getLinks(),t={slug:r,date:t,title:i,synopsis:o,links:e},0<=(o=(i=n.sitemap).findIndex(function(e){return e.slug===r}))?i[o]=t:i.push(t),$("body").trigger("new-neighbor-done",a)},g.deleteFromSitemap=function(e){var t,n,r,o,i=location.host;if((n=g.sites[i])&&!n.sitemapRequestInflight&&(o=e.getSlug(),0<=(t=(r=n.sitemap).findIndex(function(e){return e.slug===o}))))return r.splice(t),$("body").trigger("delete-neighbor-done",i)},g.listNeighbors=function(){return o.keys(g.sites)},i=function(e,t){var n,r,o,i,a;try{if(null!=t.text)switch(t.type){case"paragraph":e+=" "+t.text.replace(/\[{2}|\[(?:[\S]+)|\]{1,2}/g,"");break;case"markdown":e+=" "+t.text.replace(/\[{2}|\[(?:[\S]+)|\]{1,2}|\\n/g," ");break;case"html":e+=" "+t.text.replace(/<[^>]*>/g,"");break;default:if(null!=t.text)for(a=t.text.split(/\r\n?|\n/),r=0,o=a.length;r<o;r++)(i=a[r]).match(/^[A-Z]+[ ].*/)||(e+=" "+i.replace(/\[{2}|\[(?:[\S]+)|\]{1,2}/g,""))}}catch(e){throw n=e,new Error("Error extracting text from ".concat(currentIndex,", ").concat(n))}return e},g.updateIndex=function(e,t){var n,r,o;if(console.log("updating ".concat(e.getSlug()," in index")),n=location.host,n=g.sites[n]){t=t.reduce(i,""),r=e.getSlug(),o=e.getTitle(),e=e.getRawPage().story.reduce(i,"");try{n.siteIndex.remove({id:r,title:o,content:t})}catch(e){(t=e).message.includes("not in the index")||console.log("removing ".concat(r," from index failed"),t)}return n.siteIndex.add({id:r,title:o,content:e})}},g.deleteFromIndex=function(e){var t,n,r=location.host;if(r=g.sites[r]){t=e.getSlug(),n=e.getTitle(),e=e.getRawPage().story.reduce(i,"");try{return r.siteIndex.remove({id:t,title:n,content:e})}catch(e){if(!(r=e).message.includes("not in the index"))return console.log("removing ".concat(t," from index failed"),r)}}},g.search=function(t){var e,n,o,r,i,a,u,s,c=[],l={},f=function(e){return null!=l[e]?l[e]++:l[e]=1},d=function(e,t){var n,r="indexing sitemap ( ".concat(e," )");return console.time(r),console.log("indexing sitemap:",e),n=new m({fields:["title","content"]}),o.sitemap.forEach(function(e){n.add({id:e.slug,title:e.title,content:e.synopsis})}),console.timeEnd(r),n},p=Date.now(),h=g.sites;for(r in h)v.call(h,r)&&(o=h[r]).sitemap&&null==o.siteIndex&&(o.siteIndex=d(r));for(r in i=location.host,a=g.sites)if(v.call(a,r)&&(o=a[r]).siteIndex){f("sites");try{null!=l.pages?l.pages+=o.sitemap.length:l.pages=o.sitemap.length}catch(e){n=e,console.info("+++ sitemap not valid for ",r),o.sitemap=[]}e=r===i?(s=20,2):(s=10,1);try{u=o.siteIndex.search(t,{boost:{title:s,content:e},prefix:!0,combineWith:"AND"})}catch(e){n=e,console.error("search index error",r,t,n),u=[]}u.forEach(function(t){return f("finds"),c.push({page:o.sitemap.find(function(e){return e.slug===t.id}),site:r,rank:t.score})})}return c.sort(function(e,t){return t.rank-e.rank}),l.msec=Date.now()-p,{finds:c,tally:l}},g.backLinks=function(n){var e,r,t,o=[],i=g.sites;for(r in i)v.call(i,r)&&(e=i[r]).sitemap&&e.sitemap.forEach(function(e,t){if(null!=e.links&&0<Object.keys(e.links).length&&Object.keys(e.links).includes(n))return o.push({slug:e.slug,title:e.title,site:r,itemId:e.links[n],date:e.date})});return t={},o.forEach(function(e){return n=e.slug,t[n]=t[n]||{},t[n].title=e.title,t[n].sites=t[n].sites||[],t[n].sites.push({site:e.site,date:e.date,itemId:e.itemId})}),t}},{minisearch:63,underscore:64}],18:[function(e,t,n){"use strict";var i,r=e("./link"),o=e("./wiki"),a=e("./neighborhood"),u=null,s=function(e){return e.hasOwnProperty("links")},c=function(e){return console.log("neighbor - flag"),'<span class="neighbor" data-site="'.concat(e,'">\n  <div class="wait">\n    <img src="').concat(o.site(e).flag(),'" title="').concat(e,'">\n  </div>\n</span>')};t.exports={inject:function(e){return u=e.sites},bind:function(){var n=$(".neighborhood");return $("body").on("new-neighbor",function(e,t){return n.append(c(t))}).on("new-neighbor-done",function(e,t){var r,n,o;try{o=u[t].sitemap.length}catch(e){r=e,o=0}n=$('.neighborhood .neighbor[data-site="'.concat(t,'"]')).find("img");try{u[t].sitemap.some(s)?n.attr("title","".concat(t,"\n ").concat(o," pages with 2-way links")):n.attr("title","".concat(t,"\n ").concat(o," pages"))}catch(e){r=e,console.info("+++ sitemap not valid for ",t),u[t].sitemap=[]}return i=Object.values(a.sites).reduce(function(t,n){try{return n.sitemapRequestInflight?t:t+n.sitemap.length}catch(e){return r=e,console.log("failed in new neighbour done",n,r),t}},0),$(".searchbox .pages").text("".concat(i," pages"))}).delegate(".neighbor img","click",function(e){var t;return $(e.target).parent().hasClass("fail")?($(e.target).parent().removeClass("fail").addClass("wait"),t=$(e.target).attr("title"),o.site(t).refresh(function(){return console.log("about to retry neighbor"),a.retryNeighbor(t)})):r.doInternalLink("welcome-visitors",null,this.title.split("\n")[0])})}}},{"./link":16,"./neighborhood":17,"./wiki":37}],19:[function(e,t,n){"use strict";var u=e("./util").formatDate,s=e("./random"),c=e("./revision"),p=e("./synopsis"),h=e("underscore"),e=new(e("events").EventEmitter),g=function(e){return e.replace(/\s/g,"-").replace(/[^A-Za-z0-9-]/g,"").toLowerCase()},v=function(e){return[{symbol:"❄",date:e-316224e5,period:"a Year"},{symbol:"⚘",date:e-80352e5,period:"a Season"},{symbol:"⚪",date:e-26784e5,period:"a Month"},{symbol:"☽",date:e-6048e5,period:"a Week"},{symbol:"☀",date:e-864e5,period:"a Day"},{symbol:"⌚",date:e-36e5,period:"an Hour"}]},m=function(e,l){var t,n,r,o,i,f,a,d=e||{};return d.title||(d.title="empty"),d.story||(d.story=[]),d.journal||(d.journal=[]),a=function(e,t){for(var n,r=0,o=e.length;r<o;r++)if((n=e[r]).id===t.id&&n.date===t.date)return!1;return!0},{getRawPage:function(){return d},getContext:function(){var e,t,n,r,o,i=["view"];for(f()&&i.push(l),t=function(e){if(null!=e&&!h.include(i,e))return i.push(e)},r=(o=d.journal.slice(n=0).reverse()).length;n<r;n++)t(null!=(e=o[n])?e.site:void 0);return i},isPlugin:i=function(){return null!=d.plugin},isRemote:f=function(){return!(null==l||"view"===l||"origin"===l||"local"===l||"recycler"===l)},isLocal:function(){return"local"===l},isRecycler:function(){return"recycler"===l},getRemoteSite:n=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return f()?l:e},getRemoteSiteDetails:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=[];return(e||f())&&t.push(n(e)),i()&&t.push("".concat(d.plugin," plugin")),t.join("\n")},getSlug:o=function(){return g(d.title)},getNeighbors:function(e){var t,n,r,o,i,a,u,s,c=[];for(f()?c.push(l):null!=e&&c.push(e),r=0,i=(u=d.story).length;r<i;r++)null!=(null!=(n=u[r])?n.site:void 0)&&c.push(n.site);for(o=0,a=(s=d.journal).length;o<a;o++)null!=(null!=(t=s[o])?t.site:void 0)&&c.push(t.site);return h.uniq(c)},getTitle:function(){return d.title},getLinks:function(){var e,t=function(e,t,n,r){var o,i,a;try{for(i=/\[\[([^\]]+)\]\]/g,0;null!==(a=i.exec(t.text));)e.has(g(a[1]))||e.set(g(a[1]),t.id);"reference"!==t.type||e.has(t.slug)||e.set(t.slug,t.id)}catch(e){o=e,console.log("*** Error extracting links from ".concat(n," of ").concat(JSON.stringify(r)),o.message)}return e};try{e=d.story.reduce(t,new Map)}catch(e){t=e,console.log("+++ Extract links on ".concat(d.slug," fails"),t)}return 0<e.size?Object.fromEntries(e):{}},setTitle:function(e){return d.title=e},getRevision:r=function(){return d.journal.length-1},getDate:function(){var e=d.journal[r()];if(null!=e&&null!=e.date)return e.date},getTimestamp:function(){var e=d.journal[r()];return null!=e?null!=e.date?u(e.date):"Revision ".concat(r()):"Unrecorded Date"},getSynopsis:function(){return p(d)},addItem:t=function(e){return e=h.extend({},{id:s.itemId()},e),d.story.push(e)},getItem:function(e){for(var t,n=d.story,r=0,o=n.length;r<o;r++)if((t=n[r]).id===e)return t;return null},addParagraph:function(e){return t({type:"paragraph",text:e})},seqItems:function(r){return new Promise(function(t,e){var n=function(e){return e>=d.story.length?t():r(d.story[e]||{text:"null"},function(){return n(e+1)})};return n(0)})},seqActions:function(u){var s=0,c=v((new Date).getTime()),l=function(e){var t,n,r,o,i,a;if(!(e>=d.journal.length)){for(n=(t=d.journal[e]||{}).date||0,a=null,r=0,o=c.length;r<o;r++)(i=c[r]).date>s&&i.date<n&&(a=i);return s=n,u({action:t,separator:a},function(){return l(e+1)})}};return l(0)},become:function(e,t){if(d.story=(null!=e?e.getRawPage().story:void 0)||[],null!=t)return d.journal=null!=t?t.getRawPage().journal:void 0},siteLineup:function(){var e=o(),e="welcome-visitors"===e?"view/welcome-visitors":"view/welcome-visitors/view/".concat(e);return f()?wiki.site(l).getDirectURL(e):"/".concat(e)},merge:function(e){for(var o,t=function(){for(var e=d.journal,t=[],n=0,r=e.length;n<r;n++)o=e[n],t.push(o);return t}(),n=e.getRawPage().journal,r=0,i=n.length;r<i;r++)o=n[r],a(d.journal,o)&&t.push(o);return t.push({type:"fork",site:e.getRemoteSite(),date:(new Date).getTime()}),m(c.create(999,{title:d.title,journal:t}),l)},apply:function(e){if(c.apply(d,e),e.site)return l=null},getCreate:function(){var e=function(e){return"create"===e.type};return d.journal.reverse().find(e)}}};t.exports={newPage:m,asSlug:g,asTitle:function(e){return e.replace(/-/g," ")},pageEmitter:e}},{"./random":24,"./revision":28,"./synopsis":34,"./util":36,events:53,underscore:64}],20:[function(e,t,n){"use strict";var s,i,o,c,a,l,u=e("underscore"),f=e("./state"),d=e("./revision"),p=e("./addToJournal"),h=e("./page").newPage,g=(e("./random"),e("./lineup")),v=e("./neighborhood");t.exports=o={},s=function(e){return JSON.parse(JSON.stringify(e))},o.useLocalStorage=function(){return 0<$(".login").length},i=function(e){if(e=localStorage.getItem(e))return JSON.parse(e)},l=function(e){var r=e.pageInformation,o=e.whenGotten,i=e.whenNotGotten,a=e.localContext,e=r.slug,u=r.rev,s=r.site,t={get:function(n,r){return wiki.local.get(n,function(e,t){return console.log([e,t]),null!=e?wiki.origin.get(n,r):(s="local",r(null,t))})}};return s?a=[]:s=a.shift(),null===(s=s===window.location.host?"origin":s)&&(s="view"),function(){switch(s){case"local":return wiki.local;case"origin":return wiki.origin;case"recycler":return wiki.recycler;case"view":return t;default:return wiki.site(s)}}().get("".concat(e,".json"),function(e,t){var n;return e?404===e.xhr.status||0===e.xhr.status?0<a.length?l({pageInformation:r,whenGotten:o,whenNotGotten:i,localContext:a}):i():(n="The page handler has run into problems with this request.\n<pre class=error>".concat(JSON.stringify(r),"</pre>\nThe requested url.\n<pre class=error>").concat(url,"</pre>\nThe server reported status.\n<pre class=error>").concat(null!=(n=e.xhr)?n.status:void 0,"</pre>\nThe error message.\n<pre class=error>").concat(e.msg,"</pre>\nThese problems are rarely solved by reporting issues.\nThere could be additional information reported in the browser's console.log.\nMore information might be accessible by fetching the page outside of wiki.\n<a href=\"").concat(url,'" target="_blank">try-now</a>'),(e=h({title:"Trouble: Can't Get Page"},null)).addItem({type:"html",text:n}),o(e)):(console.log("got",s,t),u&&(t=d.create(u,t)),o(h(t,s)))})},o.get=function(e){var t,n=e.whenGotten,r=e.whenNotGotten,e=e.pageInformation;return!e.site&&(t=i(e.slug))?(e.rev&&(t=d.create(e.rev,t)),n(h(t,"local"))):(o.context.length||(o.context=["view"]),l({pageInformation:e,whenGotten:n,whenNotGotten:r,localContext:u.clone(o.context)}))},o.context=[],c=function(e,t,n){var r,o;return"create"===n.type?r={title:n.item.title,story:[],journal:[]}:(null==(r=(r=i(t.slug))||g.atKey(e.data("key")).getRawPage()).journal&&(r.journal=[]),null!=(o=n.fork)&&(r.journal=r.journal.concat({type:"fork",site:o,date:(new Date).getTime()}),delete n.fork)),d.apply(r,n),wiki.local.put(t.slug,r,function(){return p(e.find(".journal"),n),e.addClass("local")})},a=function(r,o,i){var a=s(i),u=g.atKey(r.data("key"));return"fork"===i.type&&(a.item=s(u.getRawPage())),wiki.origin.get("".concat(o.slug,".json"),function(e,t){var n=!e&&t.story||[];return wiki.origin.put(o.slug,a,function(e){return e?(i.error={type:e.type,msg:e.msg,response:e.xhr.responseText},c(r,o,i)):(null!=u&&u.apply&&u.apply(i),v.updateSitemap(u),v.updateIndex(u,n),p(r.find(".journal"),i),"fork"===i.type&&wiki.local.delete(r.attr("id")),"fork"!==i.type&&i.fork&&"image"===i.item.type?(e=r.find(".item").index(r.find("#"+i.item.id).context),wiki.renderFrom(e)):void 0)})})},o.put=function(t,e){var n=function(){var e;switch(e=t.data("site")){case"origin":case"local":case"view":case location.host:return null;default:return e}},n={slug:t.attr("id").split("_rev")[0],rev:t.attr("id").split("_rev")[1],site:n(),local:t.hasClass("local")},r=n.site;return console.log("pageHandler.put",e,n),o.useLocalStorage()&&(null!=n.site?console.log("remote => local"):n.local||(console.log("origin => local"),e.site=r=location.host)),e.date=(new Date).getTime(),"origin"===e.site&&delete e.site,t.removeClass("plugin"),r&&(t.find("h1").prop("title",location.host),t.find("h1 img").attr("src","/favicon.png"),t.find("h1 a").attr("href","/view/welcome-visitors/view/".concat(n.slug)).attr("target",location.host),t.data("site",null),t.removeClass("remote"),f.setUrl(),"fork"!==e.type&&(e.fork=r,p(t.find(".journal"),{type:"fork",site:r,date:e.date}))),(o.useLocalStorage()||"local"===n.site?c:a)(t,n,e)},o.delete=function(t,e,n){return console.log("delete server-side"),console.log("pageObject:",t),t.isRecycler()?wiki.recycler.delete("".concat(t.getSlug(),".json"),function(e){return setTimeout(function(){return n(e)},300)}):wiki.origin.delete("".concat(t.getSlug(),".json"),function(e){return setTimeout(function(){return null==e&&v.deleteFromSitemap(t),null==e&&v.deleteFromIndex(t),n(e)},300)})}},{"./addToJournal":4,"./lineup":15,"./neighborhood":17,"./page":19,"./random":24,"./revision":28,"./state":33,underscore:64}],21:[function(e,t,n){"use strict";var r=e("./editor"),u=e("./resolve"),o=e("./itemz"),i=function(e){return e.match(/<(i|b|p|a|h\d|hr|br|li|img|div|span|table|blockquote)\b.*?>/i)?"html":"markdown"};t.exports={emit:function(e,t){for(var n,r=t.text.split(/\n\n+/),o=[],i=0,a=r.length;i<a;i++)(n=r[i]).match(/\S/)?o.push(e.append("<p>".concat(u.resolveLinks(n),"</p>"))):o.push(void 0);return o},bind:function(t,n){return t.dblclick(function(e){return e.shiftKey?(n.type=i(n.text),o.replaceItem(t,"paragraph",n)):r.textEditor(t,n,{append:!0})})}}},{"./editor":8,"./itemz":12,"./resolve":27}],22:[function(e,t,n){"use strict";var r,o,u,i,a,s,c,l,f=[].indexOf;t.exports=c={},u=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},a=function(e,t){return console.log("loading url:",e),t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),$.ajax(t)},l=[],s={},i=c.getScript=function(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};return 0<=f.call(l,r)?o():a(r).done(function(){return l.push(r),o()}).fail(function(e,t,n){return console.log("getScript: Failed to load:",r,n),o()})},c.renderFrom=function(e){var o,i,t=$(".item").slice(e);return console.log("notifIndex",e,"about to render",t.toArray()),i=Promise.resolve(),i=(i=(o=function(e){var n,r,t;return 0===e.length?i:(t=e.shift(),(n=$(t)).hasClass("textEditing")||(r=n.data("item"),i=i.then(function(){return new Promise(function(e,t){return n.off(),c.emit(n.empty(),r,function(){return e()})})})),o(e))})(t.toArray())).then(function(){var o;return i=Promise.resolve(),(o=function(e){var n,r,t;return 0===e.length?i:(t=e.shift(),n=$(t),r=n.data("item"),i=i.then(function(){return new Promise(function(t,e){return c.getPlugin(r.type,function(e){return e.bind(n,r),t()})})}),o(e))})(t.toArray())})},o=function(n){return function(e,t){return e.addClass("emit"),n(e,t)}},r=function(u,s){return function(o,t,e){var n,i,r,a;return o[0].consuming=[],r=$(".item").index(o),n=window.plugins[u].consumes,a=Promise.resolve(),n&&(i=[],n.forEach(function(e){var t=$(".item:lt(".concat(r,")")).filter(e);return console.log(u,"consumes",e),console.log(t,"produce",e),t&&0!==t.length||console.log("warn: no items in lineup that produces",e),console.log("there are ".concat(t.length," instances of ").concat(e)),t.each(function(e,t){var n=$(t).parents(".page").data("key"),r=$(t).attr("data-id");return o[0].consuming.push("".concat(n,"/").concat(r)),i.push(t.promise)})}),a=Promise.all(i)),a.then(function(){var e;return o.removeClass("emit"),(e=s(o,t))&&"function"!=typeof e.then||(e=Promise.resolve(e)),o[0].promise=e}).catch(function(e){return console.log("plugin emit: unexpected error",e)})}},c.wrap=function(e,t){return t.emit=o(t.emit),t.bind=r(e,t.bind),t},c.get=c.getPlugin=function(n,t){return s[n]?s[n].then(t):(s[n]=new Promise(function(t,e){return window.plugins[n]?t(window.plugins[n]):i("/plugins/".concat(n,"/").concat(n,".js"),function(){var e=window.plugins[n];return e?(c.wrap(n,e),t(e)):i("/plugins/".concat(n,".js"),function(){return(e=window.plugins[n])&&c.wrap(n,e),t(e)})})}),s[n].then(function(e){return delete s[n],t(e)}),s[n])},c.do=c.doPlugin=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};return e.data("item",t),c.renderFrom($(".item").index(e)).then(function(){return n()})},c.emit=function(r,o){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},a=function(e,t){return r.append('<div class="error">\n  '.concat(u(o.text||""),"\n  <button>help</button><br>\n</div>")),null!=o.text&&r.find(".error").dblclick(function(e){return wiki.textEditor(r,o)}),r.find("button").on("click",function(){return wiki.dialog(e.toString(),'<p> This "'.concat(o.type,'" plugin won\'t show.</p>\n<li> Is it available on this server?\n<li> Is its markup correct?\n<li> Can it find necessary data?\n<li> Has network access been interrupted?\n<li> Has its code been tested?\n<p> Developers may open debugging tools and retry the plugin.</p>\n<button class="retry">retry</button>\n<p> Learn more\n  <a class="external" target="_blank" rel="nofollow"\n  href="http://plugins.fed.wiki.org/about-plugins.html"\n  title="http://plugins.fed.wiki.org/about-plugins.html">\n    About Plugins\n    <img src="/images/external-link-ltr-icon.png">\n  </a>\n</p>')),$(".retry").on("click",function(){return 2<t.emit.length?t.emit(r,o,function(){return i()}):(t.emit(r,o),i())})})};return r.data("pageElement",r.parents(".page")),r.data("item",o),c.get(o.type,function(t){var n;try{if(null==t)throw TypeError("Can't find plugin for '".concat(o.type,"'"));return 2<t.emit.length?t.emit(r,o,function(){return t.bind(r,o),i()}):(t.emit(r,o),i())}catch(e){return n=e,console.log("plugin error",n),a(n,t),i()}})},c.registerPlugin=function(e,t){return window.plugins[e]=t($)}},{}],23:[function(e,t,n){"use strict";var r=e("./plugin");window.plugins={reference:r.wrap("reference",e("./reference")),factory:r.wrap("factory",e("./factory")),paragraph:r.wrap("paragraph",e("./paragraph")),future:r.wrap("future",e("./future")),importer:r.wrap("importer",e("./importer"))}},{"./factory":9,"./future":10,"./importer":11,"./paragraph":21,"./plugin":22,"./reference":25}],24:[function(e,t,n){"use strict";var o=function(){return(256*(1+Math.random())|0).toString(16).substring(1)},r=function(r){return function(){for(var e=[],t=1,n=r;1<=n?t<=n:n<=t;1<=n?t++:t--)e.push(o());return e}().join("")};t.exports={randomByte:o,randomBytes:r,itemId:function(){return r(8)}}},{}],25:[function(e,t,n){"use strict";var r=e("./editor"),o=e("./resolve"),i=e("./page");t.exports={emit:function(e,t){var n,r=t.slug;return r=(r=null!=t.title?r||i.asSlug(t.title):r)||"welcome-visitors",n=t.site,o.resolveFrom(n,function(){return e.append("<p>\n  <img class='remote'\n    src='".concat(wiki.site(n).flag(),"'\n    title='").concat(n,"'\n    data-site=\"").concat(n,'"\n    data-slug="').concat(r,'"\n  >\n  ').concat(o.resolveLinks("[[".concat(t.title||r,"]]")),"\n  —\n  ").concat(o.resolveLinks(t.text),"\n</p>"))})},bind:function(e,t){return e.dblclick(function(){return r.textEditor(e,t)})}}},{"./editor":8,"./page":19,"./resolve":27}],26:[function(e,t,P){"use strict";var f=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/slicedToArray")),h=e("underscore"),g=e("./pageHandler"),v=e("./plugin"),r=e("./state"),y=e("./neighborhood"),d=e("./addToJournal"),n=e("./actionSymbols"),p=e("./lineup"),m=e("./resolve"),o=e("./random"),e=e("./page"),l=e.newPage,b=e.asSlug,i=e.pageEmitter,w=function(e){if(0<$(e).length)return $(e).data("item")||$(e).data("staticItem")},x=function(e,t,n){n=$.extend({},n);return t.data("item",n),null!=(e=p.atKey(e.data("key"))).getItem(n.id)?(n.alias||(n.alias=n.id),n.id=o.itemId(),t.attr("data-id",n.id),t.data("id",n.id),t.data("item").id=n.id):null!=n.alias&&null==e.getItem(n.alias)&&(n.id=n.alias,delete n.alias,t.attr("data-id",n.id)),n},_=function(e,t){return e&&t&&e.get(0)===t.get(0)},k=function(e){return e.children().map(function(e,t){return $(t).attr("data-id")}).get()},s=function(e,t,n,r){var o,i,a,u,s,c,l,t=t.item,f=w(t),d=t.data("pageElement"),p=d.hasClass("ghost")||d.hasClass("remote");if(d.hasClass("ghost")||(a={page:d.data().data.title},null!=d.data().site&&(a.site=d.data().site)),i=(o=t.parents(".page:first")).hasClass("ghost"),s=!(c=_(d,o))&&d.attr("id")===o.attr("id"),l={page:o.data().data.title},i||s)$(e.target).sortable("cancel");else{if(!c)return p||e.shiftKey?$(".shadow-copy").removeClass("shadow-copy").data(t.data()).attr({"data-id":t.attr("data-id")}):g.put(d,{id:f.id,type:"remove",removedTo:l}),t.data("pageElement",o),i=t.prev(".item"),s=w(i),f=x(o,t,f),g.put(o,{id:f.id,type:"add",item:f,after:null!=s?s.id:void 0,attribution:a}),$(".shadow-copy").remove(),t.empty(),i.after(t),u=$(".item").index(t),v.renderFrom(u=n<u?n:u);c=k(t.parents(".story:first")),h.isEqual(c,r)||($(".shadow-copy").remove(),t.empty(),u=$(".item").index(t),v.renderFrom(u=n<u?n:u),g.put(o,{id:f.id,type:"move",order:c}))}},c=function(e,t){var n=t.item.data("pageElement"),r=n.hasClass("ghost")||n.hasClass("remote"),t=t.placeholder.parents(".page:first"),o=t.hasClass("ghost"),i=_(n,t),n=!i&&n.attr("id")===t.attr("id"),t=r||e.shiftKey&&!i;return o||n?($("body").css("cursor","no-drop"),$(".shadow-copy").hide()):t?($("body").css("cursor","copy"),$(".shadow-copy").show()):($("body").css("cursor","move"),$(".shadow-copy").hide())},a=function(e){var n=$("body").css("cursor"),t={connectWith:".page .story",placeholder:"item-placeholder",forcePlaceholderSize:!0,delay:150},r=e.find(".story"),o=null,i=null,a=null,u=function(e){if(27===e.which)return a=!0,r.sortable("cancel")};return r.sortable(t).on("sortstart",function(e,t){var n=t.item;return o=k(r),i=$(".item").index(n),a=!1,$("body").on("keydown",u),n.clone().insertAfter(t.placeholder).hide().addClass("shadow-copy").css({width:"",height:"",position:"",zIndex:""}).removeAttr("data-id")}).on("sort",c).on("sortstop",function(e,t){return $("body").css("cursor",n).off("keydown",u),a||s(e,t,i,o),$(".shadow-copy").remove()})},u=function(e){e=$(e).parents(".page:first");return p.atKey(e.data("key"))},j=function(e,t){t=u(t.draggable),e=u(e.target);return i.emit("show",e.merge(t))},I=function(e){e=e.find(".journal");return e.draggable({revert:!0,appendTo:".main",scroll:!1,helper:"clone"}),e.droppable({hoverClass:"ui-state-hover",drop:j,accept:".journal"})},S=function(t){return t.find(".add-factory").on("click",function(e){if(!t.hasClass("ghost"))return e.preventDefault(),A(t)})},A=function(e){var t={type:"factory",id:o.itemId()},n=$("<div />",{class:"item factory"}).data("item",t).attr("data-id",t.id);return n.data("pageElement",e),e.find(".story").append(n),v.do(n,t),n=n.prev(".item"),n=w(n),g.put(e,{item:t,id:t.id,type:"add",after:null!=n?n.id:void 0})},E=function(e){e.preventDefault(),p.debugSelfCheck(function(){for(var e=$(".page"),t=[],n=0,r=e.length;n<r;n++)o=e[n],t.push($(o).data("key"));return t}()),e=$(e.target).parents(".page:first");var o,t=e=p.crumbs(e.data("key"),location.host),t=(0,f.default)(t,1)[0],n=wiki.site(t).getDirectURL("").split("/"),n=(0,f.default)(n,1)[0];return""===n&&(n=window.location.protocol),window.open("".concat(n,"//").concat(e.join("/")),t).focus()},C=function(e,t,n){var r=n.isRecycler()?"recycler":n.getRemoteSite(location.host),o=n.getRemoteSiteDetails(location.host);return e.append('<h1 title="'.concat(o,'">\n  <span>\n    <a href="').concat(n.siteLineup(),'" target="').concat(r,'">\n      <img src="').concat(wiki.site(r).flag(),'" height="32px" class="favicon"></a>\n    ').concat(m.escape(n.getTitle()),"\n  </span>\n</h1>")),e.find("a").on("click",E)},T=function(e,t,n){if(t.attr("id").match(/_rev/))return t.addClass("ghost"),t.data("rev",n.getRevision()),e.append($('<h2 class="revision">\n  <span>\n    '.concat(n.getTimestamp(),"\n  </span>\n</h2>")))},O=function(e){return e.append('<div class="control-buttons">\n  <a href="#" class="button fork-page" title="fork this page">'.concat(n.fork,'</a>\n  <a href="#" class="button add-factory" title="add paragraph">').concat(n.add,"</a>\n</div>"))},N=function(e,t){var n,r,o,i,a,u,s,c,l,f,d,t=t.getSlug(),p=y.backLinks(t);if(0<Object.keys(p).length){for(s in c=[],p){for((n=p[s]).sites.sort(function(e,t){return(e.date||0)<(t.date||0)}),r=[],o=i=0,a=(l=n.sites).length;i<a;o=++i)d=l[o],o<10?(f=(null!=(f=n.sites[o-1])?f.date:void 0)===d.date?"":" ",r.unshift(f),r.unshift('<img class="remote"\n    src="'.concat(wiki.site(d.site).flag(),'"\n    data-slug="').concat(s,'"\n    data-site="').concat(d.site,'"\n    data-id="').concat(d.itemId,'"\n    title="').concat(d.site,"\n").concat(wiki.util.formatElapsedTime(d.date),'">'))):10===o&&r.unshift(" ⋯ ");u=m.resolveLinks("[[".concat(n.title,"]]")),c.push('<div style="clear: both;">\n  <div style="float: left;">'.concat(u,'</div>\n  <div style="text-align: right;"> ').concat(r.join("")," </div>\n</div>"))}if(c)return e.append("<details>\n  <summary>".concat(c.length," pages link here:</summary>\n  ").concat(c.join("\n"),"\n</details>"))}},M=function(e,t){var n=t.getRemoteSite(location.host),t=t.getSlug();return e.append('<a class="show-page-license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a> .\n<a class="show-page-source" href="'.concat(wiki.site(n).getDirectURL(t),'.json" title="source">JSON</a> .\n<a href= "').concat(wiki.site(n).getDirectURL(t),'.html" date-slug="').concat(t,'" target="').concat(n,'">').concat(n,' </a> .\n<a href= "#" class=search>search</a>'))},z=function(e){for(var t,n=e||[],r=n.length-1;0<=r;r+=-1)if((t=n[r]).date&&"fork"!==t.type)return t.date},F=function(e){var o,t,n,i,r,a,u,s,c,l,f,d,p,h,g,v,m=e.data("data");if(m&&("view"!==(p=e.data("site")||window.location.host)&&"origin"!==p||(p=window.location.host),h=b(m.title),v=z(m.journal))){for(d in t={newer:[],same:[],older:[]},l=y.sites)if(r=l[d],d!==p&&null!=r.sitemap)for(u=0,c=(f=r.sitemap).length;u<c;u++)(a=f[u]).slug===h&&(o=a.date>v?t.newer:a.date<v?t.older:t.same).push({remoteSite:d,item:a});for(s in g=[],t)(o=t[s]).length&&(o.sort(function(e,t){return e.item.date<t.item.date}),n=function(){var e,t,n=[];for(i=e=0,t=o.length;e<t;i=++e){var r=o[i];if(d=r.remoteSite,a=r.item,8<=i)break;n.push('<img class="remote"\nsrc="'.concat(wiki.site(d).flag(),'"\ndata-slug="').concat(h,'"\ndata-site="').concat(d,'"\ntitle="').concat(d,'">'))}return n}(),g.push("".concat(n.join("&nbsp;")," ").concat(s)));if(g)return e.find(".twins").html("<p><span>".concat(g.join(", "),"</span></p>"))}},B=function(e,t){t.data("data",e.getRawPage()),e.isRemote()&&t.data("site",e.getRemoteSite()),console.log(".page keys ",function(){for(var e=$(".page"),t=[],n=0,r=e.length;n<r;n++)o=e[n],t.push($(o).data("key"));return t}()),console.log("lineup keys",p.debugKeys()),m.resolutionContext=e.getContext(),t.empty(),n=$("<div class='paper' />"),t.append(n);var n,o,r=["handle-parent","twins","header","story","backlinks","journal","footer"].map(function(e){if("journal"!==e||$(".editEnable").is(":visible"))return $("<div />").addClass(e).appendTo(n)}),r=(0,f.default)(r,7),i=r[0],a=(r[1],r[2]),u=r[3],s=r[4],c=r[5],r=r[6],l=$("<div />").addClass("page-handle").appendTo(i);return C(a,0,e),T(a,t,e),a=(a=e.seqItems(function(e,t){var n=$('<div class="item '.concat(e.type,'" data-id="').concat(e.id,'">'));return u.append(n),n.data("item",e),t()})).then(function(){var e=$(".page").index(t[0]),e=$(".item").index($($(".page")[e]).find(".item"));return v.renderFrom(e)}).then(function(){return t}),$(".editEnable").is(":visible")&&e.seqActions(function(e,t){return e.separator&&d(c,e.separator),d(c,e.action),t()}),F(t),N(s,e),$(".editEnable").is(":visible")&&O(c),M(r,e),l.css({height:"".concat(u.position().top-i.position().top-5,"px")}),a},q=function(e,t){if(!t.isRemote())return $("img.favicon",e).on("error",function(){return v.get("favicon",function(e){return e.create()})})},R=function(e,t){var n;return e.isLocal()&&t.addClass("local"),e.isRecycler()&&t.addClass("recycler"),e.isRemote()&&t.addClass("remote"),e.isPlugin()&&t.addClass("plugin"),n=B(e,t),q(t,e),r.setUrl(),$(".editEnable").is(":visible")&&(a(t),I(t),S(t)),n},L=function(e,t){return t.data("key",p.addPage(e)),R(e,t)},D=function(e,t){var n,r,o,i,a,u,s=b(e),c=l();for(u in c.setTitle(e),n=[],i=y.sites)null!=(a=i[u]).sitemap&&null!=(a=h.find(a.sitemap,function(e){return e.slug===s}))&&n.push({type:"reference",site:u,slug:s,title:a.title||s,text:a.synopsis||""});if(0<n.length)for(c.addItem({type:"future",text:"We could not find this page in the expected context.",title:e,create:t}),c.addItem({type:"paragraph",text:"We did find the page in your current neighborhood."}),r=0,o=n.length;r<o;r++)c.addItem(n[r]);else c.addItem({type:"future",text:"We could not find this page.",title:e,create:t});return c};t.exports={cycle:function(a){var u=new Promise(function(i,e){var t=a.attr("id").split("_rev"),t=(0,f.default)(t,2),n=t[0],t=t[1],r=a.find(".header h1").text().trim(),t={slug:n,rev:t,site:a.data("site")};return g.get({whenGotten:function(e){var t,n,r,o;for(u=L(e,a),t=0,n=(r=e.getNeighbors(location.host)).length;t<n;t++)o=r[t],y.registerNeighbor(o);return i(u)},whenNotGotten:function(){var e=$('a.internal[href="/'.concat(n,'.html"]:last'));return r=r||e.text()||n,e=e.parents(".page").data("key"),null!=(e=p.atKey(e))&&e.getCreate(),e=D(r),(u=L(e,a)).then(function(e){return e.addClass("ghost")}),i(u)},pageInformation:t})});return u},emitTwins:F,buildPage:L,rebuildPage:R,newFuturePage:D}},{"./actionSymbols":2,"./addToJournal":4,"./lineup":15,"./neighborhood":17,"./page":19,"./pageHandler":20,"./plugin":22,"./random":24,"./resolve":27,"./state":33,"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/slicedToArray":43,underscore:64}],27:[function(e,t,n){"use strict";var a,u,s=e("./page").asSlug;t.exports=u={},u.resolutionContext=[],u.escape=a=function(e){return(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},u.resolveFrom=function(e,t){u.resolutionContext.push(e);try{return t()}finally{u.resolutionContext.pop()}},u.resolveLinks=function(e){var n=[],o=function(e){var t=n.length;return n.push(e),"〖".concat(t,"〗")},t=function(e,t){return n[+t]},r=function(e,t){var n=s(t);return n.length?o('<a class="internal" href="/'.concat(n,'.html" data-page-name="').concat(n,'" title="').concat(u.resolutionContext.join(" => "),'">').concat(a(t),"</a>")):e},i=function(e,t,n,r){return o('<a class="external" target="_blank" href="'.concat(t,'" title="').concat(t,'" rel="nofollow">').concat(a(r),' <img src="/images/external-link-ltr-icon.png"></a>'))};return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:a)(e=(e||"").replace(/〖(\d+)〗/g,"〖 $1 〗").replace(/\[\[([^\]]+)\]\]/gi,r).replace(/\[((http|https|ftp):.*?) (.*?)\]/gi,i)).replace(/〖(\d+)〗/g,t)}},{"./page":19}],28:[function(e,t,n){"use strict";var u=function(i,t){var e,n,r=function(){for(var e,t=i.story||[],n=[],r=0,o=t.length;r<o;r++)e=t[r],n.push(null!=e?e.id:void 0);return n},o=function(e,t){e=r().indexOf(e)+1;return i.story.splice(e,0,t)},a=function(){var e;if(-1!==(e=r().indexOf(t.id)))return i.story.splice(e,1)};switch(i.story||(i.story=[]),t.type){case"create":null!=t.item&&(null!=t.item.title&&(i.title=t.item.title),null!=t.item.story&&(i.story=t.item.story.slice()));break;case"add":o(t.after,t.item);break;case"edit":-1!==(e=r().indexOf(t.id))?i.story.splice(e,1,t.item):i.story.push(t.item);break;case"move":e=t.order.indexOf(t.id),e=t.order[e-1],n=i.story[r().indexOf(t.id)],a(),o(e,n);break;case"remove":a()}return i.journal||(i.journal=[]),t.fork&&i.journal.push({type:"fork",site:t.fork}),i.journal.push(t)};t.exports={create:function(e,t){for(var n,r=t.journal.slice(0,+(e=+e)+1||9e9),o={title:t.title,story:[]},i=0,a=r.length;i<a;i++)n=r[i],u(o,n||{});return o},apply:u}},{}],29:[function(e,t,n){"use strict";var g=e("./pageHandler"),v=e("./random"),s=e("./link"),c=(e("./active"),e("./page").newPage),o=e("./resolve"),i=e("./page"),m=function(e,t){var n,r=t.slug;return r=(r=null!=t.title?r||i.asSlug(t.title):r)||"welcome-visitors",n=t.site,o.resolveFrom(n,function(){return e.append("<p>\n  <img class='remote'\n    src='".concat(wiki.site(n).flag(),"'\n    title='").concat(n,"'\n    data-site=\"").concat(n,'"\n    data-slug="').concat(r,'"\n  >\n  ').concat(o.resolveLinks("[[".concat(t.title||r,"]]")),"\n  —\n  ").concat(o.resolveLinks(t.text),"\n</p>"))})},y=function(e,t){return e.preventDefault(),e.shiftKey||(i=$(e.target).parents(".page")),s.doInternalLink(t,i,$(e.target).data("site")),!1};t.exports=function(e){var h=e.neighborhood;return{incrementalSearch:function(e){var t,n,r,o,i,a,u,s,c,l,f,d,p;if(!(e.length<2)){for(0===$(".incremental-search").length&&(u=$(".searchbox").position(),$("<div/>").css("left","".concat(u.left,"px")).css("bottom","".concat(u.top+$(".searchbox").height(),"px")).addClass("incremental-search").delegate(".internal","click",function(e){var t;return"SPAN"===e.target.nodeName&&(e.target=$(e.target).parent()[0]),t=$(e.target).data("pageName"),t="".concat(t),g.context=$(e.target).attr("title").split(" => "),y(e,t)}).delegate("img.remote","click",function(e){var t;return $(e.target).attr("src").startsWith("data:image/png")?(e.preventDefault(),t=$(e.target).data("site"),wiki.site(t).refresh(function(){})):(t=$(e.target).data("slug"),g.context=[$(e.target).data("site")],y(e,t))}).appendTo($(".searchbox"))),d=h.search(e),p=e.split(" ").map(function(e){return e.toLowerCase()}).filter(String),f=new RegExp("\\b("+e.split(" ").map(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}).filter(String).join("|")+")","i"),o=function(e){return e.split(f).map(function(e){return p.includes(e.toLowerCase())?"{{".concat(e,"}}"):e}).join("")},n=$(".incremental-search").empty(),d.finds&&0!==d.finds.length||$("<div/>").text("No results found").addClass("no-results").appendTo(n),l=[],i=r=0,a=(s=d.finds).length;i<a;i++)c=s[i],101===(r+=1)&&$("<div/>").text("".concat(d.finds.length-100," results omitted")).addClass("omitted-results").appendTo(n),100<r||(t=$("<div/>").appendTo(n),c={id:v.itemId(),type:"reference",site:c.site,slug:c.page.slug,title:o(c.page.title),text:o(c.page.synopsis)},m(t,c),l.push(t.html(t.html().split(new RegExp("({{.*?}})","i")).map(function(e){return 0===e.indexOf("{{")?"<span class='search-term'>".concat(e.substring(2,e.length-2),"</span>"):e}).join(""))));return l}$(".incremental-search").remove()},performSearch:function(e){var t,n,r,o,i,a,u=h.search(e);if(!u.finds||1!==u.finds.length){for($(".incremental-search").remove(),a=u.tally,(i=c()).setTitle("Search for '".concat(e,"'")),i.addParagraph("String '".concat(e,"' found on ").concat(a.finds||"none"," of ").concat(a.pages||"no"," pages from ").concat(a.sites||"no"," sites.\nText matched on ").concat(a.title||"no"," titles, ").concat(a.text||"no"," paragraphs, and ").concat(a.slug||"no"," slugs.\nElapsed time ").concat(a.msec," milliseconds.")),t=0,n=(r=u.finds).length;t<n;t++)o=r[t],i.addItem({type:"reference",site:o.site,slug:o.page.slug,title:o.page.title,text:o.page.synopsis||""});return s.showResult(i)}$(".incremental-search").find(".internal").click(),$(".incremental-search").remove()}}}},{"./active":3,"./link":16,"./page":19,"./pageHandler":20,"./random":24,"./resolve":27}],30:[function(e,t,n){"use strict";var r=e("./search"),o=null;t.exports={inject:function(e){return o=r({neighborhood:e})},bind:function(){return $("input.search").attr("autocomplete","off"),$("input.search").on("keydown",function(e){if(27===e.keyCode)return $(".incremental-search").remove()}),$("input.search").on("keypress",function(e){if(13===e.keyCode)return e=$(this).val(),o.performSearch(e),$(this).val("")}),$("input.search").on("focus",function(e){var t=$(this).val();return o.incrementalSearch(t)}),$("input.search").on("input",function(e){var t=$(this).val();return o.incrementalSearch(t)})}}},{"./search":29}],31:[function(e,t,n){"use strict";var r;t.exports={},r=e("./plugin"),t.exports=function(e){return r.getScript("/security/security.js",function(){return window.plugins.security.setup(e)})}},{"./plugin":22}],32:[function(e,t,n){"use strict";var u,s,i,c,r,l,f,o,d,a=e("async/queue"),e=e("localforage");t.exports=r={},l={},u={},f={},console.log("siteAdapter: loading data"),(c=e.createInstance({name:"routes"})).iterate(function(e,t,n){l[t]=e}).then(function(){return console.log("siteAdapter: data loaded")}).catch(function(e){return console.log("siteAdapter: error loading data ",e)}),(d=e.createInstance({name:"withCredentials"})).iterate(function(e,t,n){u[t]=e}).then(function(){return console.log("siteAdapter: withCredentials data loaded")}).catch(function(e){return console.log("siteAdapter: error loading withCredentials data ",e)}),o=function(n,e,t){var r=new Promise(function(e,t){var n;return n=setTimeout(function(){return clearTimeout(n),t()},3e3)}),o=new Promise(function(e,t){return $.ajax({type:"GET",url:n,success:function(){return e()},error:function(){return t()}})});return Promise.race([r,o]).then(function(){return e()}).catch(function(){return t()})},i=a(function(e,t){var n,r=e.site;return null!=l[r]&&t(l[r]),n="//".concat(r,"/favicon.png"),o(n,function(){return l[r]="//".concat(r),t("//".concat(r))},function(){switch(location.protocol){case"http:":return n="https://".concat(r,"/favicon.png"),o(n,function(){return l[r]="https://".concat(r),t("https://".concat(r))},function(){return t(l[r]="")});case"https:":return n="/proxy/".concat(r,"/favicon.png"),o(n,function(){return l[r]="/proxy/".concat(r),t("/proxy/".concat(r))},function(){return t(l[r]="")});default:return t(l[r]="")}})},8),s=function(n,r){return c.getItem(n).then(function(e){return console.log("findAdapter: ",n,e),null==e?i.push({site:n},function(t){return l[n]=t,c.setItem(n,t).then(function(e){return r(t)}).catch(function(e){return console.log("findAdapter setItem error: ",n,e),r(t)})}):r(l[n]=e)}).catch(function(e){return console.log("findAdapter error: ",n,e),r(l[n]="")})},r.local={flag:function(){return"/favicon.png"},getURL:function(e){return"/".concat(e)},getDirectURL:function(e){return"/".concat(e)},get:function(e,n){var t,r=function(e,t){if(n)return n(e,t)};if(console.log("wiki.local.get ".concat(e)),t=localStorage.getItem(e.replace(/\.json$/,""))){if(r(null,t=JSON.parse(t)),!n)return Promise.resolve(t)}else if(r(t={msg:"no page named '".concat(e,"' in browser local storage")},null),console.log("tried to local fetch a page that isn't local"),!n)return Promise.reject(t)},put:function(e,t,n){return console.log("wiki.local.put ".concat(e)),localStorage.setItem(e,JSON.stringify(t)),n()},delete:function(e){return console.log("wiki.local.delete ".concat(e)),localStorage.removeItem(e)}},r.origin={flag:function(){return"/favicon.png"},getURL:function(e){return"/".concat(e)},getDirectURL:function(e){return"/".concat(e)},get:function(e,n){var r=function(e,t){if(n)return n(e,t)};return console.log("wiki.origin.get ".concat(e)),$.ajax({type:"GET",dataType:"json",url:"/".concat(e),success:function(e){return r(null,e)},error:function(e,t,n){return r({msg:n,xhr:e},null)}})},getIndex:function(e,n){var r=function(e,t){if(n)return n(e,t)};return console.log("wiki.origin.get ".concat(e)),$.ajax({type:"GET",dataType:"text",url:"/".concat(e),success:function(e){return r(null,e)},error:function(e,t,n){return r({msg:n,xhr:e},null)}})},put:function(e,t,r){return console.log("wiki.orgin.put ".concat(e)),$.ajax({type:"PUT",url:"/page/".concat(e,"/action"),data:{action:JSON.stringify(t)},success:function(){return r(null)},error:function(e,t,n){return r({xhr:e,type:t,msg:n})}})},delete:function(e,r){return console.log("wiki.origin.delete ".concat(e)),$.ajax({type:"DELETE",url:"/".concat(e),success:function(){return r(null)},error:function(e,t,n){return r({xhr:e,type:t,msg:n})}})}},r.recycler={flag:function(){return"/recycler/favicon.png"},getURL:function(e){return"/recycler/".concat(e)},getDirectURL:function(e){return"/recycler/".concat(e)},get:function(e,n){var r=function(e,t){if(n)return n(e,t)};return console.log("wiki.recycler.get ".concat(e)),$.ajax({type:"GET",dataType:"json",url:"/recycler/".concat(e),success:function(e){return r(null,e)},error:function(e,t,n){return r({msg:n,xhr:e},null)}})},delete:function(e,r){return console.log("wiki.recycler.delete ".concat(e)),$.ajax({type:"DELETE",url:"/recycler/".concat(e),success:function(){return r(null)},error:function(e,t,n){return r({xhr:e,type:t,msg:n})}})}},r.site=function(a){var t;return a&&a!==window.location.host?"recycler"===a?r.recycler:(t=function(e){var t,n,r,o,i,a,u;return console.log("creating temp flag for ".concat(e)),(e=document.createElement("canvas")).width=32,e.height=32,r=e.getContext("2d"),a=o=32*Math.random(),i=32-(u=32*Math.random()),t="#"+(t=(255*Math.random()<<0).toString(16))+t+t,n="#"+(n=(255*Math.random()<<0).toString(16))+n+n,(o=r.createRadialGradient(o,a,32,i,u,0)).addColorStop(0,t),o.addColorStop(1,n),r.fillStyle=o,r.fillRect(0,0,32,32),e.toDataURL()},{flag:function(){var e;return null!=l[a]?""===l[a]?null!=f[a]?f[a]:f[a]=t(a):l[a]+"/favicon.png":null!=f[a]?f[a]:(s(a,function(e){var t;return""===e?console.log("Prefix for ".concat(a," is undetermined...")):(console.log("Prefix for ".concat(a," is ").concat(e)),e=f[a],t=l[a]+"/favicon.png",$('img[src="'+e+'"]').attr("src",t),$('a[target="'+a+'"]').attr("style","background-image: url("+t+")"),f[a]=null)}),e=t(a),f[a]=e)},getURL:function(e){return null!=l[a]?""===l[a]?(console.log("".concat(a," is unreachable, can't link to ").concat(e)),""):"".concat(l[a],"/").concat(e):(s(a,function(t){return""===t?console.log("".concat(a," is unreachable")):(console.log("Prefix for ".concat(a," is ").concat(t,", about to fixup links")),$('a[target="'+a+'"]').each(function(){var e=/proxy/.test(t)?(e=t.substring(7),"http://".concat(e)):t;return $(this).attr("href","".concat(e,"/").concat($(this).data("slug"),".html"))}))}),"")},getDirectURL:function(e){var t,n;return null!=l[a]?""===l[a]?(console.log("".concat(a," is unreachable, can't link to ").concat(e)),""):(t=/proxy/.test(l[a])?(n=l[a].substring(7),"http://".concat(n)):l[a],"".concat(t,"/").concat(e)):(s(a,function(e){return""===e?console.log("".concat(a," is unreachable")):(console.log("Prefix for ".concat(a," is ").concat(e,", about to fixup links")),$('a[target="'+a+'"]').each(function(){return t=/proxy/.test(e)?(n=e.substring(7),"http://".concat(n)):e,$(this).attr("href","".concat(t,"/").concat($(this).data("slug"),".html"))}))}),"")},get:function(t,o){var n,r=function(e,t){if(o)return o(e,t)},i=function(t,r){var n="".concat(l[a],"/").concat(t),e=u[a]||!1;return $.ajax({type:"GET",dataType:"json",url:n,xhrFields:{withCredentials:e},success:function(e){return"Login Required"!==e.title||n.includes("login-required")||!0===u[a]?(r(null,e),o?void 0:Promise.resolve(e)):(u[a]=!0,i(t,function(e,t){return e?u[a]=!1:d.setItem(a,!0),r(e,t)}))},error:function(e,t,n){if(r({msg:n,xhr:e},null),!o)return Promise.reject(n)}})};return null!=l[a]?""!==l[a]?i(t,r):(console.log("".concat(a," is unreachable")),n={msg:"".concat(a," is unreachable"),xhr:{status:0}},r(n,null),o?void 0:Promise.reject(n)):s(a,function(e){return""!==e?i(t,r):(console.log("".concat(a," is unreachable")),n={msg:"".concat(a," is unreachable"),xhr:{status:0}},r(n,null),o?void 0:Promise.reject(n))})},getIndex:function(t,o){var n,r=function(e,t){if(o)return o(e,t)},i=function(t,r){var n="".concat(l[a],"/").concat(t),e=u[a]||!1;return $.ajax({type:"GET",dataType:"text",url:n,xhrFields:{withCredentials:e},success:function(e){return"Login Required"!==e.title||n.includes("login-required")||!0===u[a]?(r(null,e),o?void 0:Promise.resolve(e)):(u[a]=!0,i(t,function(e,t){return e?u[a]=!1:d.setItem(a,!0),r(e,t)}))},error:function(e,t,n){if(r({msg:n,xhr:e},null),!o)return Promise.reject(n)}})};return null!=l[a]?""!==l[a]?i(t,r):(console.log("".concat(a," is unreachable")),n={msg:"".concat(a," is unreachable"),xhr:{status:0}},r(n,null),o?void 0:Promise.reject(n)):s(a,function(e){return""!==e?i(t,r):(console.log("".concat(a," is unreachable")),n={msg:"".concat(a," is unreachable"),xhr:{status:0}},r(n,null),o?void 0:Promise.reject(n))})},refresh:function(n){var r,o;return console.log("Refreshing ".concat(a)),null==f[a]&&(o=t(a),f[a]=o,r=l[a]+"/favicon.png",$('img[src="'+r+'"]').attr("src",o),$('a[target="'+a+'"]').attr("style","background-image: url("+o+")")),l[a]=null,c.removeItem(a).then(function(){return i.push({site:a},function(t){return c.setItem(a,t).then(function(e){return""===t?console.log("Refreshed prefix for ".concat(a," is undetermined...")):(console.log("Refreshed prefix for ".concat(a," is ").concat(t)),o=f[a],r=l[a]+"/favicon.png",$('img[src="'+o+'"]').attr("src",r),$('a[target="'+a+'"]').attr("style","background-image: url("+r+")")),n()}).catch(function(e){return console.log("findAdapter setItem error: ",a,e),l[a]="",n()})})}).catch(function(e){return console.log("refresh error ",a,e),n()})}}):r.origin}},{"async/queue":52,localforage:62}],33:[function(e,t,n){"use strict";var d,s=[].indexOf,p=e("./active"),h=e("./lineup"),g=null;t.exports=d={},d.inject=function(e){return g=e},d.pagesInDom=function(){return $.makeArray($(".page").map(function(e,t){return t.id}))},d.urlPages=function(){var o;return function(){for(var e=$(location).attr("pathname").split("/"),t=[],n=0,r=e.length;n<r;n+=2)o=e[n],t.push(o);return t}().slice(1)},d.locsInDom=function(){return $.makeArray($(".page").map(function(e,t){return $(t).data("site")||"view"}))},d.urlLocs=function(){for(var e,t=$(location).attr("pathname").split("/").slice(1),n=[],r=0,o=t.length;r<o;r+=2)e=t[r],n.push(e);return n},d.setUrl=function(){var r,o,i,a,e;if(document.title=h.bestTitle(),history&&history.pushState&&(o=d.locsInDom(),a=d.pagesInDom(),(e=function(){var e,t,n=[];for(r=e=0,t=a.length;e<t;r=++e)i=a[r],n.push("/".concat((null!=o?o[r]:void 0)||"view","/").concat(i));return n}().join(""))!==$(location).attr("pathname")))return history.pushState(null,null,e)},d.debugStates=function(){var o;return console.log("a .page keys ",function(){for(var e=$(".page"),t=[],n=0,r=e.length;n<r;n++)o=e[n],t.push($(o).data("key"));return t}()),console.log("a lineup keys",h.debugKeys())},d.show=function(e){var t,n,r,o,i,a,u,s,c=d.pagesInDom(),l=d.urlPages(),f=(d.locsInDom(),d.urlLocs());if(location.pathname&&"/"!==location.pathname){for(a=!0,t=n=0,o=c.length;n<o;t=++n)u=c[t],(a=a&&u===l[t])||(s=$(".page:last"),h.removeKey(s.data("key")),s.remove());for(a=!0,t=r=0,i=l.length;r<i;t=++r)u=l[t],(a=a&&u===c[t])||(console.log("push",t,u),g.showPage(u,f[t]));return d.debugStates(),p.set($(".page").last()),document.title=h.bestTitle()}},d.first=function(){var e,t,n,r,o,i,a,u;for(d.setUrl(),t=d.urlPages(),e=d.urlLocs(),i=d.pagesInDom(),a=[],n=r=0,o=t.length;r<o;n=++r)u=t[n],s.call(i,u)<0&&a.push(""!==u?g.createPage(u,e[n]):void 0);return a}},{"./active":3,"./lineup":15}],34:[function(e,t,n){"use strict";t.exports=function(e){var t,n,r=e.synopsis;return(r=(r=null!=e&&null!=e.story?(t=e.story[0],n=e.story[1],t&&"paragraph"===t.type&&(r=r||t.text),n&&"paragraph"===n.type&&(r=r||n.text),t&&null!=t.text&&(r=r||t.text),(r=n&&null!=n.text?r||n.text:r)||null!=e.story&&"A page with ".concat(e.story.length," items.")):"A page with no story.").trim().split(/\r|\n/,1)[0]).substring(0,560)}},{}],35:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/slicedToArray")),o=!1,i=null,a=null,u=null,s=null,c=function(e){if((o=e.shiftKey)&&($(".emit").addClass("highlight"),(e=i||u)&&$("[data-id=".concat(e,"]")).addClass("target"),a&&(s=a.consuming)))return s.forEach(function(e){return d(e).addClass("consumed")})},l=function(e){if(!(o=e.shiftKey))return $(".emit").removeClass("highlight"),$(".item, .action").removeClass("target"),$(".item").removeClass("consumed")},f=function(n){var e=$(".page").filter(function(e,t){return $(t).data("key")===n});return 0===e.length?null:(1<e.length&&console.log("warning: more than one page found for",key,e),e)},d=function(e){var t=e.split("/"),t=(0,r.default)(t,2),n=t[0],t=t[1],n=f(n);return!n||0===(n=n.find(".item[data-id=".concat(t,"]"))).length?null:(1<n.length&&console.log("warning: more than one item found for",e,n),n)},p=function(e){var t,n;if(i=(n=$(this)).attr("data-id"),a=n[0],o&&($("[data-id=".concat(i,"]")).addClass("target"),t=$(this).parents(".page:first").data("key"),n=n.offset().top,$(".page").trigger("align-item",{key:t,id:i,place:n}),s=a.consuming))return s.forEach(function(e){return d(e).addClass("consumed")})},h=function(e){return o&&($(".item, .action").removeClass("target"),$(".item").removeClass("consumed")),a=i=null},g=function(e){var t;if(u=$(this).data("id"),o)return $("[data-id=".concat(u,"]")).addClass("target"),t=$(this).parents(".page:first").data("key"),$(".page").trigger("align-item",{key:t,id:u})},v=function(e){return o&&$("[data-id=".concat(u,"]")).removeClass("target"),u=null},m=function(e){var t,n;if(i=(n=$(this)).attr("data-id"),a=n[0],o)return $("[data-id=".concat(i,"]")).addClass("target"),t=$(this).parents(".page:first").data("key"),n=n.offset().top,$(".page").trigger("align-item",{key:t,id:i,place:n})},y=function(e){return o&&$(".item, .action").removeClass("target"),a=i=null},b=function(e,t){var n,r=$(this);if(r.data("key")!==t.key&&(n=r.find(".item[data-id=".concat(t.id,"]"))).length)return t=t.place||r.height()/2,n=n.offset().top+r.scrollTop()-t,r.stop().animate({scrollTop:n},"slow")};t.exports={bind:function(){return $(document).keydown(function(e){if(16===e.keyCode)return c(e)}).keyup(function(e){if(16===e.keyCode)return l(e)}),$(".main").delegate(".item","mouseenter",p).delegate(".item","mouseleave",h).delegate(".action","mouseenter",g).delegate(".action","mouseleave",v).delegate(".page","align-item",b).delegate(".backlinks .remote","mouseenter",m).delegate(".backlinks .remote","mouseleave",y)}}},{"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/slicedToArray":43}],36:[function(e,t,n){"use strict";t.exports=t={},t.formatTime=function(e){var t,e=new Date(1e10<e?e:1e3*e),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],r=e.getHours(),o=r<12?"AM":"PM";return r=0===r?12:12<r?r-12:r,t=(e.getMinutes()<10?"0":"")+e.getMinutes(),"".concat(r,":").concat(t," ").concat(o,"<br>").concat(e.getDate()," ").concat(n," ").concat(e.getFullYear())},t.formatDate=function(e){var t,e=new Date(e),n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],o=e.getDate(),i=e.getFullYear(),a=e.getHours(),u=a<12?"AM":"PM";return a=0===a?12:12<a?a-12:a,t=(e.getMinutes()<10?"0":"")+e.getMinutes(),e=(e.getSeconds()<10?"0":"")+e.getSeconds(),"".concat(n," ").concat(r," ").concat(o,", ").concat(i,"<br>").concat(a,":").concat(t,":").concat(e," ").concat(u)},t.formatElapsedTime=function(e){var t,n,e=(new Date).getTime()-e;return(n=e/1e3)<2?"".concat(Math.floor(e)," milliseconds ago"):(e=n/60)<2?"".concat(Math.floor(n)," seconds ago"):(n=e/60)<2?"".concat(Math.floor(e)," minutes ago"):(e=n/24)<2?"".concat(Math.floor(n)," hours ago"):(n=e/7)<2?"".concat(Math.floor(e)," days ago"):(t=e/31)<2?"".concat(Math.floor(n)," weeks ago"):(n=e/365)<2?"".concat(Math.floor(t)," months ago"):"".concat(Math.floor(n)," years ago")}},{}],37:[function(e,t,n){"use strict";var r={},o=e("./siteAdapter");r.local=o.local,r.origin=o.origin,r.recycler=o.recycler,r.site=o.site,r.asSlug=e("./page").asSlug,r.newPage=e("./page").newPage,o=e("./itemz"),r.removeItem=o.removeItem,r.createItem=o.createItem,r.getItem=o.getItem,o=e("./dialog"),r.dialog=o.open,o=e("./link"),r.createPage=o.createPage,r.doInternalLink=o.doInternalLink,r.showResult=o.showResult,o=e("./plugin"),r.getScript=o.getScript,r.getPlugin=o.getPlugin,r.doPlugin=o.doPlugin,r.registerPlugin=o.registerPlugin,r.renderFrom=o.renderFrom,r.getData=function(e){var t;return e?(e=$(".item").index(e),null!=(t=$(".item:lt(".concat(e,")")).filter(".chart,.data,.calculator").last())?t.data("item").data:{}):null!=(t=$(".chart,.data,.calculator").last())?t.data("item").data:{}},r.getDataNodes=function(e){e=(e?(e=$(".item").index(e),$(".item:lt(".concat(e,")")).filter(".chart,.data,.calculator")):$(".chart,.data,.calculator")).toArray().reverse();return $(e)},r.log=function(){var e;if(null!=("undefined"!=typeof console&&null!==console?console.log:void 0))return(e=console).log.apply(e,arguments)},o=e("./neighborhood"),r.neighborhood=o.sites,r.neighborhoodObject=o,o=e("./pageHandler"),r.pageHandler=o,r.useLocalStorage=o.useLocalStorage,o=e("./resolve"),r.resolveFrom=o.resolveFrom,r.resolveLinks=o.resolveLinks,r.resolutionContext=o.resolutionContext,o=e("./editor"),r.textEditor=o.textEditor,r.util=e("./util"),r.security=e("./security"),r.createSynopsis=e("./synopsis"),r.lineup=e("./lineup"),t.exports=r},{"./dialog":6,"./editor":8,"./itemz":12,"./lineup":15,"./link":16,"./neighborhood":17,"./page":19,"./pageHandler":20,"./plugin":22,"./resolve":27,"./security":31,"./siteAdapter":32,"./synopsis":34,"./util":36}],38:[function(e,t,n){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},{}],39:[function(e,t,n){t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],40:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],41:[function(e,t,n){t.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],42:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],43:[function(e,t,n){var r=e("./arrayWithHoles.js"),o=e("./iterableToArrayLimit.js"),i=e("./unsupportedIterableToArray.js"),a=e("./nonIterableRest.js");t.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithHoles.js":39,"./iterableToArrayLimit.js":41,"./nonIterableRest.js":42,"./unsupportedIterableToArray.js":44}],44:[function(e,t,n){var r=e("./arrayLikeToArray.js");t.exports=function(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":38}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r){if((0,i.isAsync)(r))return function(...e){var t=e.pop();return u(r.apply(this,e),t)};return(0,o.default)(function(e,t){var n;try{n=r.apply(this,e)}catch(e){return t(e)}if(n&&"function"==typeof n.then)return u(n,t);t(null,n)})};var o=a(e("./internal/initialParams.js")),r=a(e("./internal/setImmediate.js")),i=e("./internal/wrapAsync.js");function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return e.then(e=>{s(t,null,e)},e=>{s(t,e&&e.message?e:new Error(e))})}function s(e,t,n){try{e(t,n)}catch(e){(0,r.default)(e=>{throw e},e)}}t.exports=n.default},{"./internal/initialParams.js":47,"./internal/setImmediate.js":50,"./internal/wrapAsync.js":51}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class r{constructor(){this.head=this.tail=null,this.length=0}removeLink(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,--this.length,e}empty(){for(;this.head;)this.shift();return this}insertAfter(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1}insertBefore(e,t){t.prev=e.prev,(t.next=e).prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1}unshift(e){this.head?this.insertBefore(this.head,e):o(this,e)}push(e){this.tail?this.insertAfter(this.tail,e):o(this,e)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var e=this.head;e;)yield e.data,e=e.next}remove(e){for(var t=this.head;t;){var n=t["next"];e(t)&&this.removeLink(t),t=n}return this}}function o(e,t){e.length=1,e.head=e.tail=t}n.default=r,t.exports=n.default},{}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){return function(...e){var t=e.pop();return n.call(this,e,t)}},t.exports=n.default},{}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){return function(...e){if(null===n)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,e)}},t.exports=n.default},{}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){if(null==t)t=1;else if(0===t)throw new RangeError("Concurrency must not be zero");var a=(0,m.default)(e),u=0,s=[];const c={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function l(e,t){return e?t?void(c[e]=c[e].filter(e=>e!==t)):c[e]=[]:Object.keys(c).forEach(e=>c[e]=[])}function f(e,...t){c[e].forEach(e=>e(...t))}var d=!1;function r(e,t,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");var o,i;function a(e,...t){return e?n?i(e):o():t.length<=1?o(t[0]):void o(t)}h.started=!0;e=h._createTaskItem(e,!n&&r||a);if(t?h._tasks.unshift(e):h._tasks.push(e),d||(d=!0,(0,v.default)(()=>{d=!1,h.process()})),n||!r)return new Promise((e,t)=>{o=e,i=t})}function o(e){return 0===e.length&&h.idle()&&((0,v.default)(()=>f("drain")),1)}e=a=>e=>{if(!e)return new Promise((n,r)=>{{var t=a,o=(e,t)=>{if(e)return r(e);n(t)};const i=(...e)=>{l(t,i),o(...e)};c[t].push(i)}});var t;l(a),t=a,e=e,c[t].push(e)};var p=!1,h={_tasks:new i.default,_createTaskItem(e,t){return{data:e,callback:t}},*[Symbol.iterator](){yield*h._tasks[Symbol.iterator]()},concurrency:t,payload:n,buffer:t/4,started:!1,paused:!1,push(e,t){return Array.isArray(e)?o(e)?void 0:e.map(e=>r(e,!1,!1,t)):r(e,!1,!1,t)},pushAsync(e,t){return Array.isArray(e)?o(e)?void 0:e.map(e=>r(e,!1,!0,t)):r(e,!1,!0,t)},kill(){l(),h._tasks.empty()},unshift(e,t){return Array.isArray(e)?o(e)?void 0:e.map(e=>r(e,!0,!1,t)):r(e,!0,!1,t)},unshiftAsync(e,t){return Array.isArray(e)?o(e)?void 0:e.map(e=>r(e,!0,!0,t)):r(e,!0,!0,t)},remove(e){h._tasks.remove(e)},process(){if(!p){for(p=!0;!h.paused&&u<h.concurrency&&h._tasks.length;){var e=[],t=[],n=h._tasks.length;h.payload&&(n=Math.min(n,h.payload));for(var r=0;r<n;r++){var o=h._tasks.shift();e.push(o),s.push(o),t.push(o.data)}u+=1,0===h._tasks.length&&f("empty"),u===h.concurrency&&f("saturated");var i=(0,g.default)(function(a){return function(e,...t){--u;for(var n=0,r=a.length;n<r;n++){var o=a[n],i=s.indexOf(o);0===i?s.shift():0<i&&s.splice(i,1),o.callback(e,...t),null!=e&&f("error",e,o.data)}u<=h.concurrency-h.buffer&&f("unsaturated"),h.idle()&&f("drain"),h.process()}}(e));a(t,i)}p=!1}},length(){return h._tasks.length},running(){return u},workersList(){return s},idle(){return h._tasks.length+u===0},pause(){h.paused=!0},resume(){!1!==h.paused&&(h.paused=!1,v.default)(h.process)}};return Object.defineProperties(h,{saturated:{writable:!1,value:e("saturated")},unsaturated:{writable:!1,value:e("unsaturated")},empty:{writable:!1,value:e("empty")},drain:{writable:!1,value:e("drain")},error:{writable:!1,value:e("error")}}),h};var g=r(e("./onlyOnce.js")),v=r(e("./setImmediate.js")),i=r(e("./DoublyLinkedList.js")),m=r(e("./wrapAsync.js"));function r(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"./DoublyLinkedList.js":46,"./onlyOnce.js":48,"./setImmediate.js":50,"./wrapAsync.js":51}],50:[function(e,t,u){!function(i,a){!function(){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.fallback=r,u.wrap=o;var e=u.hasQueueMicrotask="function"==typeof queueMicrotask&&queueMicrotask,t=u.hasSetImmediate="function"==typeof a&&a,n=u.hasNextTick="object"==typeof i&&"function"==typeof i.nextTick;function r(e){setTimeout(e,0)}function o(n){return(e,...t)=>n(()=>e(...t))}e=e?queueMicrotask:t?a:n?i.nextTick:r,u.default=o(e)}.call(this)}.call(this,e("_process"),e("timers").setImmediate)},{_process:54,timers:59}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isAsyncIterable=n.isAsyncGenerator=n.isAsync=void 0;var e=e("../asyncify.js"),r=(e=e)&&e.__esModule?e:{default:e};function o(e){return"AsyncFunction"===e[Symbol.toStringTag]}n.default=function(e){if("function"!=typeof e)throw new Error("expected a function");return o(e)?(0,r.default)(e):e},n.isAsync=o,n.isAsyncGenerator=function(e){return"AsyncGenerator"===e[Symbol.toStringTag]},n.isAsyncIterable=function(e){return"function"==typeof e[Symbol.asyncIterator]}},{"../asyncify.js":45}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=(0,o.default)(e);return(0,r.default)((e,t)=>{n(e[0],t)},t,1)};var r=i(e("./internal/queue.js")),o=i(e("./internal/wrapAsync.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"./internal/queue.js":49,"./internal/wrapAsync.js":51}],53:[function(e,t,n){"use strict";var r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};var o=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(u,s){return new Promise(function(e,t){function n(e){u.removeListener(s,r),t(e)}function r(){"function"==typeof u.removeListener&&u.removeListener("error",n),e([].slice.call(arguments))}var o,i,a;v(u,s,r,{once:!0}),"error"!==s&&(i=n,a={once:!0},"function"==typeof(o=u).on&&v(o,"error",i,a))})},(a.EventEmitter=a).prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var o,i;return c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener||n),o=e._events),i=o[t]),void 0===i?(i=o[t]=n,++e._eventsCount):("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),0<(o=l(e))&&i.length>o&&!i.warned&&(i.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=i.length,n=r,console&&console.warn&&console.warn(n))),e}function d(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function p(e,t,n){e=e._events;if(void 0===e)return[];e=e[t];if(void 0===e)return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var r=e,o=new Array(r.length),i=0;i<o.length;++i)o[i]=r[i].listener||r[i];return o}return g(e,e.length)}function h(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(n,r,o,i){if("function"==typeof n.on)i.once?n.once(r,o):n.on(r,o);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(r,function e(t){i.once&&n.removeEventListener(r,e),o(t)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){if((i=0<t.length?t[0]:i)instanceof Error)throw i;r=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw r.context=i,r}var i=o[e];if(void 0===i)return!1;if("function"==typeof i)s(i,this,t);else for(var a=i.length,u=g(i,a),n=0;n<a;++n)s(u[n],this,t);return!0},a.prototype.on=a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},a.prototype.off=a.prototype.removeListener=function(e,t){var n,r,o,i,a;if(c(t),void 0!==(r=this._events)&&void 0!==(n=r[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;if(0===o)n.shift();else{for(var u=n,s=o;s+1<u.length;s++)u[s]=u[s+1];u.pop()}1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0!==n)if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]);else if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return 0<this._eventsCount?o(this._events):[]}},{}],54:[function(e,t,n){var r,o,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return(r=setTimeout)(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}var s,c=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&p())}function p(){if(!l){for(var e=u(d),t=(l=!0,c.length);t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,!function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return(o=clearTimeout)(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||u(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=g,t.addListener=g,t.once=g,t.off=g,t.removeListener=g,t.removeAllListeners=g,t.emit=g,t.prependListener=g,t.prependOnceListener=g,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],55:[function(e,E,$){!function(A){!function(){var e=this,t="object"==typeof $&&$&&!$.nodeType&&$,n="object"==typeof E&&E&&!E.nodeType&&E,r="object"==typeof A&&A;r.global!==r&&r.window!==r&&r.self!==r||(e=r);var o,i,v=2147483647,m=36,y=26,a=38,u=700,s=/^xn--/,c=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=m-1,b=Math.floor,w=String.fromCharCode;function x(e){throw new RangeError(f[e])}function p(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function h(e,t){var n=e.split("@"),r="",n=(1<n.length&&(r=n[0]+"@",e=n[1]),(e=e.replace(l,".")).split("."));return r+p(n,t).join(".")}function _(e){for(var t,n,r=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function g(e){return p(e,function(e){var t="";return 65535<e&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=w(e)}).join("")}function k(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function j(e,t,n){var r=0;for(e=n?b(e/u):e>>1,e+=b(e/t);d*y>>1<e;r+=m)e=b(e/d);return b(r+(d+1)*e/(e+a))}function I(e){var t,n,r,o,i,a,u,s=[],c=e.length,l=0,f=128,d=72,p=e.lastIndexOf("-");for(p<0&&(p=0),n=0;n<p;++n)128<=e.charCodeAt(n)&&x("not-basic"),s.push(e.charCodeAt(n));for(r=0<p?p+1:0;r<c;){for(o=l,i=1,a=m;c<=r&&x("invalid-input"),u=e.charCodeAt(r++),(m<=(u=u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:m)||u>b((v-l)/i))&&x("overflow"),l+=u*i,!(u<(u=a<=d?1:d+y<=a?y:a-d));a+=m)i>b(v/(u=m-u))&&x("overflow"),i*=u;d=j(l-o,t=s.length+1,0==o),b(l/t)>v-f&&x("overflow"),f+=b(l/t),l%=t,s.splice(l++,0,f)}return g(s)}function S(e){for(var t,n,r,o,i,a,u,s,c,l,f=[],d=(e=_(e)).length,p=128,h=72,g=t=0;g<d;++g)(u=e[g])<128&&f.push(w(u));for(n=r=f.length,r&&f.push("-");n<d;){for(o=v,g=0;g<d;++g)p<=(u=e[g])&&u<o&&(o=u);for(o-p>b((v-t)/(s=n+1))&&x("overflow"),t+=(o-p)*s,p=o,g=0;g<d;++g)if((u=e[g])<p&&++t>v&&x("overflow"),u==p){for(i=t,a=m;!(i<(c=a<=h?1:h+y<=a?y:a-h));a+=m)f.push(w(k(c+(l=i-c)%(c=m-c),0))),i=b(l/c);f.push(w(k(i,0))),h=j(t,s,n==r),t=0,++n}++t,++p}return f.join("")}if(o={version:"1.4.1",ucs2:{decode:_,encode:g},decode:I,encode:S,toASCII:function(e){return h(e,function(e){return c.test(e)?"xn--"+S(e):e})},toUnicode:function(e){return h(e,function(e){return s.test(e)?I(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return o});else if(t&&n)if(E.exports==t)n.exports=o;else for(i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);else e.punycode=o}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"==typeof e&&0!==e.length){var i=/\+/g,t=(e=e.split(t),1e3),a=(r&&"number"==typeof r.maxKeys&&(t=r.maxKeys),e.length);0<t&&t<a&&(a=t);for(var u=0;u<a;++u){var s,c=e[u].replace(i,"%20"),l=c.indexOf(n),l=0<=l?(s=c.substr(0,l),c.substr(l+1)):(s=c,""),c=decodeURIComponent(s),l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(o,c)?f(o[c])?o[c].push(l):o[c]=[o[c],l]:o[c]=l}}return o};var f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],57:[function(e,t,n){"use strict";function i(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}t.exports=function(n,r,o,e){return r=r||"&",o=o||"=","object"==typeof(n=null===n?void 0:n)?u(s(n),function(e){var t=encodeURIComponent(i(e))+o;return a(n[e])?u(n[e],function(e){return t+encodeURIComponent(i(e))}).join(r):t+encodeURIComponent(i(n[e]))}).join(r):e?encodeURIComponent(i(e))+o+encodeURIComponent(i(n)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function u(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}},{}],58:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":56,"./encode":57}],59:[function(s,e,c){!function(n,u){!function(){var r=s("process/browser.js").nextTick,e=Function.prototype.apply,o=Array.prototype.slice,i={},a=0;function t(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof n?n:function(e){var t=a++,n=!(arguments.length<2)&&o.call(arguments,1);return i[t]=!0,r(function(){i[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof u?u:function(e){delete i[e]}}.call(this)}.call(this,s("timers").setImmediate,s("timers").clearImmediate)},{"process/browser.js":54,timers:59}],60:[function(e,t,n){"use strict";var k=e("punycode"),j=e("./util");function x(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=o,n.resolve=function(e,t){return o(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?o(e,!1,!0).resolveObject(t):t},n.format=function(e){j.isString(e)&&(e=o(e));return e instanceof x?e.format():x.prototype.format.call(e)},n.Url=x;var I=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,S=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),A=["'"].concat(n),E=["%","/","?",";","#"].concat(A),$=["/","?","#"],C=/^[+a-z0-9A-Z_-]{0,63}$/,T=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,O={javascript:!0,"javascript:":!0},F={javascript:!0,"javascript:":!0},R={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},L=e("querystring");function o(e,t,n){var r;return e&&j.isObject(e)&&e instanceof x?e:((r=new x).parse(e,t,n),r)}x.prototype.parse=function(e,t,n){if(!j.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),r=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(r);o[0]=o[0].replace(/\\/g,"/");var i=(i=e=o.join(r)).trim();if(!n&&1===e.split("#").length){o=S.exec(i);if(o)return this.path=i,this.href=i,this.pathname=o[1],o[2]?(this.search=o[2],this.query=t?L.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var a,r=I.exec(i);if(r&&(a=(r=r[0]).toLowerCase(),this.protocol=a,i=i.substr(r.length)),!(n||r||i.match(/^\/\/[^@\/]+@[^@\/]+/))||!(w="//"===i.substr(0,2))||r&&F[r]||(i=i.substr(2),this.slashes=!0),!F[r]&&(w||r&&!R[r])){for(var u=-1,s=0;s<$.length;s++)-1!==(c=i.indexOf($[s]))&&(-1===u||c<u)&&(u=c);-1!==(e=-1===u?i.lastIndexOf("@"):i.lastIndexOf("@",u))&&(o=i.slice(0,e),i=i.slice(e+1),this.auth=decodeURIComponent(o));for(var c,u=-1,s=0;s<E.length;s++)-1!==(c=i.indexOf(E[s]))&&(-1===u||c<u)&&(u=c);-1===u&&(u=i.length),this.host=i.slice(0,u),i=i.slice(u),this.parseHost(),this.hostname=this.hostname||"";n="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!n)for(var l=this.hostname.split(/\./),s=0,f=l.length;s<f;s++){var d=l[s];if(d&&!d.match(C)){for(var p="",h=0,g=d.length;h<g;h++)127<d.charCodeAt(h)?p+="x":p+=d[h];if(!p.match(C)){var v=l.slice(0,s),m=l.slice(s+1),y=d.match(T);y&&(v.push(y[1]),m.unshift(y[2])),m.length&&(i="/"+m.join(".")+i),this.hostname=v.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),n||(this.hostname=k.toASCII(this.hostname));var b=this.port?":"+this.port:"",w=this.hostname||"";this.host=w+b,this.href+=this.host,n&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==i[0]&&(i="/"+i))}if(!O[a])for(s=0,f=A.length;s<f;s++){var x,_=A[s];-1!==i.indexOf(_)&&((x=encodeURIComponent(_))===_&&(x=escape(_)),i=i.split(_).join(x))}r=i.indexOf("#"),-1!==r&&(this.hash=i.substr(r),i=i.slice(0,r)),e=i.indexOf("?");return-1!==e?(this.search=i.substr(e),this.query=i.substr(e+1),t&&(this.query=L.parse(this.query)),i=i.slice(0,e)):t&&(this.search="",this.query={}),i&&(this.pathname=i),R[a]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(b=this.pathname||"",o=this.search||"",this.path=b+o),this.href=this.format(),this},x.prototype.format=function(){var e=this.auth||"",t=(e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@"),this.protocol||""),n=this.pathname||"",r=this.hash||"",o=!1,i="",e=(this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(i=L.stringify(this.query)),this.search||i&&"?"+i||"");return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||R[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o=o||"",r&&"#"!==r.charAt(0)&&(r="#"+r),e&&"?"!==e.charAt(0)&&(e="?"+e),t+o+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(e=e.replace("#","%23"))+r},x.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},x.prototype.resolveObject=function(e){j.isString(e)&&((d=new x).parse(e,!1,!0),e=d);for(var t=new x,n=Object.keys(this),r=0;r<n.length;r++){var o=n[r];t[o]=this[o]}if(t.hash=e.hash,""!==e.href)if(e.slashes&&!e.protocol){for(var i=Object.keys(e),a=0;a<i.length;a++){var u=i[a];"protocol"!==u&&(t[u]=e[u])}R[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/")}else if(e.protocol&&e.protocol!==t.protocol)if(R[e.protocol]){if(t.protocol=e.protocol,e.host||F[e.protocol])t.pathname=e.pathname;else{for(var s=(e.pathname||"").split("/");s.length&&!(e.host=s.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==s[0]&&s.unshift(""),s.length<2&&s.unshift(""),t.pathname=s.join("/")}t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(d=t.pathname||"",p=t.search||"",t.path=d+p),t.slashes=t.slashes||e.slashes}else for(var c=Object.keys(e),l=0;l<c.length;l++){var f=c[l];t[f]=e[f]}else{var d=t.pathname&&"/"===t.pathname.charAt(0),p=e.host||e.pathname&&"/"===e.pathname.charAt(0),d=p||d||t.host&&e.pathname,h=d,g=t.pathname&&t.pathname.split("/")||[],s=e.pathname&&e.pathname.split("/")||[],v=t.protocol&&!R[t.protocol];if(v&&(t.hostname="",t.port=null,t.host&&(""===g[0]?g[0]=t.host:g.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===s[0]?s[0]=e.host:s.unshift(e.host)),e.host=null),d=d&&(""===s[0]||""===g[0])),p)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,g=s;else if(s.length)(g=g||[]).pop(),g=g.concat(s),t.search=e.search,t.query=e.query;else if(!j.isNullOrUndefined(e.search))return v&&(t.hostname=t.host=g.shift(),(w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.host=t.hostname=w.shift())),t.search=e.search,t.query=e.query,j.isNull(t.pathname)&&j.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(g.length){for(var m=g.slice(-1)[0],p=(t.host||e.host||1<g.length)&&("."===m||".."===m)||""===m,y=0,b=g.length;0<=b;b--)"."===(m=g[b])?g.splice(b,1):".."===m?(g.splice(b,1),y++):y&&(g.splice(b,1),y--);if(!d&&!h)for(;y--;)g.unshift("..");!d||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),p&&"/"!==g.join("/").substr(-1)&&g.push("");var w,h=""===g[0]||g[0]&&"/"===g[0].charAt(0);v&&(t.hostname=t.host=!h&&g.length?g.shift():"",(w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.host=t.hostname=w.shift())),(d=d||t.host&&g.length)&&!h&&g.unshift(""),g.length?t.pathname=g.join("/"):(t.pathname=null,t.path=null),j.isNull(t.pathname)&&j.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes}else t.pathname=null,t.search?t.path="/"+t.search:t.path=null}return t.href=t.format(),t},x.prototype.parseHost=function(){var e=this.host,t=r.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":61,punycode:55,querystring:58}],61:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],62:[function(c,t,n){!function(r){!function(){!function(e){"object"==typeof n&&void 0!==t?t.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).localforage=e()}(function(){return function r(o,i,a){function u(n,e){if(!i[n]){if(!o[n]){var t="function"==typeof c&&c;if(!e&&t)return t(n,!0);if(s)return s(n,!0);e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t=i[n]={exports:{}};o[n][0].call(t.exports,function(e){var t=o[n][1][e];return u(t||e)},t,t.exports,r,o,i,a)}return i[n].exports}for(var s="function"==typeof c&&c,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,c,t){!function(t){"use strict";var e,n,r,o,i=t.MutationObserver||t.WebKitMutationObserver,a=i?(e=0,i=new i(s),n=t.document.createTextNode(""),i.observe(n,{characterData:!0}),function(){n.data=e=++e%2}):t.setImmediate||void 0===t.MessageChannel?"document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){s(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(s,0)}:((r=new t.MessageChannel).port1.onmessage=s,function(){r.port2.postMessage(0)}),u=[];function s(){o=!0;for(var e,t,n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}o=!1}c.exports=function(e){1!==u.push(e)||o||a()}}.call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var o=e(1);function s(){}var c={},i=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,e!==s&&p(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(t,n,r){o(function(){var e;try{e=n(r)}catch(e){return c.reject(t,e)}e===t?c.reject(t,new TypeError("Cannot resolve promise with itself")):c.resolve(t,e)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(t,e){var n=!1;function r(e){n||(n=!0,c.reject(t,e))}function o(e){n||(n=!0,c.resolve(t,e))}var i=h(function(){e(o,r)});"error"===i.status&&r(i.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=u).prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){var n;return"function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i?this:(n=new this.constructor(s),this.state!==r?f(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n)},l.prototype.callFulfilled=function(e){c.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){c.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},c.resolve=function(e,t){var n=h(d,t);if("error"===n.status)return c.reject(e,n.value);n=n.value;if(n)p(e,n);else{e.state=a,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callFulfilled(t)}return e},c.reject=function(e,t){e.state=i,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){if(e instanceof this)return e;return c.resolve(new this(s),e)},u.reject=function(e){var t=new this(s);return c.reject(t,e)},u.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,o=!1;if(!r)return this.resolve([]);var i=new Array(r),a=0,t=-1,u=new this(s);for(;++t<r;)!function(e,t){n.resolve(e).then(function(e){i[t]=e,++a!==r||o||(o=!0,c.resolve(u,i))},function(e){o||(o=!0,c.reject(u,e))})}(e[t],t);return u},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var o=-1,i=new this(s);for(;++o<n;)!function(e){t.resolve(e).then(function(e){r||(r=!0,c.resolve(i,e))},function(e){r||(r=!0,c.reject(i,e))})}(e[o]);return i}},{1:1}],3:[function(t,e,n){!function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}.call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,D,P){"use strict";var N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var u=function(){try{return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}catch(e){}}();function i(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var p=Promise;function h(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function s(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function l(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function c(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var a="local-forage-detect-blob-support",t=void 0,f={},M=Object.prototype.toString,n="readonly",d="readwrite";function z(e){return"boolean"==typeof t?p.resolve(t):(r=e,new p(function(n){var e=r.transaction(a,d),t=i([""]);e.objectStore(a).put(t,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1}).then(function(e){return t=e}));var r}function g(e){var e=f[e.name],n={};n.promise=new p(function(e,t){n.resolve=e,n.reject=t}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function v(e){e=f[e.name].deferredOperations.pop();e&&(e.resolve(),e.promise)}function m(e,t){e=f[e.name].deferredOperations.pop();if(e)return e.reject(t),e.promise}function r(o,i){return new p(function(t,n){if(f[o.name]=f[o.name]||K(),o.db){if(!i)return t(o.db);g(o),o.db.close()}var e=[o.name],r=(i&&e.push(o.version),u.open.apply(u,e));i&&(r.onupgradeneeded=function(t){var e=r.result;try{e.createObjectStore(o.storeName),t.oldVersion<=1&&e.createObjectStore(a)}catch(e){if("ConstraintError"!==e.name)throw e;console.warn('The database "'+o.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+o.storeName+'" already exists.')}}),r.onerror=function(e){e.preventDefault(),n(r.error)},r.onsuccess=function(){var e=r.result;e.onversionchange=function(e){e.target.close()},t(e),v(o)}})}function y(e){return r(e,!1)}function b(e){return r(e,!0)}function w(e,t){var n,r,o;return!e.db||(n=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,r=e.version>e.db.version,o&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),(r||n)&&(n&&(o=e.db.version+1)>e.version&&(e.version=o),1))}function B(e){return i([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}(atob(e.data))],{type:e.type})}function q(e){return e&&e.__local_forage_encoded_blob}function U(e){var t=this,n=t._initReady().then(function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return s(n,e,e),n}function x(t,n,r,o){void 0===o&&(o=1);try{var e=t.db.transaction(t.storeName,n);r(null,e)}catch(e){if(0<o&&(!t.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return p.resolve().then(function(){if(!t.db||"NotFoundError"===e.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),b(t)}).then(function(){return function(n){g(n);for(var r=f[n.name],o=r.forages,e=0;e<o.length;e++){var t=o[e];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return n.db=null,y(n).then(function(e){return n.db=e,w(n)?b(n):e}).then(function(e){n.db=r.db=e;for(var t=0;t<o.length;t++)o[t]._dbInfo.db=e}).catch(function(e){throw m(n,e),e})}(t).then(function(){x(t,n,r,o-1)})}).catch(r);r(e)}}function K(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}e={_driver:"asyncStorage",_initStorage:function(e){var r=this,o={db:null};if(e)for(var t in e)o[t]=e[t];var i=f[o.name],n=(i||(i=K(),f[o.name]=i),i.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=U),[]);function a(){return p.resolve()}for(var u=0;u<i.forages.length;u++){var s=i.forages[u];s!==r&&n.push(s._initReady().catch(a))}var c=i.forages.slice(0);return p.all(n).then(function(){return o.db=i.db,y(o)}).then(function(e){return o.db=e,w(o,r._defaultConfig.version)?b(o):e}).then(function(e){o.db=i.db=e,r._dbInfo=o;for(var t=0;t<c.length;t++){var n=c[t];n!==r&&(n._dbInfo.db=o.db,n._dbInfo.version=o.version)}})},_support:function(){try{var e,t;return u&&u.open?(e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code"),(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange):!1}catch(e){return!1}}(),iterate:function(a,e){var u=this,t=new p(function(o,i){u.ready().then(function(){x(u._dbInfo,n,function(e,t){if(e)return i(e);try{var n=t.objectStore(u._dbInfo.storeName).openCursor(),r=1;n.onsuccess=function(){var e,t=n.result;t?(q(e=t.value)&&(e=B(e)),void 0!==(e=a(e,t.key,r++))?o(e):t.continue()):o()},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return h(t,e),t},getItem:function(i,e){var a=this,t=(i=l(i),new p(function(r,o){a.ready().then(function(){x(a._dbInfo,n,function(e,t){if(e)return o(e);try{var n=t.objectStore(a._dbInfo.storeName).get(i);n.onsuccess=function(){var e=n.result;q(e=void 0===e?null:e)&&(e=B(e)),r(e)},n.onerror=function(){o(n.error)}}catch(e){o(e)}})}).catch(o)}));return h(t,e),t},setItem:function(u,t,e){var s=this,n=(u=l(u),new p(function(i,a){var e;s.ready().then(function(){return e=s._dbInfo,"[object Blob]"===M.call(t)?z(e.db).then(function(e){return e?t:(r=t,new p(function(t,e){var n=new FileReader;n.onerror=e,n.onloadend=function(e){e=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:e,type:r.type})},n.readAsBinaryString(r)}));var r}):t}).then(function(o){x(s._dbInfo,d,function(e,t){if(e)return a(e);try{var n=t.objectStore(s._dbInfo.storeName),r=(null===o&&(o=void 0),n.put(o,u));t.oncomplete=function(){i(o=void 0===o?null:o)},t.onabort=t.onerror=function(){var e=r.error||r.transaction.error;a(e)}}catch(e){a(e)}})}).catch(a)}));return h(n,e),n},removeItem:function(i,e){var a=this,t=(i=l(i),new p(function(r,o){a.ready().then(function(){x(a._dbInfo,d,function(e,t){if(e)return o(e);try{var n=t.objectStore(a._dbInfo.storeName).delete(i);t.oncomplete=function(){r()},t.onerror=function(){o(n.error)},t.onabort=function(){var e=n.error||n.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)}));return h(t,e),t},clear:function(e){var i=this,t=new p(function(r,o){i.ready().then(function(){x(i._dbInfo,d,function(e,t){if(e)return o(e);try{var n=t.objectStore(i._dbInfo.storeName).clear();t.oncomplete=function(){r()},t.onabort=t.onerror=function(){var e=n.error||n.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return h(t,e),t},length:function(e){var i=this,t=new p(function(r,o){i.ready().then(function(){x(i._dbInfo,n,function(e,t){if(e)return o(e);try{var n=t.objectStore(i._dbInfo.storeName).count();n.onsuccess=function(){r(n.result)},n.onerror=function(){o(n.error)}}catch(e){o(e)}})}).catch(o)});return h(t,e),t},key:function(u,e){var s=this,t=new p(function(i,a){u<0?i(null):s.ready().then(function(){x(s._dbInfo,n,function(e,t){if(e)return a(e);try{var n=t.objectStore(s._dbInfo.storeName),r=!1,o=n.openKeyCursor();o.onsuccess=function(){var e=o.result;e?0===u||r?i(e.key):(r=!0,e.advance(u)):i(null)},o.onerror=function(){a(o.error)}}catch(e){a(e)}})}).catch(a)});return h(t,e),t},keys:function(e){var a=this,t=new p(function(o,i){a.ready().then(function(){x(a._dbInfo,n,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName).openKeyCursor(),r=[];n.onsuccess=function(){var e=n.result;e?(r.push(e.key),e.continue()):o(r)},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return h(t,e),t},dropInstance:function(a,e){e=c.apply(this,arguments);var t=this.config();return(a="function"!=typeof a&&a||{}).name||(a.name=a.name||t.name,a.storeName=a.storeName||t.storeName),h(t=a.name?(t=a.name===t.name&&this._dbInfo.db?p.resolve(this._dbInfo.db):y(a).then(function(e){var t=f[a.name],n=t.forages;t.db=e;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=e;return e}),a.storeName?t.then(function(e){if(e.objectStoreNames.contains(a.storeName)){var o=e.version+1,r=(g(a),f[a.name]),i=r.forages;e.close();for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=null,n._dbInfo.version=o}return new p(function(t,n){var r=u.open(a.name,o);r.onerror=function(e){r.result.close(),n(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(a.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,v(n._dbInfo)}}).catch(function(e){throw(m(a,e)||p.resolve()).catch(function(){}),e})}}):t.then(function(e){g(a);var n=f[a.name],r=n.forages;e.close();for(var t=0;t<r.length;t++)r[t]._dbInfo.db=null;return new p(function(t,n){var r=u.deleteDatabase(a.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+a.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)v(r[t]._dbInfo)}).catch(function(e){throw(m(a,e)||p.resolve()).catch(function(){}),e})})):p.reject("Invalid arguments"),e),t}};var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W=/^~~local_forage_type~([^~]+)~/,k="__lfsc__:",j=k.length,I="arbf",S="blob",H=j+I.length,J=Object.prototype.toString;function G(e){for(var t,n,r,o,i=.75*e.length,a=e.length,u=0,i=("="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--),new ArrayBuffer(i)),s=new Uint8Array(i),c=0;c<a;c+=4)t=_.indexOf(e[c]),n=_.indexOf(e[c+1]),r=_.indexOf(e[c+2]),o=_.indexOf(e[c+3]),s[u++]=t<<2|n>>4,s[u++]=(15&n)<<4|r>>2,s[u++]=(3&r)<<6|63&o;return i}function A(e){for(var t=new Uint8Array(e),n="",r=0;r<t.length;r+=3)n=(n=(n=(n+=_[t[r]>>2])+_[(3&t[r])<<4|t[r+1]>>4])+_[(15&t[r+1])<<2|t[r+2]>>6])+_[63&t[r+2]];return t.length%3==2?n=n.substring(0,n.length-1)+"=":t.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var E={serialize:function(t,n){var e="";if(t&&(e=J.call(t)),t&&("[object ArrayBuffer]"===e||t.buffer&&"[object ArrayBuffer]"===J.call(t.buffer))){var r,o=k;t instanceof ArrayBuffer?(r=t,o+=I):(r=t.buffer,"[object Int8Array]"===e?o+="si08":"[object Uint8Array]"===e?o+="ui08":"[object Uint8ClampedArray]"===e?o+="uic8":"[object Int16Array]"===e?o+="si16":"[object Uint16Array]"===e?o+="ur16":"[object Int32Array]"===e?o+="si32":"[object Uint32Array]"===e?o+="ui32":"[object Float32Array]"===e?o+="fl32":"[object Float64Array]"===e?o+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(o+A(r))}else if("[object Blob]"===e){o=new FileReader;o.onload=function(){var e="~~local_forage_type~"+t.type+"~"+A(this.result);n(k+S+e)},o.readAsArrayBuffer(t)}else try{n(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t),n(null,e)}},deserialize:function(e){if(e.substring(0,j)!==k)return JSON.parse(e);var t,n=e.substring(H),r=e.substring(j,H),o=(r===S&&W.test(n)&&(t=(e=n.match(W))[1],n=n.substring(e[0].length)),G(n));switch(r){case I:return o;case S:return i([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:G,bufferToString:A};function V(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function $(e,r,o,i,a,u){e.executeSql(o,i,a,function(e,n){n.code===n.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(e,t){t.rows.length?u(e,n):V(e,r,function(){e.executeSql(o,i,a,u)},u)},u):u(e,n)},u)}function Y(a,e,u,s){var c=this,t=(a=l(a),new p(function(o,i){c.ready().then(function(){var n=e=void 0===e?null:e,r=c._dbInfo;r.serializer.serialize(e,function(t,e){e?i(e):r.db.transaction(function(e){$(e,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[a,t],function(){o(n)},function(e,t){i(t)})},function(e){e.code===e.QUOTA_ERR&&(0<s?o(Y.apply(c,[a,n,u,s-1])):i(e))})})}).catch(i)}));return h(t,u),t}var o={_driver:"webSQLStorage",_initStorage:function(e){var r=this,o={db:null};if(e)for(var t in e)o[t]="string"!=typeof e[t]?e[t].toString():e[t];var n=new p(function(t,n){try{o.db=openDatabase(o.name,String(o.version),o.description,o.size)}catch(e){return n(e)}o.db.transaction(function(e){V(e,o,function(){r._dbInfo=o,t()},function(e,t){n(t)})},n)});return o.serializer=E,n},_support:"function"==typeof openDatabase,iterate:function(c,e){var t=this,n=new p(function(s,n){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(e){$(e,u,"SELECT * FROM "+u.storeName,[],function(e,t){for(var n=t.rows,r=n.length,o=0;o<r;o++){var i=n.item(o),a=(a=i.value)&&u.serializer.deserialize(a);if(void 0!==(a=c(a,i.key,o+1)))return void s(a)}s()},function(e,t){n(t)})})}).catch(n)});return h(n,e),n},getItem:function(t,e){var i=this,n=(t=l(t),new p(function(r,o){i.ready().then(function(){var n=i._dbInfo;n.db.transaction(function(e){$(e,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){t=(t=t.rows.length?t.rows.item(0).value:null)&&n.serializer.deserialize(t);r(t)},function(e,t){o(t)})})}).catch(o)}));return h(n,e),n},setItem:function(e,t,n){return Y.apply(this,[e,t,n,1])},removeItem:function(o,e){var i=this,t=(o=l(o),new p(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){$(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[o],function(){n()},function(e,t){r(t)})})}).catch(r)}));return h(t,e),t},clear:function(e){var o=this,t=new p(function(n,r){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){$(e,t,"DELETE FROM "+t.storeName,[],function(){n()},function(e,t){r(t)})})}).catch(r)});return h(t,e),t},length:function(e){var o=this,t=new p(function(n,r){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){$(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){t=t.rows.item(0).c;n(t)},function(e,t){r(t)})})}).catch(r)});return h(t,e),t},key:function(o,e){var i=this,t=new p(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){$(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[o+1],function(e,t){t=t.rows.length?t.rows.item(0).key:null;n(t)},function(e,t){r(t)})})}).catch(r)});return h(t,e),t},keys:function(e){var r=this,t=new p(function(o,n){r.ready().then(function(){var t=r._dbInfo;t.db.transaction(function(e){$(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).key);o(n)},function(e,t){n(t)})})}).catch(n)});return h(t,e),t},dropInstance:function(n,e){e=c.apply(this,arguments);var r=this.config(),o=((n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName),this),t=n.name?new p(function(e){var i,t=n.name===r.name?o._dbInfo.db:openDatabase(n.name,"","",0);n.storeName?e({db:t,storeNames:[n.storeName]}):e((i=t,new p(function(o,n){i.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).name);o({db:i,storeNames:n})},function(e,t){n(t)})},function(e){n(e)})})))}).then(function(a){return new p(function(o,i){a.db.transaction(function(r){for(var e=[],t=0,n=a.storeNames.length;t<n;t++)e.push(function(t){return new p(function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){n(t)})})}(a.storeNames[t]));p.all(e).then(function(){o()}).catch(function(e){i(e)})},function(e){i(e)})})}):p.reject("Invalid arguments");return h(t,e),t}};function Q(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function X(){return!function(){var e="_localforage_support_test";try{localStorage.setItem(e,!0),localStorage.removeItem(e)}catch(e){return 1}}()||0<localStorage.length}function Z(e,t){for(var n,r,o=e.length,i=0;i<o;){if((n=e[i])===(r=t)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return 1;i++}}var ee={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=Q(e,this._defaultConfig),X()?((this._dbInfo=t).serializer=E,p.resolve()):p.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(s,e){var c=this,t=c.ready().then(function(){for(var e=c._dbInfo,t=e.keyPrefix,n=t.length,r=localStorage.length,o=1,i=0;i<r;i++){var a=localStorage.key(i);if(0===a.indexOf(t)){var u=(u=localStorage.getItem(a))&&e.serializer.deserialize(u);if(void 0!==(u=s(u,a.substring(n),o++)))return u}}});return h(t,e),t},getItem:function(n,e){var r=this,t=(n=l(n),r.ready().then(function(){var e=r._dbInfo,t=localStorage.getItem(e.keyPrefix+n);return t=t&&e.serializer.deserialize(t)}));return h(t,e),t},setItem:function(a,e,t){var u=this,n=(a=l(a),u.ready().then(function(){var i=e=void 0===e?null:e;return new p(function(n,r){var o=u._dbInfo;o.serializer.serialize(e,function(e,t){if(t)r(t);else try{localStorage.setItem(o.keyPrefix+a,e),n(i)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}})})}));return h(n,t),n},removeItem:function(t,e){var n=this,r=(t=l(t),n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return h(r,e),r},clear:function(e){var r=this,t=r.ready().then(function(){for(var e=r._dbInfo.keyPrefix,t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}});return h(t,e),t},length:function(e){var t=this.keys().then(function(e){return e.length});return h(t,e),t},key:function(n,e){var r=this,t=r.ready().then(function(){var t,e=r._dbInfo;try{t=localStorage.key(n)}catch(e){t=null}return t=t&&t.substring(e.keyPrefix.length)});return h(t,e),t},keys:function(e){var i=this,t=i.ready().then(function(){for(var e=i._dbInfo,t=localStorage.length,n=[],r=0;r<t;r++){var o=localStorage.key(r);0===o.indexOf(e.keyPrefix)&&n.push(o.substring(e.keyPrefix.length))}return n});return h(t,e),t},dropInstance:function(t,e){e=c.apply(this,arguments),(t="function"!=typeof t&&t||{}).name||(r=this.config(),t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n=this,r=t.name?new p(function(e){t.storeName?e(Q(t,n._defaultConfig)):e(t.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):p.reject("Invalid arguments");return h(r,e),r}},te=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},C={},ne={},T={INDEXEDDB:e,WEBSQL:o,LOCALSTORAGE:ee},e=[T.INDEXEDDB._driver,T.WEBSQL._driver,T.LOCALSTORAGE._driver],O=["dropInstance"],F=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(O),re={description:"",driver:e.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)n.hasOwnProperty(r)&&(te(n[r])?e[r]=n[r].slice():e[r]=n[r])}return e}function L(e){var t,n,r;if(!(this instanceof L))throw new TypeError("Cannot call a class as a function");for(t in T)T.hasOwnProperty(t)&&(r=(n=T[t])._driver,this[t]=r,C[r]||this.defineDriver(n));this._defaultConfig=R({},re),this._config=R({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}L.prototype.config=function(e){if("object"!==(void 0===e?"undefined":N(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},L.prototype.defineDriver=function(d,e,t){var n=new p(function(t,n){try{var r=d._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(d._driver){for(var o=F.concat("_initStorage"),i=0,a=o.length;i<a;i++){var u=o[i];if((!Z(O,u)||d[u])&&"function"!=typeof d[u])return void n(e)}for(var s=0,c=O.length;s<c;s++){var l=O[s];d[l]||(d[l]=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),e=p.reject(e);return h(e,arguments[arguments.length-1]),e}}(l))}var f=function(e){C[r]&&console.info("Redefining LocalForage driver: "+r),C[r]=d,ne[r]=e,t()};"_support"in d?d._support&&"function"==typeof d._support?d._support().then(f,n):f(!!d._support):f(!0)}else n(e)}catch(e){n(e)}});return s(n,e,t),n},L.prototype.driver=function(){return this._driver||null},L.prototype.getDriver=function(e,t,n){e=C[e]?p.resolve(C[e]):p.reject(new Error("Driver not found."));return s(e,t,n),e},L.prototype.getSerializer=function(e){var t=p.resolve(E);return s(t,e),t},L.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return s(n,e,e),n},L.prototype.setDriver=function(e,t,n){var i=this,r=(te(e)||(e=[e]),this._getSupportedDrivers(e));function a(){i._config.driver=i.driver()}function u(e){return i._extend(e),a(),i._ready=i._initStorage(i._config),i._ready}function o(o){return function(){var r=0;return function e(){for(;r<o.length;){var t=o[r];return r++,i._dbInfo=null,i._ready=null,i.getDriver(t).then(u).catch(e)}a();var n=new Error("No available storage method found.");return i._driverSet=p.reject(n),i._driverSet}()}}e=null!==this._driverSet?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=e.then(function(){var e=r[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then(function(e){i._driver=e._driver,a(),i._wrapLibraryMethodsWithReady(),i._initDriver=o(r)})}).catch(function(){a();var e=new Error("No available storage method found.");return i._driverSet=p.reject(e),i._driverSet}),s(this._driverSet,t,n),this._driverSet},L.prototype.supports=function(e){return!!ne[e]},L.prototype._extend=function(e){R(this,e)},L.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},L.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=F.length;e<t;e++)!function(t,n){t[n]=function(){var e=arguments;return t.ready().then(function(){return t[n].apply(t,e)})}}(this,F[e])},L.prototype.createInstance=function(e){return new L(e)};o=new L;D.exports=o},{3:3}]},{},[4])(4)})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],63:[function(e,t,n){var r,o;r=this,o=function(){"use strict";var I=function(){return(I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function $(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var C="",e=(t.prototype.next=function(){var e=this.dive();return this.backtrack(),e},t.prototype.dive=function(){var e,t;return 0===this._path.length?{done:!0,value:void 0}:(t=(e=n(this._path)).node,e=e.keys,n(e)===C?{done:!1,value:this.result()}:(t=t.get(n(e)),this._path.push({node:t,keys:Array.from(t.keys())}),this.dive()))},t.prototype.backtrack=function(){var e;0!==this._path.length&&((e=n(this._path).keys).pop(),0<e.length||(this._path.pop(),this.backtrack()))},t.prototype.key=function(){return this.set._prefix+this._path.map(function(e){e=e.keys;return n(e)}).filter(function(e){return e!==C}).join("")},t.prototype.value=function(){return n(this._path).node.get(C)},t.prototype.result=function(){switch(this._type){case"VALUES":return this.value();case"KEYS":return this.key();default:return[this.key(),this.value()]}},t.prototype[Symbol.iterator]=function(){return this},t);function t(e,t){var n=e._tree,r=Array.from(n.keys());this.set=e,this._type=t,this._path=0<r.length?[{node:n,keys:r}]:[]}var n=function(e){return e[e.length-1]},T=function(e,t,n,r,o,i,a,u){var s,c,l=i*a;try{e:for(var f=$(e.keys()),d=f.next();!d.done;d=f.next()){var p=d.value;if(p===C){var h=o[l-1];h<=n&&r.set(u,[e.get(p),h])}else{for(var g=i,v=0;v<p.length;++v,++g){for(var m=p[v],y=a*g,b=y-a,w=o[y],x=Math.max(0,g-n-1),_=Math.min(a-1,g+n),k=x;k<_;++k){var j=m!==t[k],I=o[b+k]+ +j,S=o[b+k+1]+1,A=o[y+k]+1,E=o[y+k+1]=Math.min(I,S,A);E<w&&(w=E)}if(n<w)continue e}T(e.get(p),t,n,r,o,g,a,u+p)}}}catch(e){s={error:e}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(s)throw s.error}}},S=(f.prototype.atPrefix=function(e){var t,n;if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");var r=A(d(this._tree,e.slice(this._prefix.length)),2),o=r[0],r=r[1];if(void 0===o){var r=A(p(r),2),i=r[0],a=r[1];try{for(var u=$(i.keys()),s=u.next();!s.done;s=u.next()){var c,l=s.value;if(l!==C&&l.startsWith(a))return(c=new Map).set(l.slice(a.length),i.get(l)),new f(c,e)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}}return new f(o,e)},f.prototype.clear=function(){this._size=void 0,this._tree.clear()},f.prototype.delete=function(e){return this._size=void 0,i(this._tree,e)},f.prototype.entries=function(){return new e(this,"ENTRIES")},f.prototype.forEach=function(e){var t,n;try{for(var r=$(this),o=r.next();!o.done;o=r.next()){var i=A(o.value,2);e(i[0],i[1],this)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},f.prototype.fuzzyGet=function(e,t){var n=this._tree,r=new Map;if(void 0!==e){for(var o=e.length+1,i=o+t,a=new Uint8Array(i*o).fill(t+1),u=0;u<o;++u)a[u]=u;for(var s=1;s<i;++s)a[s*o]=s;T(n,e,t,r,a,1,o,"")}return r},f.prototype.get=function(e){e=u(this._tree,e);return void 0!==e?e.get(C):void 0},f.prototype.has=function(e){e=u(this._tree,e);return void 0!==e&&e.has(C)},f.prototype.keys=function(){return new e(this,"KEYS")},f.prototype.set=function(e,t){if("string"!=typeof e)throw new Error("key must be a string");return this._size=void 0,o(this._tree,e).set(C,t),this},Object.defineProperty(f.prototype,"size",{get:function(){if(!this._size){this._size=0;for(var e=this.entries();!e.next().done;)this._size+=1}return this._size},enumerable:!1,configurable:!0}),f.prototype.update=function(e,t){if("string"!=typeof e)throw new Error("key must be a string");this._size=void 0;e=o(this._tree,e);return e.set(C,t(e.get(C))),this},f.prototype.fetch=function(e,t){if("string"!=typeof e)throw new Error("key must be a string");this._size=void 0;var e=o(this._tree,e),n=e.get(C);return void 0===n&&e.set(C,n=t()),n},f.prototype.values=function(){return new e(this,"VALUES")},f.prototype[Symbol.iterator]=function(){return this.entries()},f.from=function(e){var t,n,r=new f;try{for(var o=$(e),i=o.next();!i.done;i=o.next()){var a=A(i.value,2),u=a[0],s=a[1];r.set(u,s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},f.fromObject=function(e){return f.from(Object.entries(e))},f);function f(e,t){void 0===e&&(e=new Map),void 0===t&&(t=""),this._size=void 0,this._tree=e,this._prefix=t}var r,d=function(e,t,n){var r,o;if(void 0===n&&(n=[]),0===t.length||null==e)return[e,n];try{for(var i=$(e.keys()),a=i.next();!a.done;a=i.next()){var u=a.value;if(u!==C&&t.startsWith(u))return n.push([e,u]),d(e.get(u),t.slice(u.length),n)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return n.push([e,t]),d(void 0,"",n)},u=function(e,t){var n,r;if(0===t.length||null==e)return e;try{for(var o=$(e.keys()),i=o.next();!i.done;i=o.next()){var a=i.value;if(a!==C&&t.startsWith(a))return u(e.get(a),t.slice(a.length))}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},o=function(e,t){var n,r,o=t.length;e:for(var i=0;e&&i<o;){try{n=void 0;for(var a=$(e.keys()),u=a.next();!u.done;u=a.next()){var s=u.value;if(s!==C&&t[i]===s[0]){for(var c=Math.min(o-i,s.length),l=1;l<c&&t[i+l]===s[l];)++l;var f,d=e.get(s);e=l===s.length?d:((f=new Map).set(s.slice(l),d),e.set(t.slice(i,i+l),f),e.delete(s),f),i+=l;continue e}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}var p=new Map;return e.set(t.slice(i),p),p}return e},i=function(e,t){var n,e=A(d(e,t),2),t=e[0],e=e[1];void 0!==t&&(t.delete(C),0===t.size?a(e):1===t.size&&(n=(t=A(t.entries().next().value,2))[0],t=t[1],s(e,n,t)))},a=function(e){var t,n;0!==e.length&&(t=(n=A(p(e),2))[0],n=n[1],t.delete(n),0===t.size?a(e.slice(0,-1)):1===t.size&&(t=(n=A(t.entries().next().value,2))[0],n=n[1],t!==C&&s(e.slice(0,-1),t,n)))},s=function(e,t,n){var r;0!==e.length&&(r=(e=A(p(e),2))[0],e=e[1],r.set(e+t,n),r.delete(e))},p=function(e){return e[e.length-1]},c=(E.prototype.add=function(e){var t,n,r,o,i=this._options,a=i.extractField,u=i.tokenize,s=i.processTerm,c=i.fields,i=i.idField,l=a(e,i);if(null==l)throw new Error('MiniSearch: document does not have ID field "'.concat(i,'"'));var f=this.addDocumentId(l);this.saveStoredFields(f,e);try{for(var d=$(c),p=d.next();!p.done;p=d.next()){var h=p.value,g=a(e,h);if(null!=g){var v=u(g.toString(),h),m=this._fieldIds[h],y=new Set(v).size;this.addFieldLength(f,m,this._documentCount-1,y);try{r=void 0;for(var b=$(v),w=b.next();!w.done;w=b.next()){var x=s(w.value,h);x&&this.addTerm(m,f,x)}}catch(e){r={error:e}}finally{try{w&&!w.done&&(o=b.return)&&o.call(b)}finally{if(r)throw r.error}}}}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}},E.prototype.addAll=function(e){var t,n;try{for(var r=$(e),o=r.next();!o.done;o=r.next()){var i=o.value;this.add(i)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},E.prototype.addAllAsync=function(e,t){var o=this,t=(t=void 0===t?{}:t).chunkSize,i=void 0===t?10:t,t={chunk:[],promise:Promise.resolve()},e=e.reduce(function(e,t,n){var r=e.chunk,e=e.promise;return r.push(t),(n+1)%i==0?{chunk:[],promise:e.then(function(){return new Promise(function(e){return setTimeout(e,0)})}).then(function(){return o.addAll(r)})}:{chunk:r,promise:e}},t),n=e.chunk;return e.promise.then(function(){return o.addAll(n)})},E.prototype.remove=function(e){var t,n,r,o,i,a,u=this._options,s=u.tokenize,c=u.processTerm,l=u.extractField,f=u.fields,u=u.idField,d=l(e,u);if(null==d)throw new Error('MiniSearch: document does not have ID field "'.concat(u,'"'));try{for(var p=$(this._documentIds),h=p.next();!h.done;h=p.next()){var g=A(h.value,2),v=g[0];if(d===g[1]){try{r=void 0;for(var m=$(f),y=m.next();!y.done;y=m.next()){var b=y.value,w=l(e,b);if(null!=w){var x=s(w.toString(),b),_=this._fieldIds[b],k=new Set(x).size;this.removeFieldLength(v,_,this._documentCount,k);try{i=void 0;for(var j=$(x),I=j.next();!I.done;I=j.next()){var S=c(I.value,b);S&&this.removeTerm(_,v,S)}}catch(e){i={error:e}}finally{try{I&&!I.done&&(a=j.return)&&a.call(j)}finally{if(i)throw i.error}}}}}catch(e){r={error:e}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(r)throw r.error}}return this._storedFields.delete(v),this._documentIds.delete(v),this._fieldLength.delete(v),void--this._documentCount}}}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}throw new Error("MiniSearch: cannot remove document with ID ".concat(d,": it is not in the index"))},E.prototype.removeAll=function(e){var t,n;if(e)try{for(var r=$(e),o=r.next();!o.done;o=r.next()){var i=o.value;this.remove(i)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}else{if(0<arguments.length)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new S,this._documentCount=0,this._documentIds=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}},E.prototype.search=function(e,t){var n,r,e=this.executeQuery(e,t=void 0===t?{}:t),o=[];try{for(var i=$(e),a=i.next();!a.done;a=i.next()){var u=A(a.value,2),s=u[0],c=u[1],l=c.score,f=c.terms,d=c.match,p=f.length,h={id:this._documentIds.get(s),score:l*p,terms:Object.keys(d),match:d};Object.assign(h,this._storedFields.get(s)),null!=t.filter&&!t.filter(h)||o.push(h)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o.sort(w),o},E.prototype.autoSuggest=function(e,t){void 0===t&&(t={}),t=I(I({},this._options.autoSuggestOptions),t);var n,r,o,i,a=new Map;try{for(var u=$(this.search(e,t)),s=u.next();!s.done;s=u.next()){var c=s.value,l=c.score,f=(y=c.terms).join(" ");null!=(v=a.get(f))?(v.score+=l,v.count+=1):a.set(f,{score:l,terms:y,count:1})}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}var d=[];try{for(var p=$(a),h=p.next();!h.done;h=p.next()){var g=A(h.value,2),v=g[0],m=g[1],l=m.score,y=m.terms,b=m.count;d.push({suggestion:v,terms:y,score:l/b})}}catch(e){o={error:e}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}return d.sort(w),d},Object.defineProperty(E.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),E.loadJSON=function(e,t){if(null==t)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return E.loadJS(JSON.parse(e),t)},E.getDefault=function(e){if(g.hasOwnProperty(e))return O(g,e);throw new Error('MiniSearch: unknown option "'.concat(e,'"'))},E.loadJS=function(e,t){var n,r,o,i,a=e.index,u=e.documentCount,s=e.nextId,c=e.documentIds,l=e.fieldIds,f=e.fieldLength,d=e.averageFieldLength,p=e.storedFields,h=e.serializationVersion;if(1!==h&&2!==h)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var g=new E(t);g._documentCount=u,g._nextId=s,g._documentIds=D(c),g._fieldIds=l,g._fieldLength=D(f),g._avgFieldLength=d,g._storedFields=D(p),g._index=new S;try{for(var v=$(a),m=v.next();!m.done;m=v.next()){var y=A(m.value,2),b=y[0],w=y[1],x=new Map;try{o=void 0;for(var _=$(Object.keys(w)),k=_.next();!k.done;k=_.next()){var j=k.value,I=w[j];1===h&&(I=I.ds),x.set(parseInt(j,10),D(I))}}catch(e){o={error:e}}finally{try{k&&!k.done&&(i=_.return)&&i.call(_)}finally{if(o)throw o.error}}g._index.set(b,x)}}catch(e){n={error:e}}finally{try{m&&!m.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}return g},E.prototype.executeQuery=function(e,t){var n,r,o,i,a,u,s=this;return void 0===t&&(t={}),"string"!=typeof e?(n=I(I(I({},t),e),{queries:void 0}),r=e.queries.map(function(e){return s.executeQuery(e,n)}),this.combineResults(r,e.combineWith)):(i=(r=this._options).tokenize,u=r.processTerm,r=r.searchOptions,i=(o=I(I({tokenize:i,processTerm:u},r),t)).tokenize,a=o.processTerm,u=i(e).map(function(e){return a(e)}).filter(function(e){return!!e}).map(h(o)).map(function(e){return s.executeQuerySpec(e,o)}),this.combineResults(u,o.combineWith))},E.prototype.executeQuerySpec=function(e,t){var n,r,o,i,a,u,t=I(I({},this._options.searchOptions),t),s=(t.fields||this._options.fields).reduce(function(e,t){var n;return I(I({},e),((n={})[t]=O(e,t)||1,n))},t.boost||{}),c=t.boostDocument,l=t.weights,t=t.maxFuzzy,l=I(I({},R.weights),l),f=l.fuzzy,d=l.prefix,l=this._index.get(e.term),p=this.termResults(e.term,e.term,1,l,s,c);if(e.prefix&&(a=this._index.atPrefix(e.term)),!e.fuzzy||(t=(l=!0===e.fuzzy?.2:e.fuzzy)<1?Math.min(t,Math.round(e.term.length*l)):l)&&(u=this._index.fuzzyGet(e.term,t)),a)try{for(var h=$(a),g=h.next();!g.done;g=h.next()){var v=A(g.value,2),m=v[0],y=v[1];(x=m.length-e.term.length)&&(null!=u&&u.delete(m),_=d*m.length/(m.length+.3*x),this.termResults(e.term,m,_,y,s,c,p))}}catch(e){n={error:e}}finally{try{g&&!g.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}if(u)try{for(var b=$(u.keys()),w=b.next();!w.done;w=b.next()){var x,_,m=w.value,k=A(u.get(m),2),j=k[0];(x=k[1])&&(_=f*m.length/(m.length+x),this.termResults(e.term,m,_,j,s,c,p))}}catch(e){o={error:e}}finally{try{w&&!w.done&&(i=b.return)&&i.call(b)}finally{if(o)throw o.error}}return p},E.prototype.combineResults=function(e,t){return void 0===t&&(t="or"),0!==e.length&&(t=t.toLowerCase(),e.reduce(l[t]))||new Map},E.prototype.toJSON=function(){var t,e,n,r,o=[];try{for(var i=$(this._index),a=i.next();!a.done;a=i.next()){var u=A(a.value,2),s=u[0],c=u[1],l={};try{n=void 0;for(var f=$(c),d=f.next();!d.done;d=f.next()){var p=A(d.value,2),h=p[0],g=p[1];l[h]=Object.fromEntries(g)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}o.push([s,l])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),index:o,serializationVersion:2}},E.prototype.termResults=function(e,t,n,r,o,i,a){var u,s,c,l,f;if(void 0===a&&(a=new Map),null!=r)try{for(var d=$(Object.keys(o)),p=d.next();!p.done;p=d.next()){var h=p.value,g=o[h],v=this._fieldIds[h],m=r.get(v);if(null!=m){var y=m.size,b=this._avgFieldLength[v];try{c=void 0;for(var w=$(m.keys()),x=w.next();!x.done;x=w.next()){var _,k,j,I,S,A=x.value,E=i?i(this._documentIds.get(A),t):1;E&&(_=m.get(A),k=this._fieldLength.get(A)[v],j=n*g*E*F(_,y,this._documentCount,k,b),(I=a.get(A))?(I.score+=j,L(I.terms,e),(S=O(I.match,t))?S.push(h):I.match[t]=[h]):a.set(A,{score:j,terms:[e],match:((f={})[t]=[h],f)}))}}catch(e){c={error:e}}finally{try{x&&!x.done&&(l=w.return)&&l.call(w)}finally{if(c)throw c.error}}}}}catch(e){u={error:e}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(u)throw u.error}}return a},E.prototype.addTerm=function(e,t,n){var n=this._index.fetch(n,y),r=n.get(e);null==r?((r=new Map).set(t,1),n.set(e,r)):(n=r.get(t),r.set(t,(n||0)+1))},E.prototype.removeTerm=function(e,t,n){var r,o;this._index.has(n)?(null==(o=(r=this._index.fetch(n,y)).get(e))||null==o.get(t)?this.warnDocumentChanged(t,e,n):o.get(t)<=1?o.size<=1?r.delete(e):o.delete(t):o.set(t,o.get(t)-1),0===this._index.get(n).size&&this._index.delete(n)):this.warnDocumentChanged(t,e,n)},E.prototype.warnDocumentChanged=function(e,t,n){var r,o;if(null!=console&&null!=console.warn)try{for(var i=$(Object.keys(this._fieldIds)),a=i.next();!a.done;a=i.next()){var u=a.value;if(this._fieldIds[u]===t)return void console.warn("MiniSearch: document with ID ".concat(this._documentIds.get(e),' has changed before removal: term "').concat(n,'" was not present in field "').concat(u,'". Removing a document after it has changed can corrupt the index!'))}}catch(e){r={error:e}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},E.prototype.addDocumentId=function(e){var t=this._nextId;return this._documentIds.set(t,e),this._documentCount+=1,this._nextId+=1,t},E.prototype.addFields=function(e){for(var t=0;t<e.length;t++)this._fieldIds[e[t]]=t},E.prototype.addFieldLength=function(e,t,n,r){var o=this._fieldLength.get(e),e=(null==o&&this._fieldLength.set(e,o=[]),o[t]=r,this._avgFieldLength[t]||0);this._avgFieldLength[t]=(e*n+r)/(n+1)},E.prototype.removeFieldLength=function(e,t,n,r){r=this._avgFieldLength[t]*n-r;this._avgFieldLength[t]=r/(n-1)},E.prototype.saveStoredFields=function(e,t){var n,r,o=this._options,i=o.storeFields,a=o.extractField;if(null!=i&&0!==i.length){var u=this._storedFields.get(e);null==u&&this._storedFields.set(e,u={});try{for(var s=$(i),c=s.next();!c.done;c=s.next()){var l=c.value,f=a(t,l);void 0!==f&&(u[l]=f)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},E);function E(e){if(null==(null==e?void 0:e.fields))throw new Error('MiniSearch: option "fields" must be provided');this._options=I(I(I({},g),e),{searchOptions:I(I({},R),e.searchOptions||{}),autoSuggestOptions:I(I({},v),e.autoSuggestOptions||{})}),this._index=new S,this._documentCount=0,this._documentIds=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this.addFields(this._options.fields)}var O=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},l=((r={}).or=function(e,t){var n,r;try{for(var o=$(t.keys()),i=o.next();!i.done;i=o.next()){var a,u,s,c,l=i.value,f=e.get(l);null==f?e.set(l,t.get(l)):(u=(a=t.get(l)).score,s=a.terms,c=a.match,f.score=f.score+u,f.match=Object.assign(f.match,c),m(f.terms,s))}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return e},r.and=function(e,t){var n,r,o=new Map;try{for(var i=$(t.keys()),a=i.next();!a.done;a=i.next()){var u,s,c,l,f=a.value,d=e.get(f);null!=d&&(s=(u=t.get(f)).score,c=u.terms,l=u.match,m(d.terms,c),o.set(f,{score:d.score+s,terms:d.terms,match:Object.assign(d.match,l)}))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},r.and_not=function(e,t){var n,r;try{for(var o=$(t.keys()),i=o.next();!i.done;i=o.next()){var a=i.value;e.delete(a)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return e},r),F=function(e,t,n,r,o){return Math.log(1+(n-t+.5)/(t+.5))*(.5+2.2*e/(e+1.2*(1-.7+.7*r/o)))},h=function(r){return function(e,t,n){return{term:e,fuzzy:"function"==typeof r.fuzzy?r.fuzzy(e,t,n):r.fuzzy||!1,prefix:"function"==typeof r.prefix?r.prefix(e,t,n):!0===r.prefix}}},g={idField:"id",extractField:function(e,t){return e[t]},tokenize:function(e,t){return e.split(b)},processTerm:function(e,t){return e.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},R={combineWith:"or",prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375}},v={combineWith:"and",prefix:function(e,t,n){return t===n.length-1}},L=function(e,t){e.includes(t)||e.push(t)},m=function(e,t){var n,r;try{for(var o=$(t),i=o.next();!i.done;i=o.next()){var a=i.value;e.includes(a)||e.push(a)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},w=function(e,t){e=e.score;return t.score-e},y=function(){return new Map},D=function(e){var t,n,r=new Map;try{for(var o=$(Object.keys(e)),i=o.next();!i.done;i=o.next()){var a=i.value;r.set(parseInt(a,10),e[a])}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},b=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;return c},"object"==typeof n&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):(r="undefined"!=typeof globalThis?globalThis:r||self).MiniSearch=o()},{}],64:[function(e,o,i){!function(Dt){!function(){var e,t,n,r;e=this,t=function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof Dt&&Dt.global===Dt&&Dt||Function("return this")()||{},r=Array.prototype,D=Object.prototype,P="undefined"!=typeof Symbol?Symbol.prototype:null,N=r.push,s=r.slice,f=D.toString,M=D.hasOwnProperty,t="undefined"!=typeof ArrayBuffer,n="undefined"!=typeof DataView,z=Array.isArray,B=Object.keys,q=Object.create,U=t&&ArrayBuffer.isView,K=isNaN,W=isFinite,H=!{toString:null}.propertyIsEnumerable("toString"),J=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],G=Math.pow(2,53)-1;function l(o,i){return i=null==i?o.length-1:+i,function(){for(var e=Math.max(arguments.length-i,0),t=Array(e),n=0;n<e;n++)t[n]=arguments[n+i];switch(i){case 0:return o.call(this,t);case 1:return o.call(this,arguments[0],t);case 2:return o.call(this,arguments[0],arguments[1],t)}for(var r=Array(i+1),n=0;n<i;n++)r[n]=arguments[n];return r[i]=t,o.apply(this,r)}}function i(e){var t=typeof e;return"function"==t||"object"==t&&!!e}function V(e){return void 0===e}function Y(e){return!0===e||!1===e||"[object Boolean]"===f.call(e)}function o(e){var t="[object "+e+"]";return function(e){return f.call(e)===t}}var Q=o("String"),X=o("Number"),a=o("Date"),Z=o("RegExp"),ee=o("Error"),te=o("Symbol"),ne=o("ArrayBuffer"),u=o("Function"),e=e.document&&e.document.childNodes,d=u="function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof e?function(e){return"function"==typeof e||!1}:u,e=o("Object"),re=n&&e(new DataView(new ArrayBuffer(8))),u="undefined"!=typeof Map&&e(new Map),n=o("DataView");var p=re?function(e){return null!=e&&d(e.getInt8)&&ne(e.buffer)}:n,h=z||o("Array");function g(e,t){return null!=e&&M.call(e,t)}var oe=o("Arguments"),ie=(!function(){oe(arguments)||(oe=function(e){return g(e,"callee")})}(),oe);function ae(e){return X(e)&&K(e)}function ue(e){return function(){return e}}function se(t){return function(e){e=t(e);return"number"==typeof e&&0<=e&&e<=G}}function ce(t){return function(e){return null==e?void 0:e[t]}}var v=ce("byteLength"),le=se(v),fe=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var de=t?function(e){return U?U(e)&&!p(e):le(e)&&fe.test(f.call(e))}:ue(!1),m=ce("length");function pe(e,t){t=function(t){for(var n={},e=t.length,r=0;r<e;++r)n[t[r]]=!0;return{contains:function(e){return!0===n[e]},push:function(e){return n[e]=!0,t.push(e)}}}(t);var n=J.length,r=e.constructor,o=d(r)&&r.prototype||D,i="constructor";for(g(e,i)&&!t.contains(i)&&t.push(i);n--;)(i=J[n])in e&&e[i]!==o[i]&&!t.contains(i)&&t.push(i)}function y(e){if(!i(e))return[];if(B)return B(e);var t,n=[];for(t in e)g(e,t)&&n.push(t);return H&&pe(e,n),n}function he(e,t){var n=y(t),r=n.length;if(null==e)return!r;for(var o=Object(e),i=0;i<r;i++){var a=n[i];if(t[a]!==o[a]||!(a in o))return!1}return!0}function b(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)}function ge(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,v(e))}b.VERSION="1.13.6",b.prototype.valueOf=b.prototype.toJSON=b.prototype.value=function(){return this._wrapped},b.prototype.toString=function(){return String(this._wrapped)};var ve="[object DataView]";function me(e,t,n,r){var o;return e===t?0!==e||1/e==1/t:null!=e&&null!=t&&(e!=e?t!=t:("function"==(o=typeof e)||"object"==o||"object"==typeof t)&&function e(t,n,r,o){t instanceof b&&(t=t._wrapped);n instanceof b&&(n=n._wrapped);var i=f.call(t);if(i!==f.call(n))return!1;if(re&&"[object Object]"==i&&p(t)){if(!p(n))return!1;i=ve}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return P.valueOf.call(t)===P.valueOf.call(n);case"[object ArrayBuffer]":case ve:return e(ge(t),ge(n),r,o)}i="[object Array]"===i;if(!i&&de(t)){var a=v(t);if(a!==v(n))return!1;if(t.buffer===n.buffer&&t.byteOffset===n.byteOffset)return!0;i=!0}if(!i){if("object"!=typeof t||"object"!=typeof n)return!1;var a=t.constructor,u=n.constructor;if(a!==u&&!(d(a)&&a instanceof a&&d(u)&&u instanceof u)&&"constructor"in t&&"constructor"in n)return!1}r=r||[];o=o||[];var s=r.length;for(;s--;)if(r[s]===t)return o[s]===n;r.push(t);o.push(n);if(i){if((s=t.length)!==n.length)return!1;for(;s--;)if(!me(t[s],n[s],r,o))return!1}else{var c,l=y(t);if(s=l.length,y(n).length!==s)return!1;for(;s--;)if(c=l[s],!g(n,c)||!me(t[c],n[c],r,o))return!1}r.pop();o.pop();return!0}(e,t,n,r))}function c(e){if(!i(e))return[];var t,n=[];for(t in e)n.push(t);return H&&pe(e,n),n}function ye(r){var o=m(r);return function(e){if(null==e)return!1;var t=c(e);if(m(t))return!1;for(var n=0;n<o;n++)if(!d(e[r[n]]))return!1;return r!==we||!d(e[be])}}var be="forEach",e=["clear","delete"],n=["get","has","set"],z=e.concat(be,n),we=e.concat(n),t=["add"].concat(e,be,"has"),n=u?ye(z):o("Map"),e=u?ye(we):o("WeakMap"),z=u?ye(t):o("Set"),u=o("WeakSet");function w(e){for(var t=y(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e[t[o]];return r}function xe(e){for(var t={},n=y(e),r=0,o=n.length;r<o;r++)t[e[n[r]]]=n[r];return t}function _e(e){var t,n=[];for(t in e)d(e[t])&&n.push(t);return n.sort()}function ke(s,c){return function(e){var t=arguments.length;if(c&&(e=Object(e)),!(t<2||null==e))for(var n=1;n<t;n++)for(var r=arguments[n],o=s(r),i=o.length,a=0;a<i;a++){var u=o[a];c&&void 0!==e[u]||(e[u]=r[u])}return e}}var je=ke(c),x=ke(y),Ie=ke(c,!0);function Se(e){var t;return i(e)?q?q(e):((t=function(){}).prototype=e,e=new t,t.prototype=null,e):{}}function Ae(e){return h(e)?e:[e]}function _(e){return b.toPath(e)}function Ee(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function $e(e,t,n){e=Ee(e,_(t));return V(e)?n:e}function Ce(e){return e}function k(t){return t=x({},t),function(e){return he(e,t)}}function Te(t){return t=_(t),function(e){return Ee(e,t)}}function j(o,i,e){if(void 0===i)return o;switch(null==e?3:e){case 1:return function(e){return o.call(i,e)};case 3:return function(e,t,n){return o.call(i,e,t,n)};case 4:return function(e,t,n,r){return o.call(i,e,t,n,r)}}return function(){return o.apply(i,arguments)}}function Oe(e,t,n){return null==e?Ce:d(e)?j(e,t,n):(i(e)&&!h(e)?k:Te)(e)}function Fe(e,t){return Oe(e,t,1/0)}function I(e,t,n){return b.iteratee!==Fe?b.iteratee(e,t):Oe(e,t,n)}function Re(){}function Le(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}b.toPath=Ae,b.iteratee=Fe;var S=Date.now||function(){return(new Date).getTime()};function De(t){function n(e){return t[e]}var e="(?:"+y(t).join("|")+")",r=RegExp(e),o=RegExp(e,"g");return function(e){return r.test(e=null==e?"":""+e)?e.replace(o,n):e}}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Pe=De(t),t=De(xe(t)),Ne=b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Me=/(.)^/,ze={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Be=/\\|'|\r|\n|\u2028|\u2029/g;function qe(e){return"\\"+ze[e]}var Ue=/^\s*(\w|\$)+\s*$/;var Ke=0;function We(e,t,n,r,o){return r instanceof t?(r=Se(e.prototype),i(t=e.apply(r,o))?t:r):e.apply(n,o)}var A=l(function(o,i){function a(){for(var e=0,t=i.length,n=Array(t),r=0;r<t;r++)n[r]=i[r]===u?arguments[e++]:i[r];for(;e<arguments.length;)n.push(arguments[e++]);return We(o,a,this,this,n)}var u=A.placeholder;return a}),He=(A.placeholder=b,l(function(t,n,r){var o;if(d(t))return o=l(function(e){return We(t,o,n,this,r.concat(e))});throw new TypeError("Bind must be called on a function")})),E=se(m);function $(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var o=r.length,i=0,a=m(e);i<a;i++){var u=e[i];if(E(u)&&(h(u)||ie(u)))if(1<t)$(u,t-1,n,r),o=r.length;else for(var s=0,c=u.length;s<c;)r[o++]=u[s++];else n||(r[o++]=u)}return r}var Je=l(function(e,t){var n=(t=$(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=He(e[r],e)}return e});var Ge=l(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),Ve=A(Ge,b,1);function Ye(e){return function(){return!e.apply(this,arguments)}}function Qe(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var Xe=A(Qe,2);function Ze(e,t,n){t=I(t,n);for(var r,o=y(e),i=0,a=o.length;i<a;i++)if(t(e[r=o[i]],r,e))return r}function et(i){return function(e,t,n){t=I(t,n);for(var r=m(e),o=0<i?0:r-1;0<=o&&o<r;o+=i)if(t(e[o],o,e))return o;return-1}}var tt=et(1),nt=et(-1);function rt(e,t,n,r){for(var o=(n=I(n,r,1))(t),i=0,a=m(e);i<a;){var u=Math.floor((i+a)/2);n(e[u])<o?i=u+1:a=u}return i}function ot(i,a,u){return function(e,t,n){var r=0,o=m(e);if("number"==typeof n)0<i?r=0<=n?n:Math.max(n+o,r):o=0<=n?Math.min(n+1,o):n+o+1;else if(u&&n&&o)return e[n=u(e,t)]===t?n:-1;if(t!=t)return 0<=(n=a(s.call(e,r,o),ae))?n+r:-1;for(n=0<i?r:o-1;0<=n&&n<o;n+=i)if(e[n]===t)return n;return-1}}var it=ot(1,tt,rt),at=ot(-1,nt);function ut(e,t,n){t=(E(e)?tt:Ze)(e,t,n);if(void 0!==t&&-1!==t)return e[t]}function C(e,t,n){if(t=j(t,n),E(e))for(o=0,i=e.length;o<i;o++)t(e[o],o,e);else for(var r=y(e),o=0,i=r.length;o<i;o++)t(e[r[o]],r[o],e);return e}function T(e,t,n){t=I(t,n);for(var r=!E(e)&&y(e),o=(r||e).length,i=Array(o),a=0;a<o;a++){var u=r?r[a]:a;i[a]=t(e[u],u,e)}return i}function st(d){return function(e,t,n,r){var o=3<=arguments.length,i=e,a=j(t,r,4),u=n,s=!E(i)&&y(i),c=(s||i).length,l=0<d?0:c-1;for(o||(u=i[s?s[l]:l],l+=d);0<=l&&l<c;l+=d){var f=s?s[l]:l;u=a(u,i[f],f,i)}return u}}var ct=st(1),lt=st(-1);function O(e,r,t){var o=[];return r=I(r,t),C(e,function(e,t,n){r(e,t,n)&&o.push(e)}),o}function ft(e,t,n){t=I(t,n);for(var r=!E(e)&&y(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(!t(e[a],a,e))return!1}return!0}function dt(e,t,n){t=I(t,n);for(var r=!E(e)&&y(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(t(e[a],a,e))return!0}return!1}function F(e,t,n,r){return E(e)||(e=w(e)),0<=it(e,t,n="number"==typeof n&&!r?n:0)}var pt=l(function(e,n,r){var o,i;return d(n)?i=n:(n=_(n),o=n.slice(0,-1),n=n[n.length-1]),T(e,function(e){var t=i;if(!t){if(null==(e=o&&o.length?Ee(e,o):e))return;t=e[n]}return null==t?t:t.apply(e,r)})});function ht(e,t){return T(e,Te(t))}function gt(e,r,t){var n,o,i=-1/0,a=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof e[0]&&null!=e)for(var u=0,s=(e=E(e)?e:w(e)).length;u<s;u++)null!=(n=e[u])&&i<n&&(i=n);else r=I(r,t),C(e,function(e,t,n){o=r(e,t,n),(a<o||o===-1/0&&i===-1/0)&&(i=e,a=o)});return i}var vt=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function mt(e){return e?h(e)?s.call(e):Q(e)?e.match(vt):E(e)?T(e,Ce):w(e):[]}function yt(e,t,n){if(null==t||n)return(e=E(e)?e:w(e))[Le(e.length-1)];for(var r=mt(e),n=m(r),o=(t=Math.max(Math.min(t,n),0),n-1),i=0;i<t;i++){var a=Le(i,o),u=r[i];r[i]=r[a],r[a]=u}return r.slice(0,t)}function R(i,t){return function(n,r,e){var o=t?[[],[]]:{};return r=I(r,e),C(n,function(e,t){t=r(e,t,n);i(o,e,t)}),o}}var bt=R(function(e,t,n){g(e,n)?e[n].push(t):e[n]=[t]}),wt=R(function(e,t,n){e[n]=t}),xt=R(function(e,t,n){g(e,n)?e[n]++:e[n]=1}),_t=R(function(e,t,n){e[n?0:1].push(t)},!0);function kt(e,t,n){return t in n}var jt=l(function(e,t){var n={},r=t[0];if(null!=e){d(r)?(1<t.length&&(r=j(r,t[1])),t=c(e)):(r=kt,t=$(t,!1,!1),e=Object(e));for(var o=0,i=t.length;o<i;o++){var a=t[o],u=e[a];r(u,a,e)&&(n[a]=u)}}return n}),It=l(function(e,n){var t,r=n[0];return d(r)?(r=Ye(r),1<n.length&&(t=n[1])):(n=T($(n,!1,!1),String),r=function(e,t){return!F(n,t)}),jt(e,r,t)});function St(e,t,n){return s.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function At(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:St(e,e.length-t)}function L(e,t,n){return s.call(e,null==t||n?1:t)}var Et=l(function(e,t){return t=$(t,!0,!0),O(e,function(e){return!F(t,e)})}),$t=l(function(e,t){return Et(e,t)});function Ct(e,t,n,r){Y(t)||(r=n,n=t,t=!1),null!=n&&(n=I(n,r));for(var o=[],i=[],a=0,u=m(e);a<u;a++){var s=e[a],c=n?n(s,a,e):s;t&&!n?(a&&i===c||o.push(s),i=c):n?F(i,c)||(i.push(c),o.push(s)):F(o,s)||o.push(s)}return o}var Tt=l(function(e){return Ct($(e,!0,!0))});function Ot(e){for(var t=e&&gt(e,m).length||0,n=Array(t),r=0;r<t;r++)n[r]=ht(e,r);return n}var Ft=l(Ot);function Rt(e,t){return e._chain?b(t).chain():t}function Lt(n){return C(_e(n),function(e){var t=b[e]=n[e];b.prototype[e]=function(){var e=[this._wrapped];return N.apply(e,arguments),Rt(this,t.apply(b,e))}}),b}C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=r[t];b.prototype[t]=function(){var e=this._wrapped;return null!=e&&(n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0]),Rt(this,e)}}),C(["concat","join","slice"],function(e){var t=r[e];b.prototype[e]=function(){var e=this._wrapped;return Rt(this,e=null!=e?t.apply(e,arguments):e)}});a=Lt({__proto__:null,VERSION:"1.13.6",restArguments:l,isObject:i,isNull:function(e){return null===e},isUndefined:V,isBoolean:Y,isElement:function(e){return!(!e||1!==e.nodeType)},isString:Q,isNumber:X,isDate:a,isRegExp:Z,isError:ee,isSymbol:te,isArrayBuffer:ne,isDataView:p,isArray:h,isFunction:d,isArguments:ie,isFinite:function(e){return!te(e)&&W(e)&&!isNaN(parseFloat(e))},isNaN:ae,isTypedArray:de,isEmpty:function(e){var t;return null==e||("number"==typeof(t=m(e))&&(h(e)||Q(e)||ie(e))?0===t:0===m(y(e)))},isMatch:he,isEqual:function(e,t){return me(e,t)},isMap:n,isWeakMap:e,isSet:z,isWeakSet:u,keys:y,allKeys:c,values:w,pairs:function(e){for(var t=y(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=[t[o],e[t[o]]];return r},invert:xe,functions:_e,methods:_e,extend:je,extendOwn:x,assign:x,defaults:Ie,create:function(e,t){return e=Se(e),t&&x(e,t),e},clone:function(e){return i(e)?h(e)?e.slice():je({},e):e},tap:function(e,t){return t(e),e},get:$e,has:function(e,t){for(var n=(t=_(t)).length,r=0;r<n;r++){var o=t[r];if(!g(e,o))return!1;e=e[o]}return!!n},mapObject:function(e,t,n){t=I(t,n);for(var r=y(e),o=r.length,i={},a=0;a<o;a++){var u=r[a];i[u]=t(e[u],u,e)}return i},identity:Ce,constant:ue,noop:Re,toPath:Ae,property:Te,propertyOf:function(t){return null==t?Re:function(e){return $e(t,e)}},matcher:k,matches:k,times:function(e,t,n){var r=Array(Math.max(0,e));t=j(t,n,1);for(var o=0;o<e;o++)r[o]=t(o);return r},random:Le,now:S,escape:Pe,unescape:t,templateSettings:Ne,template:function(i,e,t){e=Ie({},e=!e&&t?t:e,b.templateSettings);var n,t=RegExp([(e.escape||Me).source,(e.interpolate||Me).source,(e.evaluate||Me).source].join("|")+"|$","g"),a=0,u="__p+='";if(i.replace(t,function(e,t,n,r,o){return u+=i.slice(a,o).replace(Be,qe),a=o+e.length,t?u+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?u+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(u+="';\n"+r+"\n__p+='"),e}),u+="';\n",t=e.variable){if(!Ue.test(t))throw new Error("variable is not a bare identifier: "+t)}else u="with(obj||{}){\n"+u+"}\n",t="obj";u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{n=new Function(t,"_",u)}catch(e){throw e.source=u,e}function r(e){return n.call(this,e,b)}return r.source="function("+t+"){\n"+u+"}",r},result:function(e,t,n){var r=(t=_(t)).length;if(!r)return d(n)?n.call(e):n;for(var o=0;o<r;o++){var i=null==e?void 0:e[t[o]];void 0===i&&(i=n,o=r),e=d(i)?i.call(e):i}return e},uniqueId:function(e){var t=++Ke+"";return e?e+t:t},chain:function(e){return(e=b(e))._chain=!0,e},iteratee:Fe,partial:A,bind:He,bindAll:Je,memoize:function(r,o){function i(e){var t=i.cache,n=""+(o?o.apply(this,arguments):e);return g(t,n)||(t[n]=r.apply(this,arguments)),t[n]}return i.cache={},i},delay:Ge,defer:Ve,throttle:function(n,r,o){function i(){l=!1===o.leading?0:S(),a=null,c=n.apply(u,s),a||(u=s=null)}function e(){var e=S(),t=(l||!1!==o.leading||(l=e),r-(e-l));return u=this,s=arguments,t<=0||r<t?(a&&(clearTimeout(a),a=null),l=e,c=n.apply(u,s),a||(u=s=null)):a||!1===o.trailing||(a=setTimeout(i,t)),c}var a,u,s,c,l=0;return o=o||{},e.cancel=function(){clearTimeout(a),l=0,a=u=s=null},e},debounce:function(t,n,r){function o(){var e=S()-a;e<n?i=setTimeout(o,n-e):(i=null,r||(s=t.apply(c,u)),i||(u=c=null))}var i,a,u,s,c,e=l(function(e){return c=this,u=e,a=S(),i||(i=setTimeout(o,n),r&&(s=t.apply(c,u))),s});return e.cancel=function(){clearTimeout(i),i=u=c=null},e},wrap:function(e,t){return A(t,e)},negate:Ye,compose:function(){var n=arguments,r=n.length-1;return function(){for(var e=r,t=n[r].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},after:function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},before:Qe,once:Xe,findKey:Ze,findIndex:tt,findLastIndex:nt,sortedIndex:rt,indexOf:it,lastIndexOf:at,find:ut,detect:ut,findWhere:function(e,t){return ut(e,k(t))},each:C,forEach:C,map:T,collect:T,reduce:ct,foldl:ct,inject:ct,reduceRight:lt,foldr:lt,filter:O,select:O,reject:function(e,t,n){return O(e,Ye(I(t)),n)},every:ft,all:ft,some:dt,any:dt,contains:F,includes:F,include:F,invoke:pt,pluck:ht,where:function(e,t){return O(e,k(t))},max:gt,min:function(e,r,t){var n,o,i=1/0,a=1/0;if(null==r||"number"==typeof r&&"object"!=typeof e[0]&&null!=e)for(var u=0,s=(e=E(e)?e:w(e)).length;u<s;u++)null!=(n=e[u])&&n<i&&(i=n);else r=I(r,t),C(e,function(e,t,n){((o=r(e,t,n))<a||o===1/0&&i===1/0)&&(i=e,a=o)});return i},shuffle:function(e){return yt(e,1/0)},sample:yt,sortBy:function(e,r,t){var o=0;return r=I(r,t),ht(T(e,function(e,t,n){return{value:e,index:o++,criteria:r(e,t,n)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")},groupBy:bt,indexBy:wt,countBy:xt,partition:_t,toArray:mt,size:function(e){return null==e?0:(E(e)?e:y(e)).length},pick:jt,omit:It,first:At,head:At,take:At,initial:St,last:function(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:L(e,Math.max(0,e.length-t))},rest:L,tail:L,drop:L,compact:function(e){return O(e,Boolean)},flatten:function(e,t){return $(e,t,!1)},without:$t,uniq:Ct,unique:Ct,union:Tt,intersection:function(e){for(var t=[],n=arguments.length,r=0,o=m(e);r<o;r++){var i=e[r];if(!F(t,i)){for(var a=1;a<n&&F(arguments[a],i);a++);a===n&&t.push(i)}}return t},difference:Et,unzip:Ot,transpose:Ot,zip:Ft,object:function(e,t){for(var n={},r=0,o=m(e);r<o;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},range:function(e,t,n){null==t&&(t=e||0,e=0),n=n||(t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),i=0;i<r;i++,e+=n)o[i]=e;return o},chunk:function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,o=e.length;r<o;)n.push(s.call(e,r,r+=t));return n},mixin:Lt,default:b});return a._=a},"object"==typeof i&&void 0!==o?o.exports=t():"function"==typeof define&&define.amd?define("underscore",t):(e="undefined"!=typeof globalThis?globalThis:e||self,n=e._,(r=e._=t()).noConflict=function(){return e._=n,r})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);
//# sourceMappingURL=client.map